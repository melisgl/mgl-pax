<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<title>PAX Manual</title>
<link type='text/css' href='style.css' rel='stylesheet'/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<script src="jquery.min.js"></script>
<script src="toc.min.js"></script>
<script type="text/x-mathjax-config">
     MathJax.Hub.Config({
       tex2jax: {
         inlineMath: [['$','$']],
         processEscapes: true
       }
     });
   </script>
   <script type="text/javascript" async
     src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
   </script>
   
</head>
<body>
<div id="content-container">
<div id="toc">
<div id="page-toc">
</div>
<div id="toc-footer"><ul><li><a href="https://github.com/melisgl/mgl-pax">[generated by MGL-PAX]</a></li></ul></div>
</div>
<div id="content">
<p><a id="x-28MGL-PAX-3A-40PAX-MANUAL-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L5">&#955;</a></span></span></p>

<h1><a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION">PAX Manual</a></h1>

<h2>Table of Contents</h2>

<ul>
<li><a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM">1 <code>mgl-pax</code> ASDF System</a></li>
<li><a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/full&quot; ASDF/SYSTEM:SYSTEM">2 <code>mgl-pax/full</code> ASDF System</a></li>
<li><a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links">3 Links</a></li>
<li><a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION" title="Background">4 Background</a></li>
<li><a href="#MGL-PAX:@TUTORIAL%20MGL-PAX:SECTION" title="Tutorial">5 Tutorial</a></li>
<li><a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">6 Basics</a>

<ul>
<li><a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">6.1 Locatives and References</a>

<ul>
<li><a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES-API%20MGL-PAX:SECTION" title="Locatives and References API">6.1.1 Locatives and References API</a></li>
</ul></li>
<li><a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">6.2 Parsing</a></li>
</ul></li>
<li><a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">7 Locative Types</a>

<ul>
<li><a href="#MGL-PAX:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Variables">7.1 Locatives for Variables</a></li>
<li><a href="#MGL-PAX:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Macros">7.2 Locatives for Macros</a></li>
<li><a href="#MGL-PAX:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Functions">7.3 Locatives for Functions</a></li>
<li><a href="#MGL-PAX:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Types and Declarations">7.4 Locatives for Types and Declarations</a></li>
<li><a href="#MGL-PAX:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION" title="Condition System Locatives">7.5 Condition System Locatives</a></li>
<li><a href="#MGL-PAX:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Packages and Readtables">7.6 Locatives for Packages and Readtables</a></li>
<li><a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for PAX Constructs">7.7 Locatives for PAX Constructs</a></li>
<li><a href="#MGL-PAX:@EXTERNAL-LOCATIVES%20MGL-PAX:SECTION" title="External Locatives">7.8 External Locatives</a></li>
</ul></li>
<li><a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">8 Navigating Sources in Emacs</a>

<ul>
<li><a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/navigate&quot; ASDF/SYSTEM:SYSTEM">8.1 <code>mgl-pax/navigate</code> ASDF System</a></li>
</ul></li>
<li><a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">9 Generating Documentation</a>

<ul>
<li><a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/document&quot; ASDF/SYSTEM:SYSTEM">9.1 <code>mgl-pax/document</code> ASDF System</a></li>
<li><a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">9.2 Markdown Support</a>

<ul>
<li><a href="#MGL-PAX:@MARKDOWN-INDENTATION%20MGL-PAX:SECTION" title="Indentation">9.2.1 Indentation</a></li>
<li><a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION" title="Syntax Highlighting">9.2.2 Syntax Highlighting</a></li>
<li><a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION" title="MathJax">9.2.3 MathJax</a></li>
</ul></li>
<li><a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">9.3 Codification</a></li>
<li><a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">9.4 Linking to Code</a>

<ul>
<li><a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">9.4.1 Specified Locative</a></li>
<li><a href="#MGL-PAX:@UNAMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Unambiguous Unspecified Locative">9.4.2 Unambiguous Unspecified Locative</a></li>
<li><a href="#MGL-PAX:@AMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Ambiguous Unspecified Locative">9.4.3 Ambiguous Unspecified Locative</a></li>
<li><a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">9.4.4 Explicit and Autolinking</a></li>
<li><a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">9.4.5 Preventing Autolinking</a></li>
<li><a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION" title="Unresolvable Links">9.4.6 Unresolvable Links</a></li>
<li><a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION" title="Suppressed Links">9.4.7 Suppressed Links</a></li>
<li><a href="#MGL-PAX:@FILTERING-AMBIGUOUS-REFERENCES%20MGL-PAX:SECTION" title="Filtering Ambiguous References">9.4.8 Filtering Ambiguous References</a></li>
<li><a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">9.4.9 Local References</a></li>
</ul></li>
<li><a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">9.5 Linking to the Hyperspec</a></li>
<li><a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">9.6 Linking to Sections</a></li>
<li><a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">9.7 Miscellaneous Variables</a></li>
<li><a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">9.8 Utilities for Generating Documentation</a>

<ul>
<li><a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION" title="Github Workflow">9.8.1 Github Workflow</a></li>
<li><a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">9.8.2 PAX World</a></li>
</ul></li>
<li><a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION" title="Overview of Escaping">9.9 Overview of Escaping</a></li>
<li><a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION" title="Document Generation Implementation Notes">9.10 Document Generation Implementation Notes</a></li>
</ul></li>
<li><a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">10 Transcripts</a>

<ul>
<li><a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/transcribe&quot; ASDF/SYSTEM:SYSTEM">10.1 <code>mgl-pax/transcribe</code> ASDF System</a></li>
<li><a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION" title="Transcribing with Emacs">10.2 Transcribing with Emacs</a></li>
<li><a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION" title="Transcript API">10.3 Transcript API</a></li>
<li><a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">10.4 Transcript Consistency Checking</a>

<ul>
<li><a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION" title="Finer-grained Consistency Checks">10.4.1 Finer-grained Consistency Checks</a></li>
<li><a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">10.4.2 Controlling the Dynamic Environment</a></li>
<li><a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION" title="Utilities for Consistency Checking">10.4.3 Utilities for Consistency Checking</a></li>
</ul></li>
</ul></li>
<li><a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">11 Writing Extensions</a>

<ul>
<li><a href="#MGL-PAX:@NEW-OBJECT-TYPES%20MGL-PAX:SECTION" title="Adding New Object Types">11.1 Adding New Object Types</a></li>
<li><a href="#MGL-PAX:@REFERENCE-BASED-EXTENSIONS%20MGL-PAX:SECTION" title="Reference Based Extensions">11.2 Reference Based Extensions</a></li>
<li><a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION" title="Extending `document`">11.3 Extending <code>document</code></a></li>
<li><a href="#MGL-PAX:@EXTENDING-FIND-SOURCE%20MGL-PAX:SECTION" title="Extending `find-source`">11.4 Extending <code>find-source</code></a></li>
<li><a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION" title="Sections">11.5 Sections</a></li>
<li><a href="#MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION" title="Glossary Terms">11.6 Glossary Terms</a></li>
</ul></li>
</ul>

<h6>[in package MGL-PAX with nicknames PAX]</h6>

<p><a id="x-28-22mgl-pax-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/full&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/mgl-pax.asd#L1">&#955;</a></span></span></p>

<h2><a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM">1 <code>mgl-pax</code> ASDF System</a></h2>

<ul>
<li>Version: 0.1.0</li>
<li>Description: Exploratory programming tool and documentation
  generator.</li>
<li>Long Description: The set of dependencies of the <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax</code></a> system is
  kept light, and its heavier dependencies are autoloaded via ASDF
  when the relavant functionality is accessed. See the
  <a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/navigate&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax/navigate</code></a>, <a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/document&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax/document</code></a>, <a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/transcribe&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax/transcribe</code></a> and
  <a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/full&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax/full</code></a> systems. To keep deployed code small, client systems
  should declare an ASDF dependency on this system, never on the
  others, which are intended for autoloading and interactive use.</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
<li>Homepage: <a href="http://melisgl.github.io/mgl-pax" >http://melisgl.github.io/mgl-pax</a></li>
<li>Bug tracker: <a href="https://github.com/melisgl/mgl-pax/issues" >https://github.com/melisgl/mgl-pax/issues</a></li>
<li>Source control: <a href="https://github.com/melisgl/mgl-pax.git" >GIT</a></li>
</ul>

<p><a id="x-28-22mgl-pax-2Ffull-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links">&#8594;</a> <a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/full&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/mgl-pax.asd#L1">&#955;</a></span></span></p>

<h2><a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM">2 <code>mgl-pax/full</code> ASDF System</a></h2>

<ul>
<li>Description: <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax</code></a> with all features preloaded.</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40LINKS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LINKS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/full&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION" title="Background">&#8594;</a> <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L18">&#955;</a></span></span></p>

<h2><a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION">3 Links</a></h2>

<p>Here is the <a href="https://github.com/melisgl/mgl-pax" >official
repository</a> and the <a href="http://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html" >HTML
documentation</a>
for the latest version.</p>

<p><a id="x-28MGL-PAX-3A-40BACKGROUND-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@TUTORIAL%20MGL-PAX:SECTION" title="Tutorial">&#8594;</a> <a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION" title="Background">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L24">&#955;</a></span></span></p>

<h2><a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION">4 Background</a></h2>

<p>As a user, I frequently run into documentation that's incomplete
and out of date, so I tend to stay in the editor and explore the
code by jumping around with <a href="https://slime.common-lisp.dev/" >SLIME</a>'s <a href="http://common-lisp.net/project/slime/doc/html/Finding-definitions.html#Finding-definitions" ><code>M-.</code></a>.
As a library author, I spend a great deal of time polishing code but
precious little writing documentation.</p>

<p>In fact, I rarely write anything more comprehensive than docstrings
for exported stuff. Writing docstrings feels easier than writing a
separate user manual, and they are always close at hand during
development. The drawback of this style is that users of the library
have to piece the big picture together themselves.</p>

<p>That's easy to solve, I thought, let's just put all the narrative
that holds docstrings together in the code and be a bit like a
Literate Programmer turned inside out. The original prototype, which
did almost everything I wanted, was this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defmacro</span></i> <i><span class="symbol">defsection</span></i> <span class="paren2">(<span class="code">name docstring</span>)</span>
  `<span class="paren2">(<span class="code"><i><span class="symbol">defun</span></i> ,name <span class="paren3">(<span class="code"></span>)</span> ,docstring</span>)</span></span>)</span></span></code></pre>

<p>Armed with this <code>defsection</code>, I soon found myself
organizing code following the flow of user-level documentation and
relegated comments to implementation details entirely. However, some
parts of <code>defsection</code> docstrings were just listings of
all the functions, macros and variables related to the narrative,
and this list was repeated in the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpkg.htm" title="DEFPACKAGE MGL-PAX:MACRO"><code>defpackage</code></a> form complete with
little comments that were like section names. A clear violation of
<a href="http://c2.com/cgi/wiki?OnceAndOnlyOnce" >OAOO</a>, one of them had to go, so <code>defsection</code> got
a list of symbols to export.</p>

<p>That was great, but soon I found that the listing of symbols is
ambiguous if, for example, a function, a compiler macro and a class
are named by the same symbol. This did not concern exporting, of
course, but it didn't help readability. Distractingly, on such
symbols, <code>M-.</code> was popping up selection dialogs. There were two
birds to kill, and the symbol got accompanied by a type, which was
later generalized into the concept of locatives:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> @introduction <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"A single line for one man ..."</span>
  <span class="paren2">(<span class="code">foo class</span>)</span>
  <span class="paren2">(<span class="code">bar <i><span class="symbol">function</span></i></span>)</span></span>)</span></span></code></pre>

<p>After a bit of elisp hacking, <code>M-.</code> was smart enough to
disambiguate based on the locative found in the vicinity of the
symbol, and everything was good for a while.</p>

<p>Then I realized that sections could refer to other sections if there
were a <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>section</code></a> locative. Going down that path, I soon began to feel
the urge to generate pretty documentation as all the necessary
information was manifest in the <code>defsection</code> forms. The design
constraint imposed on documentation generation was that following
the typical style of upcasing symbols in docstrings there should be
no need to explicitly mark up links: if <code>M-.</code> works, then the
documentation generator shall also be able find out what's being
referred to.</p>

<p>I settled on <a href="https://daringfireball.net/projects/markdown/" >Markdown</a> as a reasonably non-intrusive
format, and a few thousand lines later PAX was born.</p>

<p><a id="x-28MGL-PAX-3A-40TUTORIAL-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TUTORIAL%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION" title="Background">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">&#8594;</a> <a href="#MGL-PAX:@TUTORIAL%20MGL-PAX:SECTION" title="Tutorial">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L96">&#955;</a></span></span></p>

<h2><a href="#MGL-PAX:@TUTORIAL%20MGL-PAX:SECTION">5 Tutorial</a></h2>

<p>PAX provides an extremely poor man's Explorable Programming
environment. Narrative primarily lives in so called sections that
mix markdown docstrings with references to functions, variables,
etc, all of which should probably have their own docstrings.</p>

<p>The primary focus is on making code easily explorable by using
<a href="http://common-lisp.net/project/slime/doc/html/Finding-definitions.html#Finding-definitions" >SLIME's <code>M-.</code></a> (<code>slime-edit-definition</code>). See how to
enable some fanciness in <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating Sources in Emacs</a>.
<a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a> from sections and all the referenced items
in Markdown or HTML format is also implemented.</p>

<p>With the simplistic tools provided, one may accomplish similar
effects as with Literate Programming, but documentation is generated
from code, not vice versa and there is no support for chunking. Code
is first, code must look pretty, documentation is code.</p>

<h5>Docstrings</h5>

<p>PAX's automatically recognizes and <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">marks up code</a>
with backticks and <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">links code</a> to their
definitions.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">document <span class="string">"&amp;KEY arguments such as :IF-EXISTS are common."</span></span>)</span>
=&gt; <span class="paren1">(<span class="code"><span class="string">"`&amp;KEY` arguments such as `:IF-EXISTS` are common.
"</span></span>)</span>

<span class="paren1">(<span class="code">document <span class="string">"AND denotes a macro and a type specifier.
          Here we focus on the macro AND."</span></span>)</span>
=&gt; <span class="paren1">(<span class="code"><span class="string">"`AND`([`0`][4954] [`1`][330f]) denotes a macro and a type specifier.
Here we focus on the macro [`AND`][4954].

  [330f]: http://www.lispworks.com/documentation/HyperSpec/Body/t_and.htm </span><span class="string">\"</span><span class="string">AND TYPE</span><span class="string">\"</span><span class="string">
  [4954]: http://www.lispworks.com/documentation/HyperSpec/Body/m_and.htm </span><span class="string">\"</span><span class="string">AND MGL-PAX:MACRO</span><span class="string">\"</span><span class="string">
"</span></span>)</span></span></code></pre>

<p>These features are designed to handle a common style of docstrings
with minimal additional markup. The following is the output
of <code>(mgl-pax:document #'abort)</code>. Note that the docstring of the
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_abortc.htm" title="ABORT FUNCTION"><code>abort</code></a> function was not written with PAX in mind.</p>

<ul>
<li><p>[function] <strong>ABORT</strong> <em>&amp;OPTIONAL CONDITION</em></p>

<p>Transfer control to a restart named <code>abort</code>, signalling a
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_contro.htm" title="\\CONTROL-ERROR \\CONDITION"><code>control-error</code></a> if none exists.</p></li>
</ul>

<h5>A Complete Example</h5>

<p>Here is an example of how it all works together:</p>

<p><a id="x-28MGL-PAX-3AFOO-RANDOM-EXAMPLE-20-28MGL-PAX-3AINCLUDE-20-23P-22-2Fhome-2Fmelisgl-2Fown-2Fmgl-pax-2Fsrc-2Fbase-2Ffoo-random-example-2Elisp-22-20-3AHEADER-NL-20-22-60-60-60-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="MGL-PAX:FOO-RANDOM-EXAMPLE%20%28MGL-PAX:INCLUDE%20%23P%22%2Fhome%2Fmelisgl%2Fown%2Fmgl-pax%2Fsrc%2Fbase%2Ffoo-random-example.lisp%22%20:HEADER-NL%20%22%60%60%60%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">mgl-pax:define-package</span></i> <span class="keyword">:foo-random</span>
  <span class="paren2">(<span class="code"><span class="keyword">:documentation</span> <span class="string">"This package provides various utilities for random.
  See FOO-RANDOM:@FOO-RANDOM-MANUAL."</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:use</span> <span class="keyword">#:common-lisp</span> <span class="keyword">#:mgl-pax</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">in-package <span class="keyword">:foo-random</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> @foo-random-manual <span class="paren2">(<span class="code"><span class="keyword">:title</span> <span class="string">"Foo Random manual"</span></span>)</span>
  <span class="string">"Here you describe what's common to all the referenced (and
  exported) functions that follow. They work with *FOO-STATE*, and
  have a :RANDOM-STATE keyword arg. Also explain when to choose
  which."</span>
  <span class="paren2">(<span class="code">foo-random-state class</span>)</span>
  <span class="paren2">(<span class="code">state <span class="paren3">(<span class="code">reader foo-random-state</span>)</span></span>)</span>
  <span class="string">"Hey we can also print states!"</span>
  <span class="paren2">(<span class="code">print-object <span class="paren3">(<span class="code">method <span class="paren4">(<span class="code"></span>)</span> <span class="paren4">(<span class="code">foo-random-state t</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="special">*foo-state*</span> variable</span>)</span>
  <span class="paren2">(<span class="code">gaussian-random <i><span class="symbol">function</span></i></span>)</span>
  <span class="paren2">(<span class="code">uniform-random <i><span class="symbol">function</span></i></span>)</span>
  <span class="comment">;; This is a subsection.
</span>  <span class="paren2">(<span class="code">@foo-random-examples section</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> foo-random-state <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">state <span class="keyword">:reader</span> state</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> print-object <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">object foo-random-state</span>)</span> stream</span>)</span>
  <span class="paren2">(<span class="code">print-unreadable-object <span class="paren3">(<span class="code">object stream <span class="keyword">:type</span> t</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*foo-state*</span> <span class="paren2">(<span class="code">make-instance 'foo-random-state</span>)</span>
  <span class="string">"Much like *RANDOM-STATE* but uses the FOO algorithm."</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> uniform-random <span class="paren2">(<span class="code">limit &amp;key <span class="paren3">(<span class="code">random-state <span class="special">*foo-state*</span></span>)</span></span>)</span>
  <span class="string">"Return a random number from the between 0 and LIMIT (exclusive)
  uniform distribution."</span>
  nil</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> gaussian-random <span class="paren2">(<span class="code">stddev &amp;key <span class="paren3">(<span class="code">random-state <span class="special">*foo-state*</span></span>)</span></span>)</span>
  <span class="string">"Return a random number from a zero mean normal distribution with
  STDDEV."</span>
  nil</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> @foo-random-examples <span class="paren2">(<span class="code"><span class="keyword">:title</span> <span class="string">"Examples"</span></span>)</span>
  <span class="string">"Let's see the transcript of a real session of someone working
  with FOO:

  ```cl-transcript
  (values (princ :hello) (list 1 2))
  .. HELLO
  =&gt; :HELLO
  =&gt; (1 2)

  (make-instance 'foo-random-state)
  ==&gt; #&lt;FOO-RANDOM-STATE &gt;
  ```"</span></span>)</span></span></code></pre>

<p>Note how <code>(variable *foo-state*)</code> in the <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> form both
exports <code>*foo-state*</code> and includes its documentation in
<code>@foo-random-manual</code>. The symbols <a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> and
<a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a> are just two instances of <a href="#MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@LOCATIVE MGL-PAX:GLOSSARY-TERM">locative</a>s, which are
used in <code>defsection</code> to refer to definitions tied to symbols.</p>

<p><code>(document @foo-random-manual)</code> generates fancy markdown or HTML
output with <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE">automatic markup</a> and <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">autolinks</a> uppercase <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@WORD MGL-PAX:GLOSSARY-TERM">word</a>s
found in docstrings, numbers sections, and creates a table of
contents.</p>

<p>One can even generate documentation for different but related
libraries at the same time with the output going to different files
but with cross-page links being automatically added for symbols
mentioned in docstrings. See <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a> for some
convenience functions to cover the most common cases.</p>

<p>The <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">transcript</a> in the code block tagged with
<code>cl-transcript</code> is automatically checked for up-to-dateness when
documentation is generated.</p>

<p><a id="x-28MGL-PAX-3A-40BASICS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@BASICS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TUTORIAL%20MGL-PAX:SECTION" title="Tutorial">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">&#8594;</a> <a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L175">&#955;</a></span></span></p>

<h2><a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION">6 Basics</a></h2>

<p>Now let's examine the most important pieces.</p>

<p><a id="x-28MGL-PAX-3ADEFSECTION-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFSECTION%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L12">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" >defsection</a></span></span> <span class="locative-args">name (&amp;key (package '*package*) (readtable '*readtable*) (export t) title link-title-to (discard-documentation-p *discard-documentation-p*)) &amp;body entries</span></span></p>

<p>Define a documentation section and maybe export referenced symbols.
A bit behind the scenes, a global variable with <code>name</code> is defined and
is bound to a <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a> object. By convention, section names
start with the character <code>@</code>. See <a href="#MGL-PAX:@TUTORIAL%20MGL-PAX:SECTION" title="Tutorial">Tutorial</a> for an example.</p>

<h5>Entries</h5>

<p><code>entries</code> consists of docstrings and references in any order.
Docstrings are arbitrary strings in markdown format.</p>

<p><a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>references</code></a> are given in the form <code>(object locative)</code>. For example,
<code>(foo function)</code> refers to the function <code>foo</code>, <code>(@bar section)</code> says
that <code>@bar</code> is a subsection of this one. <code>(baz (method () (t t t)))</code>
refers to the default method of the three argument generic function
<code>baz</code>. <code>(foo function)</code> is equivalent to <code>(foo (function))</code>. See
<a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">Locatives and References</a> for more.</p>

<p>The same object may occur in multiple references, typically with
different locatives, but this is not required.</p>

<p>The references are not looked up (see <a href="#MGL-PAX:RESOLVE%20FUNCTION" title="MGL-PAX:RESOLVE FUNCTION"><code>resolve</code></a> in the
<a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES-API%20MGL-PAX:SECTION" title="Locatives and References API">Locatives and References API</a>) until documentation is generated, so
it is allowed to refer to things yet to be defined.</p>

<h5>Exporting</h5>

<p>If <code>export</code> is true (the default), <code>name</code> and the <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a>s of references
among <code>entries</code> which are <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL TYPE"><code>symbol</code></a>s are candidates for exporting. A
candidate symbol is exported if</p>

<ul>
<li><p>it is <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_s.htm" title="FIND-SYMBOL FUNCTION">accessible</a> in <code>package</code>, and</p></li>
<li><p>there is a reference to it in the section being defined which is
  approved by <a href="#MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-REFERENCE-P GENERIC-FUNCTION"><code>exportable-reference-p</code></a>.</p></li>
</ul>

<p>See <a href="#MGL-PAX:DEFINE-PACKAGE%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-PACKAGE MGL-PAX:MACRO"><code>define-package</code></a> if you use the export feature. The idea with
confounding documentation and exporting is to force documentation of
all exported symbols.</p>

<h5>Misc</h5>

<p><code>title</code> is a string containing markdown or <code>nil</code>. If non-NIL, it
determines the text of the heading in the generated output.
<code>link-title-to</code> is a reference given as an <code>(object locative)</code> pair or
<code>nil</code>, to which the heading will link when generating HTML. If not
specified, the heading will link to its own anchor.</p>

<p>When <code>discard-documentation-p</code> (defaults to <a href="#MGL-PAX:*DISCARD-DOCUMENTATION-P*%20VARIABLE" title="MGL-PAX:*DISCARD-DOCUMENTATION-P* VARIABLE"><code>*discard-documentation-p*</code></a>)
is true, <code>entries</code> will not be recorded to save memory.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADISCARD-DOCUMENTATION-P-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DISCARD-DOCUMENTATION-P*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L7">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DISCARD-DOCUMENTATION-P*%20VARIABLE" >*discard-documentation-p*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>The default value of <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>'s <code>discard-documentation-p</code> argument.
One may want to set <code>*discard-documentation-p*</code> to true before
building a binary application.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADEFINE-PACKAGE-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFINE-PACKAGE%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L183">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFINE-PACKAGE%20MGL-PAX:MACRO" >define-package</a></span></span> <span class="locative-args">package &amp;rest options</span></span></p>

<p>This is like <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpkg.htm" title="DEFPACKAGE MGL-PAX:MACRO"><code>cl:defpackage</code></a> but silences warnings and errors
signaled when the redefined package is at variance with the current
state of the package. Typically this situation occurs when symbols
are exported by calling <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_export.htm" title="EXPORT FUNCTION"><code>export</code></a> (as is the case with <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>) as
opposed to adding <code>:export</code> forms to the <code>defpackage</code> form and the
package definition is subsequently reevaluated. See the section on
<a href="http://www.sbcl.org/manual/#Package-Variance" >package variance</a> in
the SBCL manual.</p>

<p>The bottom line is that if you rely on <code>defsection</code> to do the
exporting, then you'd better use <code>define-package</code>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40LOCATIVES-AND-REFERENCES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">&#8592;</a> <a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">&#8593;</a> <a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES-API%20MGL-PAX:SECTION" title="Locatives and References API">&#8594;</a> <a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L204">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION">6.1 Locatives and References</a></h3>

<p>To <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">navigate with <code>M-.</code></a> and to <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">generate
documentation</a> we need to refer to things
such as the <code>foo</code> type or the <code>foo</code> function.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">deftype</span></i> foo <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"type doc"</span>
  '<span class="paren2">(<span class="code">or integer real</span>)</span>.

<span class="paren2">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren3">(<span class="code"></span>)</span>
  <span class="string">"function doc"</span>
  7</span>)</span></span></span></span></code></pre>

<p>The docstring is available via <code>(cl:documentation 'foo 'type)</code>,
where <code>type</code> - called <code>doc-type</code> - is what tells <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_docume.htm" title="DOCUMENTATION GENERIC-FUNCTION"><code>cl:documentation</code></a>
that we want the docstring of the type named <code>foo</code>. This design
supports disambiguation and working with things that are not
first-class, such as types.</p>

<p>PAX generalizes <code>doc-type</code> to the concept of <a href="#MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@LOCATIVE MGL-PAX:GLOSSARY-TERM">locative</a>s, which may
also take arguments. An <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a> and a <a href="#MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@LOCATIVE MGL-PAX:GLOSSARY-TERM">locative</a> together are called
a <a href="#MGL-PAX:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE MGL-PAX:GLOSSARY-TERM">reference</a>, and they identify a definition. <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a>s are actual
objects, but often they appear as an <code>(object locative)</code> list (see
<a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>) or as <code>&quot;OBJECT LOCATIVE&quot;</code> in docstrings (see
<a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a> for the various forms possible).</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> @foos <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"We discuss the FOO type and the FOO function."</span>
  <span class="paren2">(<span class="code">foo type</span>)</span>
  <span class="paren2">(<span class="code">foo <i><span class="symbol">function</span></i></span>)</span></span>)</span></span></code></pre>

<p><a id="x-28MGL-PAX-3A-40REFERENCE-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@REFERENCE%20MGL-PAX:GLOSSARY-TERM"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L243">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" >reference</a></span></span></span></p>

<p>A <a href="#MGL-PAX:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE MGL-PAX:GLOSSARY-TERM">reference</a> is an <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a> plus a <a href="#MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@LOCATIVE MGL-PAX:GLOSSARY-TERM">locative</a>, and it identifies a
definition. For example, the symbol <code>foo</code> as the object and the
symbol <a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a> as the locative together refer to the
global definition of the function <code>foo</code>.</p>

<p><a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a> objects can be represented as an <code>(object locative)</code> list
as in <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> entries, or textually as <code>&quot;FOO function&quot;</code> where
<code>foo</code> is a <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@NAME MGL-PAX:GLOSSARY-TERM">name</a> or similar (see <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a> and
<a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>).</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40OBJECT-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L254">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" >object</a></span></span></span></p>

<p><a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a>s are symbols or strings which name <a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE">functions</a>, <a href="#TYPE%20MGL-PAX:LOCATIVE" title="TYPE MGL-PAX:LOCATIVE">types</a>, <a href="#PACKAGE%20MGL-PAX:LOCATIVE" title="PACKAGE MGL-PAX:LOCATIVE">packages</a>,
etc. Together with <a href="#MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@LOCATIVE MGL-PAX:GLOSSARY-TERM">locative</a>s, they form <a href="#MGL-PAX:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE MGL-PAX:GLOSSARY-TERM">reference</a>s.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40LOCATIVE-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L259">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" >locative</a></span></span></span></p>

<p><a href="#MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@LOCATIVE MGL-PAX:GLOSSARY-TERM">locative</a>s specify a <em>type</em> of definition such as
<a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a> or <a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> and together with
<a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a>s form <a href="#MGL-PAX:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE MGL-PAX:GLOSSARY-TERM">reference</a>s.</p>

<p>A locative can be a symbol or a list whose <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_car_c.htm" title="CAR FUNCTION"><code>car</code></a> is a symbol. In
either case, the symbol is called the <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">locative type</a> while the rest of the elements are the
<em>locative arguments</em>. See the <a href="#METHOD%20MGL-PAX:LOCATIVE" title="METHOD MGL-PAX:LOCATIVE"><code>method</code></a> locative or the <a href="#MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE" title="MGL-PAX:LOCATIVE MGL-PAX:LOCATIVE"><code>locative</code></a>
locative for examples of locative types with arguments.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40LOCATIVES-AND-REFERENCES-API-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LOCATIVES-AND-REFERENCES-API%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">&#8592;</a> <a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">&#8593;</a> <a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">&#8594;</a> <a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES-API%20MGL-PAX:SECTION" title="Locatives and References API">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L271">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES-API%20MGL-PAX:SECTION">6.1.1 Locatives and References API</a></h4>

<p><code>(make-reference 'foo 'variable)</code> constructs a <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a> that
captures the path to take from an <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a> (the symbol <code>foo</code>) to an
entity of interest (for example, the documentation of the variable).
The path is called the <a href="#MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@LOCATIVE MGL-PAX:GLOSSARY-TERM">locative</a>. A locative can be applied to an
object like this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">locate 'foo 'variable</span>)</span></span></code></pre>

<p>which will return the same reference as <code>(make-reference 'foo
'variable)</code>. Operations need to know how to deal with references,
which we will see in the <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">Writing Extensions</a>.</p>

<p>Naturally, <code>(locate 'foo 'function)</code> will simply return <code>#'foo</code>, no
need to muck with references when there is a perfectly good object.</p>

<p><a id="x-28MGL-PAX-3AREFERENCE-20CLASS-29"></a>
<a id="MGL-PAX:REFERENCE%20CLASS"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L84">[class]</a></span> <span class="reference-object"><a href="#MGL-PAX:REFERENCE%20CLASS" >reference</a></span></span></span></p>

<p>A <code>reference</code> represents a path (<a href="#MGL-PAX:REFERENCE-LOCATIVE%20%28MGL-PAX:READER%20MGL-PAX:REFERENCE%29" title="MGL-PAX:REFERENCE-LOCATIVE (MGL-PAX:READER MGL-PAX:REFERENCE)"><code>reference-locative</code></a>)
to take from an object (<a href="#MGL-PAX:REFERENCE-OBJECT%20%28MGL-PAX:READER%20MGL-PAX:REFERENCE%29" title="MGL-PAX:REFERENCE-OBJECT (MGL-PAX:READER MGL-PAX:REFERENCE)"><code>reference-object</code></a>).</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AREFERENCE-OBJECT-20-28MGL-PAX-3AREADER-20MGL-PAX-3AREFERENCE-29-29"></a>
<a id="MGL-PAX:REFERENCE-OBJECT%20%28MGL-PAX:READER%20MGL-PAX:REFERENCE%29"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L85">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:REFERENCE-OBJECT%20%28MGL-PAX:READER%20MGL-PAX:REFERENCE%29" >reference-object</a></span></span> <span class="locative-args">reference (:object)</span></span></li>
</ul>

<p><a id="x-28MGL-PAX-3AREFERENCE-LOCATIVE-20-28MGL-PAX-3AREADER-20MGL-PAX-3AREFERENCE-29-29"></a>
<a id="MGL-PAX:REFERENCE-LOCATIVE%20%28MGL-PAX:READER%20MGL-PAX:REFERENCE%29"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L86">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:REFERENCE-LOCATIVE%20%28MGL-PAX:READER%20MGL-PAX:REFERENCE%29" >reference-locative</a></span></span> <span class="locative-args">reference (:locative)</span></span></li>
</ul>

<p><a id="x-28MGL-PAX-3AMAKE-REFERENCE-20FUNCTION-29"></a>
<a id="MGL-PAX:MAKE-REFERENCE%20FUNCTION"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L99">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:MAKE-REFERENCE%20FUNCTION" >make-reference</a></span></span> <span class="locative-args">object locative</span></span></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATIVE-TYPE-20FUNCTION-29"></a>
<a id="MGL-PAX:LOCATIVE-TYPE%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L133">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATIVE-TYPE%20FUNCTION" >locative-type</a></span></span> <span class="locative-args">locative</span></span></p>

<p>Return the first element of <code>locative</code> if it's a list. If it's a symbol,
then return that symbol itself.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATIVE-ARGS-20FUNCTION-29"></a>
<a id="MGL-PAX:LOCATIVE-ARGS%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L140">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATIVE-ARGS%20FUNCTION" >locative-args</a></span></span> <span class="locative-args">locative</span></span></p>

<p>The <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_rest.htm" title="REST FUNCTION"><code>rest</code></a> of <code>locative</code> if it's a list. If it's a symbol then it's
<code>nil</code>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-20FUNCTION-29"></a>
<a id="MGL-PAX:LOCATE%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L308">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE%20FUNCTION" >locate</a></span></span> <span class="locative-args">object locative &amp;key (errorp t)</span></span></p>

<p>Follow <code>locative</code> from <code>object</code> and return the object it leads to or a
<a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a> if there is no first-class object corresponding to the
location. Depending on <code>errorp</code>, a <a href="#MGL-PAX:LOCATE-ERROR%20CONDITION" title="MGL-PAX:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition is signaled
or <code>nil</code> is returned if the lookup fails.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">locate 'locate '<i><span class="symbol">function</span></i></span>)</span>
==&gt; #&lt;FUNCTION LOCATE&gt;

<span class="paren1">(<span class="code">locate 'no-such-function '<i><span class="symbol">function</span></i></span>)</span>
.. debugger invoked on LOCATE-ERROR:
..   Could not locate NO-SUCH-FUNCTION FUNCTION.
..   NO-SUCH-FUNCTION does not name a function.

<span class="paren1">(<span class="code">locate 'locate-object 'method</span>)</span>
.. debugger invoked on LOCATE-ERROR:
..   Could not locate LOCATE-OBJECT METHOD.
..   The syntax of the METHOD locative is <span class="paren1">(<span class="code">METHOD &lt;METHOD-QUALIFIERS&gt; &lt;METHOD-SPECIALIZERS&gt;</span>)</span>.</span></code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-ERROR-20CONDITION-29"></a>
<a id="MGL-PAX:LOCATE-ERROR%20CONDITION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L337">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-ERROR%20CONDITION" >locate-error</a></span></span> <span class="locative-args">error</span></span></p>

<p>Signaled by <a href="#MGL-PAX:LOCATE%20FUNCTION" title="MGL-PAX:LOCATE FUNCTION"><code>locate</code></a> when the lookup fails and <code>errorp</code>
is true.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-ERROR-MESSAGE-20-28MGL-PAX-3AREADER-20MGL-PAX-3ALOCATE-ERROR-29-29"></a>
<a id="MGL-PAX:LOCATE-ERROR-MESSAGE%20%28MGL-PAX:READER%20MGL-PAX:LOCATE-ERROR%29"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L337">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-ERROR-MESSAGE%20%28MGL-PAX:READER%20MGL-PAX:LOCATE-ERROR%29" >locate-error-message</a></span></span> <span class="locative-args">locate-error (:message)</span></span></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-ERROR-OBJECT-20-28MGL-PAX-3AREADER-20MGL-PAX-3ALOCATE-ERROR-29-29"></a>
<a id="MGL-PAX:LOCATE-ERROR-OBJECT%20%28MGL-PAX:READER%20MGL-PAX:LOCATE-ERROR%29"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L337">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-ERROR-OBJECT%20%28MGL-PAX:READER%20MGL-PAX:LOCATE-ERROR%29" >locate-error-object</a></span></span> <span class="locative-args">locate-error (:object)</span></span></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-ERROR-LOCATIVE-20-28MGL-PAX-3AREADER-20MGL-PAX-3ALOCATE-ERROR-29-29"></a>
<a id="MGL-PAX:LOCATE-ERROR-LOCATIVE%20%28MGL-PAX:READER%20MGL-PAX:LOCATE-ERROR%29"></a></p>

<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L337">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-ERROR-LOCATIVE%20%28MGL-PAX:READER%20MGL-PAX:LOCATE-ERROR%29" >locate-error-locative</a></span></span> <span class="locative-args">locate-error (:locative)</span></span></li>
</ul>

<p><a id="x-28MGL-PAX-3ARESOLVE-20FUNCTION-29"></a>
<a id="MGL-PAX:RESOLVE%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax.lisp#L349">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:RESOLVE%20FUNCTION" >resolve</a></span></span> <span class="locative-args">reference &amp;key (errorp t)</span></span></p>

<p>A convenience function to <a href="#MGL-PAX:LOCATE%20FUNCTION" title="MGL-PAX:LOCATE FUNCTION"><code>locate</code></a> <code>reference</code>'s object with its
locative.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40PARSING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PARSING%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES-API%20MGL-PAX:SECTION" title="Locatives and References API">&#8592;</a> <a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">&#8593;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8594;</a> <a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/parse.lisp#L5">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION">6.2 Parsing</a></h3>

<p><a id="x-28MGL-PAX-3A-40WORD-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/parse.lisp#L9">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" >word</a></span></span></span></p>

<p>A <em>word</em> is a string from which we want to extract an <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a>. When
<a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating</a>, the word is
<code>slime-symbol-at-point</code>. When <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a>, it is a
non-empty string between whitespace characters in a docstring.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40NAME-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/parse.lisp#L15">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" >name</a></span></span></span></p>

<p>A <em>name</em> is a string that names an <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_intern.htm" title="INTERN FUNCTION"><code>intern</code></a>ed <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL TYPE"><code>symbol</code></a>,
a <code>package</code>(<a href="#PACKAGE%20MGL-PAX:LOCATIVE" title="PACKAGE MGL-PAX:LOCATIVE"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE TYPE"><code>1</code></a>), or an <a href="#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a>, that is, a possible <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a>. Names are
constructed from <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@WORD MGL-PAX:GLOSSARY-TERM">word</a>s by possibly trimming leading and trailing
punctuation symbols and removing certain plural suffixes.</p>

<p>For example, in <code>&quot;X and Y must be LISTs.&quot;</code>, although the word is
<code>&quot;LISTs.&quot;</code>, it gets trimmed to <code>&quot;LISTs&quot;</code>, then the plural suffix
<code>&quot;s&quot;</code> is removed to get <code>&quot;LIST&quot;</code>. Out of the three candidates for
names, <code>&quot;LISTs.&quot;</code>, <code>&quot;LISTs&quot;</code>, and <code>&quot;LIST&quot;</code>, the ones that name
interned symbols and such are retained for purposes for
<a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating</a> and
<a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a>.</p>

<p>The punctuation characters for left and right trimming are <code>#&lt;</code> and
<code>,:.&gt;</code>, respectively. The plural suffixes considered are <code>s</code>, <code>es</code>,
<code>ses</code>, <code>zes</code>, and <code>ren</code> (all case insensitive).</p>

<p>Thus <code>&quot;CHILDREN&quot;</code> and <code>&quot;BUSES&quot;</code> may have the names <code>&quot;CHILD&quot;</code> and
<code>&quot;BUS&quot;</code> in them.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40LOCATIVE-TYPES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Variables">&#8594;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L5">&#955;</a></span></span></p>

<h2><a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION">7 Locative Types</a></h2>

<p>As we have already briefly seen in <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> and
<a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">Locatives and References</a>, locatives allow us to refer to, document,
and find the source location of various definitions beyond what
standard Common Lisp offers. See <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">Writing Extensions</a> for a more detailed
treatment. The following are the locatives types supported out of
the box. As all locative types, they are named by symbols, which
should make it obvious what kind of things they refer to. Unless
otherwise noted, locatives take no arguments.</p>

<p>When there is a corresponding CL type, a locative can be resolved to
a unique object as is the case in <code>(locate 'foo 'class)</code> returning
<code>#&lt;class foo&gt;</code>. Even if there is no such CL type, the source
location and the docstring of the defining form is recorded (see
<a href="#MGL-PAX:LOCATE-AND-FIND-SOURCE%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-AND-FIND-SOURCE GENERIC-FUNCTION"><code>locate-and-find-source</code></a>, <a href="#MGL-PAX:LOCATE-AND-DOCUMENT%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-AND-DOCUMENT GENERIC-FUNCTION"><code>locate-and-document</code></a> in the <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">Writing Extensions</a>),
which makes navigating the sources with <code>M-.</code> (see
<a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating Sources in Emacs</a>) and <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a> possible.</p>

<p><a id="x-28MGL-PAX-3A-40VARIABLELIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8592;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#MGL-PAX:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Macros">&#8594;</a> <a href="#MGL-PAX:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Variables">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/locatives-early.lisp#L5">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION">7.1 Locatives for Variables</a></h3>

<p><a id="x-28VARIABLE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="VARIABLE%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L68">[locative]</a></span> <span class="reference-object"><a href="#VARIABLE%20MGL-PAX:LOCATIVE" >variable</a></span></span> <span class="locative-args">&amp;optional initform</span></span></p>

<p>Refers to a global special variable. <code>initform</code>, or if not specified,
the global value of the variable is included in the documentation.</p>

<pre><code><span class="code"><span class="comment">;;; A REFERENCE is returned because there is no such type as VARIABLE.
</span><span class="paren1">(<span class="code">locate '<span class="special">*FORMAT*</span> 'variable</span>)</span>
==&gt; #&lt;REFERENCE *FORMAT* VARIABLE&gt;</span></code></pre>

<p>For the output of <code>(document (make-reference '*format* 'variable))</code>,
see <a href="#MGL-PAX:*FORMAT*%20VARIABLE" title="MGL-PAX:*FORMAT* VARIABLE"><code>*format*</code></a>. Note that <code>*format*</code> is unbound. If the variable is
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_boundp.htm" title="BOUNDP FUNCTION"><code>boundp</code></a>, then its <em>current</em> value is included in the documentation.
See <a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-CODE* VARIABLE"><code>*document-link-code*</code></a> for an example output. To override the
current value, <code>initform</code> may be provided. This is particulary
useful if the value of the variable is something undesirable such as
<code>#&lt;MY-CLASS {100171ED93}&gt;</code>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ACONSTANT-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:CONSTANT%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L120">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:CONSTANT%20MGL-PAX:LOCATIVE" >constant</a></span></span> <span class="locative-args">&amp;optional initform</span></span></p>

<p>Refers to a variable defined with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defcon.htm" title="DEFCONSTANT MGL-PAX:MACRO"><code>defconstant</code></a>. <code>initform</code>, or if not
specified, the value of the constant is included in the
documentation. The <a href="#MGL-PAX:CONSTANT%20MGL-PAX:LOCATIVE" title="MGL-PAX:CONSTANT MGL-PAX:LOCATIVE"><code>constant</code></a> locative is like the <a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> locative,
but it also checks that its object is <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_consta.htm" title="CONSTANTP FUNCTION"><code>constantp</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40MACROLIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Variables">&#8592;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#MGL-PAX:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Functions">&#8594;</a> <a href="#MGL-PAX:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Macros">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/locatives-early.lisp#L9">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION">7.2 Locatives for Macros</a></h3>

<p><a id="x-28MGL-PAX-3AMACRO-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:MACRO%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L163">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:MACRO%20MGL-PAX:LOCATIVE" >macro</a></span></span></span></p>

<p>Refers to a global macro, typically defined with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defmac.htm" title="DEFMACRO MGL-PAX:MACRO"><code>defmacro</code></a> or a
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_specia.htm" title="SPECIAL-OPERATOR-P FUNCTION">special operator</a>. See the <a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a>
locative for a note on arglists.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ASYMBOL-MACRO-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:SYMBOL-MACRO%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L195">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:SYMBOL-MACRO%20MGL-PAX:LOCATIVE" >symbol-macro</a></span></span></span></p>

<p>Refers to a global symbol macro, defined with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defi_1.htm" title="DEFINE-SYMBOL-MACRO MGL-PAX:MACRO"><code>define-symbol-macro</code></a>.
Note that since <code>define-symbol-macro</code> does not support docstrings,
PAX defines methods on the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_docume.htm" title="DOCUMENTATION GENERIC-FUNCTION"><code>documentation</code></a> generic function
specialized for <code>doc-type</code> <code>symbol-macro</code>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-symbol-macro</span></i> my-mac 42</span>)</span>
<span class="paren1">(<span class="code">setf <span class="paren2">(<span class="code">documentation 'my-mac 'symbol-macro</span>)</span>
      <span class="string">"This is MY-MAC."</span></span>)</span>
<span class="paren1">(<span class="code">documentation 'my-mac 'symbol-macro</span>)</span>
=&gt; "This is MY-MAC."</span></code></pre></li>
</ul>

<p><a id="x-28COMPILER-MACRO-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="COMPILER-MACRO%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L243">[locative]</a></span> <span class="reference-object"><a href="#COMPILER-MACRO%20MGL-PAX:LOCATIVE" >compiler-macro</a></span></span></span></p>

<p>Refers to a compiler macro, typically defined with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_define.htm" title="DEFINE-COMPILER-MACRO MGL-PAX:MACRO"><code>define-compiler-macro</code></a>. See the <a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a> locative for a note on
arglists.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40FUNCTIONLIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Macros">&#8592;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#MGL-PAX:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Types and Declarations">&#8594;</a> <a href="#MGL-PAX:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Functions">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/locatives-early.lisp#L14">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION">7.3 Locatives for Functions</a></h3>

<p><a id="x-28FUNCTION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="FUNCTION%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L277">[locative]</a></span> <span class="reference-object"><a href="#FUNCTION%20MGL-PAX:LOCATIVE" >function</a></span></span></span></p>

<p>Refers to a global function, typically defined with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defun.htm" title="DEFUN MGL-PAX:MACRO"><code>defun</code></a>.</p>

<p>Note that the arglist in the generated documentation depends on the
quality of <code>swank-backend:arglist</code>. It <a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION" title="Document Generation Implementation Notes">may be</a> that default values of
optional and keyword arguments are missing.</p></li>
</ul>

<p><a id="x-28GENERIC-FUNCTION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="GENERIC-FUNCTION%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L285">[locative]</a></span> <span class="reference-object"><a href="#GENERIC-FUNCTION%20MGL-PAX:LOCATIVE" >generic-function</a></span></span></span></p>

<p>Refers to a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_generi.htm" title="GENERIC-FUNCTION CLASS"><code>generic-function</code></a>, typically defined with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defgen.htm" title="DEFGENERIC MGL-PAX:MACRO"><code>defgeneric</code></a>.</p></li>
</ul>

<p><a id="x-28METHOD-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="METHOD%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L360">[locative]</a></span> <span class="reference-object"><a href="#METHOD%20MGL-PAX:LOCATIVE" >method</a></span></span> <span class="locative-args">method-qualifiers method-specializers</span></span></p>

<p>See <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_m.htm" title="FIND-METHOD GENERIC-FUNCTION"><code>cl:find-method</code></a> for the description of the arguments
<code>method-qualifiers</code> and <code>method-specializers</code>. For example, a
<code>(foo (method () (t (eql xxx))))</code> as a <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> entry refers to
this method:</p>

<pre><code>(defmethod foo (x (y (eql 'xxx)))
  ...)
</code></pre>

<p><code>method</code> is not <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>.</p></li>
</ul>

<p><a id="x-28METHOD-COMBINATION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="METHOD-COMBINATION%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L441">[locative]</a></span> <span class="reference-object"><a href="#METHOD-COMBINATION%20MGL-PAX:LOCATIVE" >method-combination</a></span></span></span></p>

<p>Refers to a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_meth_1.htm" title="METHOD-COMBINATION CLASS"><code>method-combination</code></a>, defined with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defi_4.htm" title="DEFINE-METHOD-COMBINATION MGL-PAX:MACRO"><code>define-method-combination</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AACCESSOR-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:ACCESSOR%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L474">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:ACCESSOR%20MGL-PAX:LOCATIVE" >accessor</a></span></span> <span class="locative-args">class-name</span></span></p>

<p>To refer to an accessor named <code>foo-slot</code> of class
<code>foo</code>:</p>

<pre><code>(foo-slot (accessor foo))
</code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3AREADER-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:READER%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L480">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:READER%20MGL-PAX:LOCATIVE" >reader</a></span></span> <span class="locative-args">class-name</span></span></p>

<p>To refer to a reader named <code>foo-slot</code> of class
<code>foo</code>:</p>

<pre><code>(foo-slot (reader foo))
</code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3AWRITER-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:WRITER%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L486">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:WRITER%20MGL-PAX:LOCATIVE" >writer</a></span></span> <span class="locative-args">class-name</span></span></p>

<p>To refer to a writer named <code>foo-slot</code> of class
<code>foo</code>:</p>

<pre><code>(foo-slot (writer foo))
</code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3ASTRUCTURE-ACCESSOR-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:STRUCTURE-ACCESSOR%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L634">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:STRUCTURE-ACCESSOR%20MGL-PAX:LOCATIVE" >structure-accessor</a></span></span></span></p>

<p>This is a synonym of <a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a> with the difference that
the often ugly and certainly uninformative lambda list will not be
printed.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40TYPELIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Functions">&#8592;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#MGL-PAX:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION" title="Condition System Locatives">&#8594;</a> <a href="#MGL-PAX:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Types and Declarations">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/locatives-early.lisp#L24">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION">7.4 Locatives for Types and Declarations</a></h3>

<p><a id="x-28TYPE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="TYPE%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L668">[locative]</a></span> <span class="reference-object"><a href="#TYPE%20MGL-PAX:LOCATIVE" >type</a></span></span></span></p>

<p>This locative can refer to any Lisp type. For types defined with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_deftp.htm" title="DEFTYPE MGL-PAX:MACRO"><code>deftype</code></a>, an attempt is made at printing the arguments of type
specifiers. When <code>type</code> refers to a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS CLASS"><code>cl:class</code></a>, the class is
documented as an opaque type: no mention is made of that it is a
class or its superclasses. Use the <a href="#CLASS%20MGL-PAX:LOCATIVE" title="CLASS MGL-PAX:LOCATIVE"><code>class</code></a> locative if those things
are part of the contract.</p></li>
</ul>

<p><a id="x-28CLASS-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="CLASS%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L706">[locative]</a></span> <span class="reference-object"><a href="#CLASS%20MGL-PAX:LOCATIVE" >class</a></span></span></span></p>

<p>Naturally, <code>class</code> is the locative type for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS CLASS"><code>class</code></a>es.
To refer to a class named <code>foo</code>:</p>

<pre><code>(foo class)
</code></pre>

<p>In the generated documention, only superclasses denoted by <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_s.htm" title="FIND-SYMBOL FUNCTION">external
symbols</a> are included.</p></li>
</ul>

<p><a id="x-28DECLARATION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="DECLARATION%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L794">[locative]</a></span> <span class="reference-object"><a href="#DECLARATION%20MGL-PAX:LOCATIVE" >declaration</a></span></span></span></p>

<p>Refers to a declaration, used in <a href="http://www.lispworks.com/documentation/HyperSpec/Body/s_declar.htm" title="DECLARE MGL-PAX:MACRO"><code>declare</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_declai.htm" title="DECLAIM MGL-PAX:MACRO"><code>declaim</code></a> and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_procla.htm" title="PROCLAIM FUNCTION"><code>proclaim</code></a>.
For example, <code>[DEBUG][declaration]</code> refers to the standard <a href="http://www.lispworks.com/documentation/HyperSpec/Body/d_optimi.htm" title="DEBUG DECLARATION"><code>debug</code></a>
declaration and links to the hyperspec if
<a href="#MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC* VARIABLE"><code>*document-link-to-hyperspec*</code></a> is true.</p>

<p>User code may also define new declarations with CLTL2 functionality,
but there is no way to provide a docstring.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">cl-environments:define-declaration</span></i> my-decl <span class="paren2">(<span class="code">&amp;rest things</span>)</span>
  <span class="paren2">(<span class="code">values <span class="keyword">:declare</span> <span class="paren3">(<span class="code">cons 'foo things</span>)</span></span>)</span></span>)</span></span></code></pre>

<p>Also, <code>M-.</code> (see <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating Sources in Emacs</a>) on declarations currently
only works on SBCL.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40CONDITION-SYSTEM-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Types and Declarations">&#8592;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#MGL-PAX:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Packages and Readtables">&#8594;</a> <a href="#MGL-PAX:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION" title="Condition System Locatives">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/locatives-early.lisp#L29">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION">7.5 Condition System Locatives</a></h3>

<p><a id="x-28CONDITION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="CONDITION%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L715">[locative]</a></span> <span class="reference-object"><a href="#CONDITION%20MGL-PAX:LOCATIVE" >condition</a></span></span></span></p>

<p><code>condition</code> is the locative type for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_cnd.htm" title="CONDITION CONDITION"><code>condition</code></a>s. To
refer to a condition named <code>foo</code>:</p>

<pre><code>(foo condition)
</code></pre>

<p>In the generated documention, only superclasses denoted by <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_s.htm" title="FIND-SYMBOL FUNCTION">external
symbols</a> are included.</p></li>
</ul>

<p><a id="x-28RESTART-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="RESTART%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L856">[locative]</a></span> <span class="reference-object"><a href="#RESTART%20MGL-PAX:LOCATIVE" >restart</a></span></span></span></p>

<p>A locative to refer to the definition of a restart defined by
<a href="#MGL-PAX:DEFINE-RESTART%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-RESTART MGL-PAX:MACRO"><code>define-restart</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADEFINE-RESTART-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFINE-RESTART%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/locatives-early.lisp#L53">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFINE-RESTART%20MGL-PAX:MACRO" >define-restart</a></span></span> <span class="locative-args">symbol lambda-list &amp;body docstring</span></span></p>

<p>A definer macro to hang the documentation of a restart on a
symbol.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-restart</span></i> my-ignore-error <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"Available when MY-ERROR is signalled, MY-IGNORE-ERROR unsafely continues."</span></span>)</span></span></code></pre>

<p>Then <code>(my-ignore-error restart)</code> refers to the above definition.
Note that while there is a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_rst.htm" title="RESTART TYPE"><code>cl:restart</code></a> type, there is no
corresponding source location or docstring like for
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_cnd.htm" title="CONDITION CONDITION"><code>condition</code></a>s.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40PACKAGELIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION" title="Condition System Locatives">&#8592;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for PAX Constructs">&#8594;</a> <a href="#MGL-PAX:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Packages and Readtables">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/locatives-early.lisp#L34">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION">7.6 Locatives for Packages and Readtables</a></h3>

<p><a id="x-28ASDF-2FSYSTEM-3ASYSTEM-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L863">[locative]</a></span> <span class="reference-object"><a href="#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" >asdf/system:system</a></span></span></span></p>

<p>Refers to an asdf system. The generated documentation will include
meta information extracted from the system definition. This also
serves as an example of a symbol that's not accessible in the
current package and consequently is not exported.</p>

<p><code>asdf:system</code> is not <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>.</p></li>
</ul>

<p><a id="x-28PACKAGE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="PACKAGE%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L958">[locative]</a></span> <span class="reference-object"><a href="#PACKAGE%20MGL-PAX:LOCATIVE" >package</a></span></span></span></p>

<p>Refers to a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE TYPE"><code>package</code></a>, defined by <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpkg.htm" title="DEFPACKAGE MGL-PAX:MACRO"><code>defpackage</code></a>. <code>package</code> is not
<a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>.</p></li>
</ul>

<p><a id="x-28READTABLE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="READTABLE%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L992">[locative]</a></span> <span class="reference-object"><a href="#READTABLE%20MGL-PAX:LOCATIVE" >readtable</a></span></span></span></p>

<p>Refers to a named <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_rdtabl.htm" title="READTABLE TYPE"><code>readtable</code></a> defined with
<code>named-readtables:defreadtable</code>, which associates a global name and a
docstring with the readtable object. Unfortunately, source location
information is not available.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40PAX-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Packages and Readtables">&#8592;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#MGL-PAX:@EXTERNAL-LOCATIVES%20MGL-PAX:SECTION" title="External Locatives">&#8594;</a> <a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for PAX Constructs">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/locatives-early.lisp#L40">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION">7.7 Locatives for PAX Constructs</a></h3>

<p><a id="x-28MGL-PAX-3ASECTION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:SECTION%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L1023">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" >section</a></span></span></span></p>

<p>Refers to a <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a> defined by <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>.</p>

<p><code>section</code> is not <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AGLOSSARY-TERM-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:GLOSSARY-TERM%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L1102">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:GLOSSARY-TERM%20MGL-PAX:LOCATIVE" >glossary-term</a></span></span></span></p>

<p>Refers to a <a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a> defined by
<a href="#MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-GLOSSARY-TERM MGL-PAX:MACRO"><code>define-glossary-term</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADEFINE-GLOSSARY-TERM-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L309">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO" >define-glossary-term</a></span></span> <span class="locative-args">name (&amp;key title (discard-documentation-p *discard-documentation-p*)) docstring</span></span></p>

<p>Define a global variable with <code>name</code> and set it to a
<a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a> object. A glossary term is just a symbol to
hang a docstring on. It is a bit like a <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>) in that, when linked
to, its <code>title</code> will be the link text instead of the name of the
symbol. Also as with sections, both <code>title</code> and <code>docstring</code> are markdown
strings or <code>nil</code>.</p>

<p>Unlike sections though, glossary terms are not rendered with
headings, but in the more lightweight bullet + locative + name/title
style. See the glossary entry <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@NAME MGL-PAX:GLOSSARY-TERM">name</a> for an example.</p>

<p>When <code>discard-documentation-p</code> (defaults to <a href="#MGL-PAX:*DISCARD-DOCUMENTATION-P*%20VARIABLE" title="MGL-PAX:*DISCARD-DOCUMENTATION-P* VARIABLE"><code>*discard-documentation-p*</code></a>)
is true, <code>docstring</code> will not be recorded to save memory.</p>

<p><code>glossary-term</code> is not <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATIVE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L1130">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE" >locative</a></span></span> <span class="locative-args">lambda-list</span></span></p>

<p>This is the locative for locatives. When <code>M-.</code> is pressed on
<code>some-name</code> in <code>(some-name locative)</code>, this is what makes it
possible to land at the corresponding <a href="#MGL-PAX:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-locative-type</code></a> form.
Similarly, <code>(locative locative)</code> leads to this very definition.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADISLOCATED-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L1173">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE" >dislocated</a></span></span></span></p>

<p>Refers to a symbol in a non-specific context. Useful for preventing
<a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a>. For example, if
there is a function called <code>foo</code> then</p>

<pre><code>`FOO`
</code></pre>

<p>will be linked (if <a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-CODE* VARIABLE"><code>*document-link-code*</code></a>) to its definition. However,</p>

<pre><code>[`FOO`][dislocated]
</code></pre>

<p>will not be. With a dislocated locative, <a href="#MGL-PAX:LOCATE%20FUNCTION" title="MGL-PAX:LOCATE FUNCTION"><code>locate</code></a> always fails with a
<a href="#MGL-PAX:LOCATE-ERROR%20CONDITION" title="MGL-PAX:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition. Also see <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">Preventing Autolinking</a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AARGUMENT-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:ARGUMENT%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L1195">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:ARGUMENT%20MGL-PAX:LOCATIVE" >argument</a></span></span></span></p>

<p>An alias for <a href="#MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE" title="MGL-PAX:DISLOCATED MGL-PAX:LOCATIVE"><code>dislocated</code></a>, so that one can refer to an argument of
a macro without accidentally linking to a class that has the same
name as that argument. In the following example,
<code>format</code> may link to <code>cl:format</code> (if we generated
documentation for it):</p>

<pre><code><span class="code">"See FORMAT in DOCUMENT."</span></code></pre>

<p>Since <code>argument</code> is a locative, we can prevent that linking by writing:</p>

<pre><code><span class="code">"See the FORMAT argument of DOCUMENT."</span></code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3AINCLUDE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:INCLUDE%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L1226">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:INCLUDE%20MGL-PAX:LOCATIVE" >include</a></span></span> <span class="locative-args">source &amp;key line-prefix header footer header-nl footer-nl</span></span></p>

<p>This pseudolocative refers to a region of a file. <code>source</code> can be a
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_string.htm" title="STRING TYPE"><code>string</code></a> or a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pn.htm" title="PATHNAME TYPE"><code>pathname</code></a> in which case the whole file is
being pointed to, or it can explicitly supply <code>start</code>, <code>end</code> locatives.
<code>include</code> is typically used to include non-lisp files in the
documentation (say markdown or elisp as in the next example) or
regions of lisp source files. This can reduce clutter and
duplication.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> example-section <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code">pax.el <span class="paren3">(<span class="code">include #.<span class="paren4">(<span class="code">asdf:system-relative-pathname <span class="keyword">:mgl-pax</span> <span class="string">"src/pax.el"</span></span>)</span>
                   <span class="keyword">:header-nl</span> <span class="string">"```elisp"</span> <span class="keyword">:footer-nl</span> <span class="string">"```"</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">foo-example <span class="paren3">(<span class="code">include <span class="paren4">(<span class="code"><span class="keyword">:start</span> <span class="paren5">(<span class="code">foo <i><span class="symbol">function</span></i></span>)</span>
                         <span class="keyword">:end</span> <span class="paren5">(<span class="code">end-of-foo-example variable</span>)</span></span>)</span>
                        <span class="keyword">:header-nl</span> <span class="string">"```"</span>
                        <span class="keyword">:footer-nl</span> <span class="string">"```"</span></span>)</span></span>)</span>

<span class="paren2">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren3">(<span class="code">x</span>)</span>
  <span class="paren3">(<span class="code">1+ x</span>)</span></span>)</span>

<span class="comment">;;; Since file regions are copied verbatim, comments survive.
</span><span class="paren2">(<span class="code"><i><span class="symbol">defmacro</span></i> bar <span class="paren3">(<span class="code"></span>)</span></span>)</span>

<span class="comment">;;; This comment is the last thing in FOO-EXAMPLE's
</span><span class="comment">;;; documentation since we use the dummy END-OF-FOO-EXAMPLE
</span><span class="comment">;;; variable to mark the end location.
</span><span class="paren2">(<span class="code"><i><span class="symbol">defvar</span></i> end-of-foo-example</span>)</span>

<span class="comment">;;; More irrelevant code follows.</span></span></span></span></code></pre>

<p>In the above example, pressing <code>M-.</code> on <code>pax.el</code> will open the
<code>src/pax.el</code> file and put the cursor on its first character. <code>M-.</code>
on <code>foo-example</code> will go to the source location of the <code>(asdf:system
locative)</code> locative.</p>

<p>When documentation is generated, the entire <code>src/pax.el</code> file is
included in the markdown surrounded by the strings given as
<code>header-nl</code> and <code>footer-nl</code> (if any). The trailing newline character is
assumed implicitly. If that's undesirable, then use <code>header</code> and
<code>footer</code> instead. The documentation of <code>foo-example</code> will be the
region of the file from the source location of the <code>start</code>
locative (inclusive) to the source location of the <code>end</code>
locative (exclusive). <code>start</code> and <code>end</code> default to the beginning and end
of the file, respectively.</p>

<p>Note that the file of the source location of <code>:start</code> and <code>:end</code> must be
the same. If <code>source</code> is a pathname designator, then it must be
absolute so that the locative is context independent.</p>

<p>Finally, if specified, <code>line-prefix</code> is a string that's prepended to
each line included in the documentation. For example, a string of
four spaces makes markdown think it's a code block.</p>

<p><code>include</code> is not <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADOCSTRING-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:DOCSTRING%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L1219">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCSTRING%20MGL-PAX:LOCATIVE" >docstring</a></span></span></span></p>

<p><code>docstring</code> is a pseudolocative for including the parse tree of the
markdown <a href="#MGL-PAX:DOCSTRING%20GENERIC-FUNCTION" title="MGL-PAX:DOCSTRING GENERIC-FUNCTION"><code>docstring</code></a> of a definition in the parse
tree of a docstring when generating documentation. It has no source
location information and only works as an explicit link. This
construct is intended to allow docstrings live closer to their
implementation, which typically involves a non-exported definition.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> div2 <span class="paren2">(<span class="code">x</span>)</span>
  <span class="string">"X must be an [even type][docstring]."</span>
  <span class="paren2">(<span class="code">/ x 2</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">deftype</span></i> even <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"an even integer"</span>
  '<span class="paren2">(<span class="code">satisfies oddp</span>)</span></span>)</span></span></code></pre>

<p>In the output of <code>(document #'div2)</code>, we have that <code>X must be an an
even integer</code>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40EXTERNAL-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EXTERNAL-LOCATIVES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for PAX Constructs">&#8592;</a> <a href="#MGL-PAX:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">&#8594;</a> <a href="#MGL-PAX:@EXTERNAL-LOCATIVES%20MGL-PAX:SECTION" title="External Locatives">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/locatives-early.lisp#L50">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@EXTERNAL-LOCATIVES%20MGL-PAX:SECTION">7.8 External Locatives</a></h3>

<p><a id="x-28MGL-PAX-3ACLHS-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:CLHS%20MGL-PAX:LOCATIVE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/locatives.lisp#L1406">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:CLHS%20MGL-PAX:LOCATIVE" >clhs</a></span></span></span></p>

<p>Refers to sections in the Common Lisp hyperspec. These have no
source location so <code>M-.</code> will not work. What works is linking. The
following markdown examples all produce a link to <code>clhs</code> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/03_d.htm" title="&quot;3.4&quot; MGL-PAX:CLHS"><code>3.4</code></a>, the
section 'Lambda Lists', which is in file <code>03_d.htm</code>.</p>

<pre><code><span class="code">CLHS `3.4`
`3.4` CLHS
[3.4][]
[`3.4`][]
[3.4][CLHS]
[Lambda Lists][clhs]
[03_d][clhs]</span></code></pre>

<p>The rules of matching sections are the following. If the object of
the reference is <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_stgeq_.htm" title="STRING= FUNCTION"><code>string=</code></a> to the section number string (without the
trailing dot) or to the name of its file without the <code>.htm</code>
extension, then the reference refers to that section. Else, if the
object is a case-insensitive substring of the title of some section,
then the reference refers to the first such section in breadth-first
order.</p>

<p>To link to issue and issue summary pages, all of the above markdown
examples work, just make the object of the reference the name of the
issue prefixed by <code>issue:</code> or <code>summary:</code> as appropriate. For
example, to refer to the <code>aref-1d</code> issue use <code>[ISSUE:AREF-1D][clhs]</code>
and get <a href="http://www.lispworks.com/documentation/HyperSpec/Issues/iss009_w.htm" title="&quot;ISSUE:AREF-1D&quot; MGL-PAX:CLHS">ISSUE:AREF-1D</a>. Similary, <code>[SUMMARY:AREF-1D][clhs]</code>
turns into <a href="http://www.lispworks.com/documentation/HyperSpec/Issues/iss009.htm" title="&quot;SUMMARY:AREF-1D&quot; MGL-PAX:CLHS">SUMMARY:AREF-1D</a>. Alternatively, matching the name
of the file also works (<code>[iss009][clhs]</code> renders as <a href="http://www.lispworks.com/documentation/HyperSpec/Issues/iss009.htm" title="&quot;SUMMARY:AREF-1D&quot; MGL-PAX:CLHS">iss009</a>)</p>

<p>The generated links are relative to <a href="#MGL-PAX:*DOCUMENT-HYPERSPEC-ROOT*%20VARIABLE" title="MGL-PAX:*DOCUMENT-HYPERSPEC-ROOT* VARIABLE"><code>*document-hyperspec-root*</code></a>.</p>

<p>To detach the discussion from markdown syntax, let's see these cases
through the programmatic interface.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">locate <span class="string">"3.4"</span> 'clhs</span>)</span>
==&gt; #&lt;REFERENCE "3.4" CLHS&gt;
<span class="paren1">(<span class="code">locate <span class="string">"03_d"</span> 'clhs</span>)</span>
==&gt; #&lt;REFERENCE "03_d" CLHS&gt;
<span class="paren1">(<span class="code">locate <span class="string">"lambda"</span> 'clhs</span>)</span>
==&gt; #&lt;REFERENCE "3.4" CLHS&gt;
<span class="paren1">(<span class="code">locate <span class="string">"ISSUE:AREF-1D"</span> 'clhs</span>)</span>
==&gt; #&lt;REFERENCE "ISSUE:AREF-1D" CLHS&gt;
<span class="paren1">(<span class="code">locate <span class="string">"SUMMARY:AREF-1D"</span> 'clhs</span>)</span>
==&gt; #&lt;REFERENCE "SUMMARY:AREF-1D" CLHS&gt;</span></code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40NAVIGATING-IN-EMACS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EXTERNAL-LOCATIVES%20MGL-PAX:SECTION" title="External Locatives">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/navigate&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/navigate.lisp#L11">&#955;</a></span></span></p>

<h2><a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION">8 Navigating Sources in Emacs</a></h2>

<p>Integration into <a href="http://common-lisp.net/project/slime/doc/html/Finding-definitions.html#Finding-definitions" >SLIME's <code>M-.</code></a>
(<code>slime-edit-definition</code>) allows one to visit the source location of
the definition that's identified by <code>slime-symbol-at-point</code> parsed
as a <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@WORD MGL-PAX:GLOSSARY-TERM">word</a> and the locative before or after the symbol in a buffer.
With this extension, if a locative is the previous or the next
expression around the symbol of interest, then <code>M-.</code> will go
straight to the definition which corresponds to the locative. If
that fails, <code>M-.</code> will try to find the definitions in the normal
way, which may involve popping up an xref buffer and letting the
user interactively select one of possible definitions.</p>

<p>In the following examples, when the cursor is on one of the
characters of <code>foo</code> or just after <code>foo</code>, pressing <code>M-.</code> will visit
the definition of function <code>foo</code>:</p>

<pre><code>function foo
foo function
(function foo)
(foo function)
</code></pre>

<p>In particular, references in a <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> form are in (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL TYPE"><code>symbol</code></a>
<a href="#MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE" title="MGL-PAX:LOCATIVE MGL-PAX:LOCATIVE"><code>locative</code></a>) format so <code>M-.</code> will work just fine there.</p>

<p>Just like vanilla <code>M-.</code>, this works in comments and docstrings. In
the next example, pressing <code>M-.</code> on <code>foo</code> will visit <code>foo</code>'s
default method:</p>

<pre><code><span class="code"><span class="comment">;;;; See FOO `(method () (t t t))` for how this all works.
</span><span class="comment">;;;; But if the locative has semicolons inside: FOO `(method
</span><span class="comment">;;;; () (t t t))`, then it won't, so be wary of line breaks
</span><span class="comment">;;;; in comments.</span></span></code></pre>

<p>With a prefix argument (<code>C-u M-.</code>), one can enter a symbol plus a
locative separated by whitespace to preselect one of the
possibilities.</p>

<p>The <code>M-.</code> extensions can be enabled by loading <code>src/pax.el</code>.</p>

<p><a id="x-28-22mgl-pax-2Fnavigate-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">&#8592;</a> <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">&#8593;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8594;</a> <a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/navigate&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/mgl-pax.asd#L1">&#955;</a></span></span></p>

<h3><a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM">8.1 <code>mgl-pax/navigate</code> ASDF System</a></h3>

<ul>
<li>Description: Slime <code>m-.</code> support for <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax</code></a>.</li>
<li>Long Description: Autoloaded by Slime's <code>m-.</code> when <code>src/pax.el</code> is
  loaded. See <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating Sources in Emacs</a>.</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40GENERATING-DOCUMENTATION-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/navigate&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/document&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L5">&#955;</a></span></span></p>

<h2><a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION">9 Generating Documentation</a></h2>

<p><a id="x-28MGL-PAX-3ADOCUMENT-20FUNCTION-29"></a>
<a id="MGL-PAX:DOCUMENT%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L330">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENT%20FUNCTION" >document</a></span></span> <span class="locative-args">object &amp;key (stream t) pages (format :plain)</span></span></p>

<p>Write <code>object</code> in <code>format</code> to <code>stream</code> diverting some output to <code>pages</code>.
<code>format</code> can be anything <a href="https://github.com/3b/3bmd" >3BMD</a> supports, which is currently
<code>:markdown</code>, <code>:html</code> and <code>:plain</code>. <code>stream</code> may be a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_stream.htm" title="STREAM TYPE"><code>stream</code></a> object,
<code>t</code> or <code>nil</code> as with <code>cl:format</code>.</p>

<p>Most often, this function is called on <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>) objects as in
<code>(document @pax-manual)</code>, but it supports all kinds of objects for
which <a href="#MGL-PAX:DOCUMENT-OBJECT%20GENERIC-FUNCTION" title="MGL-PAX:DOCUMENT-OBJECT GENERIC-FUNCTION"><code>document-object</code></a> is defined. To look up the documentation of
the <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> function itself:</p>

<pre><code>(document #'document)
</code></pre>

<p>The same with fancy markup:</p>

<pre><code>(document #'document :format :markdown)
</code></pre>

<p>To generate the documentation for separate libraries with automatic
cross-links:</p>

<pre><code>(document (list @cube-manual @mat-manual) :format :markdown)
</code></pre>

<p>See <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">Utilities for Generating Documentation</a> for more.</p>

<p>Note that not only first-class objects can have documentation:</p>

<pre><code>(document (locate 'foo 'type))
</code></pre>

<p>See <a href="#MGL-PAX:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">Locatives and References</a> for more.</p>

<p>There are quite a few special variables that affect how output is
generated, see <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a>, <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>,
<a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">Linking to Sections</a>, and
<a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">Miscellaneous Variables</a>.</p>

<p>If <code>pages</code> is <code>nil</code> and <code>stream</code> is <code>nil</code>, then <code>document</code> returns the output
as a string. If <code>pages</code> is <code>nil</code> but <code>stream</code> is not, then <code>document</code>
returns <code>nil</code>. The rest of this description deals with how to generate
multiple pages.</p>

<h5>Pages</h5>

<p>The <code>pages</code> argument is to create multi-page documents by routing some
of the generated output to files, strings or streams. <code>pages</code> is a
list of page specification elements. A page spec is a plist with
keys <code>:objects</code>, <code>:output</code>, <code>:uri-fragment</code>, <code>:source-uri-fn</code>, <code>:header-fn</code>
and <code>:footer-fn</code>. <code>objects</code> is a list of objects (references are allowed
but not required) whose documentation is to be sent to <code>:output</code>.</p>

<p>When documentation for an object is generated, the first matching
page spec is used, where the object matches the page spec if it is
<a href="#MGL-PAX:COLLECT-REACHABLE-OBJECTS%20GENERIC-FUNCTION" title="MGL-PAX:COLLECT-REACHABLE-OBJECTS GENERIC-FUNCTION">reachable</a> from one of
its <code>:objects</code>.</p>

<p><code>:output</code> can be a number things:</p>

<ul>
<li><p>If it's a list whose first element is a string or a pathname, then
  output will be sent to the file denoted by that and the rest of
  the elements of the list are passed on to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_open.htm" title="OPEN FUNCTION"><code>cl:open</code></a>. One extra
  keyword argument is <code>:ensure-directories-exist</code>. If it's true,
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_ensu_1.htm" title="ENSURE-DIRECTORIES-EXIST FUNCTION"><code>ensure-directories-exist</code></a> will be called on the pathname before
  it's opened.</p></li>
<li><p>If it's <code>nil</code>, then output will be collected in a string.</p></li>
<li><p>If it's <code>t</code>, then output will be sent to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_debug_.htm" title="*STANDARD-OUTPUT* VARIABLE"><code>*standard-output*</code></a>.</p></li>
<li><p>If it's a stream, then output will be sent to that stream.</p></li>
</ul>

<p>If some pages are specified, <code>document</code> returns a list of designators
for generated output. If a page whose <code>:output</code> refers to a file that
was created (which doesn't happen if nothing would be written to
it), then the corresponding pathname is included in the list. For
strings the string itself, while for streams the stream object is
included in the list. This way it's possible to write some pages to
files and some to strings and have the return value indicate what
was created. The output designators in the returned list are ordered
by creation time.</p>

<p>Note that even if <code>pages</code> is specified, <code>stream</code> acts as a catch all,
taking the generated documentation for references not claimed by any
pages. Also, the filename, string or stream corresponding to <code>stream</code>
is always the first element in the list of generated things, that is
the return value.</p>

<p><code>:header-fn</code>, if not <code>nil</code>, is a function of a single stream argument,
which is called just before the first write to the page. Since
<code>:format</code> <code>:html</code> only generates HTML fragments, this makes it possible
to print arbitrary headers, typically setting the title, css
stylesheet, or charset.</p>

<p><code>:footer-fn</code> is similar to <code>:header-fn</code>, but it's called after the last
write to the page. For HTML, it typically just closes the body.</p>

<p><code>:uri-fragment</code> is a string such as <code>&quot;doc/manual.html&quot;</code> that specifies
where the page will be deployed on a webserver. It defines how links
between pages will look. If it's not specified and <code>:output</code> refers to
a file, then it defaults to the name of the file. If <code>:uri-fragment</code>
is <code>nil</code>, then no links will be made to or from that page.</p>

<p>Finally, <code>:source-uri-fn</code> is a function of a single, <code>reference</code>
argument. If it returns a value other than <code>nil</code>, then it must be a
string representing an URI. If <code>format</code> is <code>:html</code> and
<a href="#MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES*%20VARIABLE" title="MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES* VARIABLE"><code>*document-mark-up-signatures*</code></a> is true, then the locative as
displayed in the signature will be a link to this uri. See
<a href="#MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION" title="MGL-PAX:MAKE-GIT-SOURCE-URI-FN FUNCTION"><code>make-git-source-uri-fn</code></a>.</p>

<p><code>pages</code> may look something like this:</p>

<pre><code><span class="code">`<span class="paren1">(<span class="code"><span class="paren2">(<span class="code"><span class="comment">;; The section about SECTIONs and everything below it ...
</span>   <span class="keyword">:objects</span> <span class="paren3">(<span class="code">, @sections</span>)</span>
   <span class="comment">;; ... is so boring that it's not worth the disk space, so
</span>   <span class="comment">;; send it to a string.
</span>   <span class="keyword">:output</span> <span class="paren3">(<span class="code">nil</span>)</span>
   <span class="comment">;; Explicitly tell other pages not to link to these guys.
</span>   <span class="keyword">:uri-fragment</span> nil</span>)</span>
  <span class="comment">;; Send the @EXTENSION-API section and everything reachable
</span>  <span class="comment">;; from it ...
</span>  <span class="paren2">(<span class="code"><span class="keyword">:objects</span> <span class="paren3">(<span class="code">, @extension-api</span>)</span>
   <span class="comment">;; ... to build/tmp/pax-extension-api.html.
</span>   <span class="keyword">:output</span> <span class="paren3">(<span class="code"><span class="string">"build/tmp/pax-extension-api.html"</span></span>)</span>
   <span class="comment">;; However, on the web server html files will be at this
</span>   <span class="comment">;; location relative to some common root, so override the
</span>   <span class="comment">;; default:
</span>   <span class="keyword">:uri-fragment</span> <span class="string">"doc/dev/pax-extension-api.html"</span>
   <span class="comment">;; Set html page title, stylesheet, charset.
</span>   <span class="keyword">:header-fn</span> 'write-html-header
   <span class="comment">;; Just close the body.
</span>   <span class="keyword">:footer-fn</span> 'write-html-footer</span>)</span>
  <span class="comment">;; Catch the reference that were not reachable from the above. It
</span>  <span class="comment">;; is important for this page spec to be last.
</span>  <span class="paren2">(<span class="code"><span class="keyword">:objects</span> <span class="paren3">(<span class="code">, @pax-manual</span>)</span>
   <span class="keyword">:output</span> <span class="paren3">(<span class="code"><span class="string">"build/tmp/manual.html"</span></span>)</span>
   <span class="comment">;; Links from the extension api page to the manual page will
</span>   <span class="comment">;; be to ../user/pax-manual#&lt;anchor&gt;, while links going to
</span>   <span class="comment">;; the opposite direction will be to
</span>   <span class="comment">;; ../dev/pax-extension-api.html#&lt;anchor&gt;.
</span>   <span class="keyword">:uri-fragment</span> <span class="string">"doc/user/pax-manual.html"</span>
   <span class="keyword">:header-fn</span> 'write-html-header
   <span class="keyword">:footer-fn</span> 'write-html-footer</span>)</span></span>)</span></span></code></pre></li>
</ul>

<p><a id="x-28-22mgl-pax-2Fdocument-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8594;</a> <a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/document&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/mgl-pax.asd#L1">&#955;</a></span></span></p>

<h3><a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM">9.1 <code>mgl-pax/document</code> ASDF System</a></h3>

<ul>
<li>Description: Documentation generation support for <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax</code></a>.</li>
<li>Long Description: Autoloaded by <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>mgl-pax:document</code></a>. See
  <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a>.</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40MARKDOWN-SUPPORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/document&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@MARKDOWN-INDENTATION%20MGL-PAX:SECTION" title="Indentation">&#8594;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L623">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION">9.2 Markdown Support</a></h3>

<p>The <a href="https://daringfireball.net/projects/markdown/" >Markdown</a> in docstrings is processed with the
<a href="https://github.com/3b/3bmd" >3BMD</a> library.</p>

<p><a id="x-28MGL-PAX-3A-40MARKDOWN-INDENTATION-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MARKDOWN-INDENTATION%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8592;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8593;</a> <a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION" title="Syntax Highlighting">&#8594;</a> <a href="#MGL-PAX:@MARKDOWN-INDENTATION%20MGL-PAX:SECTION" title="Indentation">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L630">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@MARKDOWN-INDENTATION%20MGL-PAX:SECTION">9.2.1 Indentation</a></h4>

<p>Docstrings can be indented in any of the usual styles. PAX
normalizes indentation by converting:</p>

<pre><code>(defun foo ()
  &quot;This is
  indented
  differently&quot;)
</code></pre>

<p>to</p>

<pre><code>(defun foo ()
  &quot;This is
indented
differently&quot;)
</code></pre>

<p>See <a href="#MGL-PAX:DOCUMENT-OBJECT%20%28METHOD%20NIL%20%28STRING%20T%29%29" title="MGL-PAX:DOCUMENT-OBJECT (METHOD NIL (STRING T))"><code>document-object</code></a> for the details.</p>

<p><a id="x-28MGL-PAX-3ADOCUMENT-OBJECT-20-28METHOD-20NIL-20-28STRING-20T-29-29-29"></a>
<a id="MGL-PAX:DOCUMENT-OBJECT%20%28METHOD%20NIL%20%28STRING%20T%29%29"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L649">[method]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENT-OBJECT%20%28METHOD%20NIL%20%28STRING%20T%29%29" >document-object</a></span></span> <span class="locative-args">(string string) stream</span></span></p>

<p>Print <code>string</code> to <code>stream</code> as a docstring. That is, <a href="#MGL-PAX:@MARKDOWN-INDENTATION%20MGL-PAX:SECTION" title="Indentation">clean up
indentation</a>, perform <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a>, and
linking (see <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>, <a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">Linking to the Hyperspec</a>).</p>

<p>Docstrings in sources are indented in various ways, which can easily
mess up markdown. To handle the most common cases leave the first
line alone, but from the rest of the lines strip the longest run of
leading spaces that is common to all non-blank lines.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40MARKDOWN-SYNTAX-HIGHLIGHTING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MARKDOWN-INDENTATION%20MGL-PAX:SECTION" title="Indentation">&#8592;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8593;</a> <a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION" title="MathJax">&#8594;</a> <a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION" title="Syntax Highlighting">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L683">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION">9.2.2 Syntax Highlighting</a></h4>

<p>For syntax highlighting, github's <a href="https://help.github.com/articles/github-flavored-markdown#fenced-code-blocks" >fenced code
blocks</a> markdown extension to mark up code
blocks with triple backticks is enabled so all you need to do is
write:</p>

<pre><code>```elisp
(defun foo ())
```
</code></pre>

<p>to get syntactically marked up HTML output. Copy <code>src/style.css</code>
from PAX and you are set. The language tag, <code>elisp</code> in this
example, is optional and defaults to <code>common-lisp</code>.</p>

<p>See the documentation of <a href="https://github.com/3b/3bmd" >3BMD</a> and <a href="https://github.com/redline6561/colorize/" >colorize</a> for
the details.</p>

<p><a id="x-28MGL-PAX-3A-40MATHJAX-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MATHJAX%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION" title="Syntax Highlighting">&#8592;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8593;</a> <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">&#8594;</a> <a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION" title="MathJax">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L704">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION">9.2.3 MathJax</a></h4>

<p>Displaying pretty mathematics in TeX format is supported via
MathJax. It can be done inline with <code>$</code> like this:</p>

<pre><code>$\int_0^\infty e^{-x^2} dx=\frac{\sqrt{\pi}}{2}$
</code></pre>

<p>which is diplayed as $\int_0^\infty e^{-x^2}
dx=\frac{\sqrt{\pi}}{2}$, or it can be delimited by <code>$$</code> like this:</p>

<pre><code>$$\int_0^\infty e^{-x^2} dx=\frac{\sqrt{\pi}}{2}$$
</code></pre>

<p>to get: $$\int_0^\infty e^{-x^2} dx=\frac{\sqrt{\pi}}{2}$$</p>

<p>MathJax will leave code blocks (including those inline with
backticks) alone. Outside code blocks, escape <code>$</code> by prefixing it
with a backslash to scare MathJax off.</p>

<p>Escaping all those backslashes in TeX fragments embedded in Lisp
strings can be a pain. <a href="https://github.com/smithzvk/pythonic-string-reader" >Pythonic String
Reader</a> can help with that.</p>

<p><a id="x-28MGL-PAX-3A-40CODIFICATION-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION" title="MathJax">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8594;</a> <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L790">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION">9.3 Codification</a></h3>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-UPPERCASE-IS-CODE-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L796">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" >*document-uppercase-is-code*</a></span></span> <span class="locative-args">t</span></span></p>

<p>When true, <a href="#MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@CODIFIABLE MGL-PAX:GLOSSARY-TERM">codifiable</a> and <a href="#MGL-PAX:@INTERESTING%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@INTERESTING MGL-PAX:GLOSSARY-TERM">interesting</a> <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@WORD MGL-PAX:GLOSSARY-TERM">word</a>s are assumed to be
code as if they were marked up with backticks. For example, this
docstring</p>

<pre><code>&quot;T PRINT CLASSes SECTION *PACKAGE* MGL-PAX ASDF
CaMeL Capital&quot;
</code></pre>

<p>is equivalent to this:</p>

<pre><code>&quot;`T` `PRINT` `CLASS`es `SECTION` `*PACKAGE*` `MGL-PAX` `ASDF`
CaMel Capital&quot;
</code></pre>

<p>and renders as</p>

<p><code>t</code> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_pr.htm" title="PRINT FUNCTION"><code>print</code></a> <code>class</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS CLASS"><code>0</code></a> <a href="#CLASS%20MGL-PAX:LOCATIVE" title="CLASS MGL-PAX:LOCATIVE"><code>1</code></a>)es <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>) <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax</code></a> <code>asdf</code> CaMel Capital</p>

<p>where the links are added due to <a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-CODE* VARIABLE"><code>*document-link-code*</code></a>.</p>

<p>To suppress this behavior, add a backslash to the beginning of the a
<a href="#MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@CODIFIABLE MGL-PAX:GLOSSARY-TERM">codifiable</a> word or right after the leading <code>*</code> if it would
otherwise be parsed as markdown emphasis:</p>

<pre><code>&quot;\\SECTION *\\PACKAGE*&quot;
</code></pre>

<p>The number of backslashes is doubled above because that's how the
example looks in a docstring. Note that the backslash is discarded
even if <code>*document-uppercase-is-code*</code> is false.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40CODIFIABLE-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L825">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM" >codifiable</a></span></span></span></p>

<p>A <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@WORD MGL-PAX:GLOSSARY-TERM">word</a> is <em>codifiable</em> iff</p>

<ul>
<li><p>it has at least one uppercase character (e.g. it's not <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_eq_sle.htm" title="&lt; FUNCTION"><code>&lt;</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_eq_sle.htm" title="&lt;= FUNCTION"><code>&lt;=</code></a>
  or <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_sl_sls.htm" title="/// VARIABLE"><code>///</code></a>), and</p></li>
<li><p>it has no lowercase characters (e.g. it's <code>t</code>, or
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pr_lev.htm" title="*PRINT-LENGTH* VARIABLE"><code>*print-length*</code></a>) or all lowercase characters immediately follow
  at least two consecutive uppercase characters (e.g. in <code>CLASSes</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS CLASS"><code>0</code></a> <a href="#CLASS%20MGL-PAX:LOCATIVE" title="CLASS MGL-PAX:LOCATIVE"><code>1</code></a>)
  but in not <code>Capital</code>).</p></li>
</ul></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40INTERESTING-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@INTERESTING%20MGL-PAX:GLOSSARY-TERM"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L857">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@INTERESTING%20MGL-PAX:GLOSSARY-TERM" >interesting</a></span></span></span></p>

<p>A <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@WORD MGL-PAX:GLOSSARY-TERM">word</a> is <em>interesting</em> iff it <em>names</em></p>

<ul>
<li><p>a known reference, or</p></li>
<li><p>a symbol external to its package, or</p></li>
<li><p>it is at least 3 characters long and names an interned symbol.</p></li>
</ul>

<p>Where we say that a word <strong>names</strong> a known reference if the word
matches the name of a thing being documented, or it is in the
hyperspec and <a href="#MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC* VARIABLE"><code>*document-link-to-hyperspec*</code></a> is true. More
precisely, a word names a known reference, if it matches</p>

<ul>
<li><p><a href="#MGL-PAX:REFERENCE-OBJECT%20%28MGL-PAX:READER%20MGL-PAX:REFERENCE%29" title="MGL-PAX:REFERENCE-OBJECT (MGL-PAX:READER MGL-PAX:REFERENCE)">the object of a reference</a> being
  documented (see <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> and <a href="#MGL-PAX:COLLECT-REACHABLE-OBJECTS%20GENERIC-FUNCTION" title="MGL-PAX:COLLECT-REACHABLE-OBJECTS GENERIC-FUNCTION"><code>collect-reachable-objects</code></a>), or</p></li>
<li><p>a name in the hyperspec if <code>*document-link-to-hyperspec*</code>.</p></li>
</ul>

<p>Symbols are read in the current <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pkg.htm" title="*PACKAGE* VARIABLE"><code>*package*</code></a>, which is subject to
<a href="#MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES*%20VARIABLE" title="MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES* VARIABLE"><code>*document-normalize-packages*</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-DOWNCASE-UPPERCASE-CODE-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1024">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE" >*document-downcase-uppercase-code*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>If true, then all Markdown inline code (that is, <code>stuff between
backticks</code>, including those found if <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a>)
which has no lowercase characters is downcased in the output.
Characters of literal strings in the code may be of any case. If
this variable is <code>:only-in-markup</code> and the output format does not
support markup (e.g. it's <code>:plain</code>), then no downcasing is performed.
For example,</p>

<pre><code>`(PRINT &quot;Hello&quot;)`
</code></pre>

<p>is downcased to</p>

<pre><code>`(print &quot;Hello&quot;)`
</code></pre>

<p>because it only contains uppercase characters outside the string.
However,</p>

<pre><code>`MiXed &quot;RESULTS&quot;`
</code></pre>

<p>is not altered because it has lowercase characters.</p>

<p>If the first two characters are backslashes, then no downcasing is
performed, in addition to <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">Preventing Autolinking</a>. Use this to mark
inline code that's not Lisp.</p>

<pre><code>Press `\\M-.` in Emacs.
</code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40LINKING-TO-CODE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">&#8594;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1122">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION">9.4 Linking to Code</a></h3>

<p>In this section, we describe all ways of linking to code
available when <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a> is true.</p>

<p><em>Note that invoking <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs"><code>M-.</code></a> on the
<a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a> of any of the following links will disambiguate based the
textual context, determining the locative. In a nutshell, if <code>M-.</code>
works without popping up a list of choices, then the documentation
will contain a single link.</em></p>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-LINK-CODE-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1212">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" >*document-link-code*</a></span></span> <span class="locative-args">t</span></span></p>

<p>Enable the various forms of links in docstrings described in
<a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>. See the following sections for a description of
how to use linking.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40SPECIFIED-LOCATIVE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@UNAMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Unambiguous Unspecified Locative">&#8594;</a> <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1142">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION">9.4.1 Specified Locative</a></h4>

<p>The following examples all render as <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>.</p>

<ul>
<li><p><code>[DOCUMENT][function]</code> (<em>object + locative, explicit link</em>)</p></li>
<li><p><code>DOCUMENT function</code> (<em>object + locative, autolink</em>)</p></li>
<li><p><code>function DOCUMENT</code> (<em>locative + object, autolink</em>)</p></li>
</ul>

<p>The Markdown link definition (i.e. <code>function</code> between the second
set of brackets above) needs no backticks to mark it as code.</p>

<p>Here and below, the <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a> (<code>document</code>) is uppercased, and we rely
on <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a> being true. Alternatively, the
<a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a> could be explicitly marked up as code with a pair of
backticks, and then its character case would likely not
matter (subject to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_rdtabl.htm" title="READTABLE-CASE FUNCTION"><code>readtable-case</code></a>).</p>

<p>The link text in the above examples is <code>document</code>. To override it,
this form may be used:</p>

<ul>
<li><code>[see this][document function]</code> (<em>title + object + locative,
  explicit link</em>) renders as: <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION">see this</a>.</li>
</ul>

<p><a id="x-28MGL-PAX-3A-40UNAMBIGUOUS-LOCATIVE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@UNAMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@AMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Ambiguous Unspecified Locative">&#8594;</a> <a href="#MGL-PAX:@UNAMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Unambiguous Unspecified Locative">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1164">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@UNAMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION">9.4.2 Unambiguous Unspecified Locative</a></h4>

<p>In the following examples, although no locative is specified,
<code>document</code> names a single <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a> being documented, so they all
render as <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>.</p>

<ul>
<li><p><code>[document][]</code> (<em>object, explicit link</em>),</p></li>
<li><p><code>document</code> (<em>object, autolink</em>).</p></li>
</ul>

<p>To override the title:</p>

<ul>
<li><code>[see this][document]</code> (<em>title + object, explicit link</em>) renders
  as: <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION">see this</a>.</li>
</ul>

<p><a id="x-28MGL-PAX-3A-40AMBIGUOUS-LOCATIVE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@AMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@UNAMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Unambiguous Unspecified Locative">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">&#8594;</a> <a href="#MGL-PAX:@AMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Ambiguous Unspecified Locative">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1177">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@AMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION">9.4.3 Ambiguous Unspecified Locative</a></h4>

<p>These examples all render as <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>), linking to both
definitions of the <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a> <code>section</code>, the <code>class</code> and the
<code>locative</code>.</p>

<ul>
<li><p><code>[section][]</code> (<em>object, explicit link</em>)</p></li>
<li><p><code>section</code> (<em>object, autolink</em>)</p></li>
</ul>

<p>To override the title:</p>

<ul>
<li><code>[see this][section]</code> (<em>title + object, explicit link</em>) renders
  as: see this(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>).</li>
</ul>

<p><a id="x-28MGL-PAX-3A-40EXPLICIT-AND-AUTOLINKING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@AMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Ambiguous Unspecified Locative">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">&#8594;</a> <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1190">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION">9.4.4 Explicit and Autolinking</a></h4>

<p>The examples in the previous sections are marked with <em>explicit
link</em> or <em>autolink</em>. Explicit links are those with a Markdown
reference link spelled out explicitly, while autolinks are those
without.</p>

<p><a id="x-28MGL-PAX-3A-40PREVENTING-AUTOLINKING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION" title="Unresolvable Links">&#8594;</a> <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1196">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION">9.4.5 Preventing Autolinking</a></h4>

<p>In the common case, when <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a> is true,
prefixing the uppercase <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@WORD MGL-PAX:GLOSSARY-TERM">word</a> with a backslash prevents it from
being codified and thus also prevents <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a> form kicking in. For example,</p>

<pre><code>\DOCUMENT
</code></pre>

<p>renders as DOCUMENT. If it should be marked up as code but not
autolinked, the backslash must be within backticks like this:</p>

<pre><code>`\DOCUMENT`
</code></pre>

<p>This renders as <code>document</code>. Alternatively, the <a href="#MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE" title="MGL-PAX:DISLOCATED MGL-PAX:LOCATIVE"><code>dislocated</code></a> or the
<a href="#MGL-PAX:ARGUMENT%20MGL-PAX:LOCATIVE" title="MGL-PAX:ARGUMENT MGL-PAX:LOCATIVE"><code>argument</code></a> locative may be used as in <code>[DOCUMENT][dislocated]</code>.</p>

<p><a id="x-28MGL-PAX-3A-40UNRESOLVABLE-REFLINKS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION" title="Suppressed Links">&#8594;</a> <a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION" title="Unresolvable Links">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1491">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION">9.4.6 Unresolvable Links</a></h4>

<p><a id="x-28MGL-PAX-3AUNRESOLVABLE-REFLINK-20CONDITION-29"></a>
<a id="MGL-PAX:UNRESOLVABLE-REFLINK%20CONDITION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1496">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:UNRESOLVABLE-REFLINK%20CONDITION" >unresolvable-reflink</a></span></span> <span class="locative-args">warning</span></span></p>

<p>When <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> encounters an <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">explicit
link</a> such as <code>[NONEXISTENT][function]</code>
that looks like a PAX construct but cannot be resolved, it signals
and <code>unresolvable-reflink</code> warning.</p>

<ul>
<li><p>If the <a href="#MGL-PAX:OUTPUT-REFLINK%20FUNCTION" title="MGL-PAX:OUTPUT-REFLINK FUNCTION"><code>output-reflink</code></a> restart is invoked, then no warning is
  printed and the markdown link is left unchanged. <code>muffle-warning</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_abortc.htm" title="MUFFLE-WARNING FUNCTION"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/r_muffle.htm" title="MUFFLE-WARNING RESTART"><code>1</code></a>) is
  equivalent to <code>output-reflink</code>.</p></li>
<li><p>If the <a href="#MGL-PAX:OUTPUT-LABEL%20FUNCTION" title="MGL-PAX:OUTPUT-LABEL FUNCTION"><code>output-label</code></a> restart is invoked, then no warning is printed
  and the markdown link is replaced by its label. For example,
  <code>[NONEXISTENT][function]</code> becomes <code>nonexistent</code>.</p></li>
<li><p>If the warning is not handled, then it is printed to
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_debug_.htm" title="*ERROR-OUTPUT* VARIABLE"><code>*error-output*</code></a>. Otherwise, it behaves as <code>output-reflink</code>.</p></li>
</ul></li>
</ul>

<p><a id="x-28MGL-PAX-3AOUTPUT-REFLINK-20FUNCTION-29"></a>
<a id="MGL-PAX:OUTPUT-REFLINK%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1568">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:OUTPUT-REFLINK%20FUNCTION" >output-reflink</a></span></span> <span class="locative-args">&amp;optional condition</span></span></p>

<p>Invoke the <code>output-reflink</code> restart.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AOUTPUT-LABEL-20FUNCTION-29"></a>
<a id="MGL-PAX:OUTPUT-LABEL%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1573">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:OUTPUT-LABEL%20FUNCTION" >output-label</a></span></span> <span class="locative-args">&amp;optional condition</span></span></p>

<p>Invoke the OUTPUT-L restart.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40SUPPRESSED-LINKS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION" title="Unresolvable Links">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@FILTERING-AMBIGUOUS-REFERENCES%20MGL-PAX:SECTION" title="Filtering Ambiguous References">&#8594;</a> <a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION" title="Suppressed Links">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1583">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION">9.4.7 Suppressed Links</a></h4>

<p>Within the same docstring, <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a> of code (i.e. of something like
<code>foo</code>) is suppressed if the same <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a> was already linked to in
any way. In the following docstring, only the first <code>foo</code> will be
turned into a link.</p>

<pre><code>&quot;`FOO` is safe. `FOO` is great.&quot;
</code></pre>

<p>However if a <a href="#MGL-PAX:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@LOCATIVE MGL-PAX:GLOSSARY-TERM">locative</a> was specified or found near the <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a>, then
a link is always made. In the following, in both docstrings, both
occurrences <code>foo</code> produce links.</p>

<pre><code>&quot;`FOO` is safe. [`FOO`][macro] is great.&quot;
&quot;`FOO` is safe. Macro `FOO` is great.&quot;
</code></pre>

<p>As an exception, links with <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">specified</a>
and <a href="#MGL-PAX:@UNAMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Unambiguous Unspecified Locative">unambiguous</a> locatives to
<code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>)s and <code>glossary-term</code>(<a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>0</code></a> <a href="#MGL-PAX:GLOSSARY-TERM%20MGL-PAX:LOCATIVE" title="MGL-PAX:GLOSSARY-TERM MGL-PAX:LOCATIVE"><code>1</code></a>)s always produce a link to allow their
titles to be displayed properly.</p>

<p>Finally, <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a> to <code>t</code> or
<code>nil</code> is suppressed (see <a href="#MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC* VARIABLE"><code>*document-link-to-hyperspec*</code></a>).</p>

<p><a id="x-28MGL-PAX-3A-40FILTERING-AMBIGUOUS-REFERENCES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@FILTERING-AMBIGUOUS-REFERENCES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION" title="Suppressed Links">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">&#8594;</a> <a href="#MGL-PAX:@FILTERING-AMBIGUOUS-REFERENCES%20MGL-PAX:SECTION" title="Filtering Ambiguous References">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1728">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@FILTERING-AMBIGUOUS-REFERENCES%20MGL-PAX:SECTION">9.4.8 Filtering Ambiguous References</a></h4>

<p>When there are multiple references to link to - as seen in
<a href="#MGL-PAX:@AMBIGUOUS-LOCATIVE%20MGL-PAX:SECTION" title="Ambiguous Unspecified Locative">Ambiguous Unspecified Locative</a> - some references are removed by the following
rules.</p>

<ul>
<li><p>References to <a href="#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a>s are removed if there are other
  references which are not to <code>asdf:system</code>s. This is because system
  names often collide with the name of a class or function and are
  rarely useful to link to. Use explicit links to <code>asdf:system</code>s, if
  necessary.</p></li>
<li><p>References to the <a href="#MGL-PAX:CLHS%20MGL-PAX:LOCATIVE" title="MGL-PAX:CLHS MGL-PAX:LOCATIVE"><code>clhs</code></a> are filtered similarly.</p></li>
<li><p>If references include a <a href="#GENERIC-FUNCTION%20MGL-PAX:LOCATIVE" title="GENERIC-FUNCTION MGL-PAX:LOCATIVE"><code>generic-function</code></a> locative, then all
  references with <a href="#MGL-PAX:LOCATIVE-TYPE%20FUNCTION" title="MGL-PAX:LOCATIVE-TYPE FUNCTION"><code>locative-type</code></a> <a href="#METHOD%20MGL-PAX:LOCATIVE" title="METHOD MGL-PAX:LOCATIVE"><code>method</code></a>,
  <a href="#MGL-PAX:ACCESSOR%20MGL-PAX:LOCATIVE" title="MGL-PAX:ACCESSOR MGL-PAX:LOCATIVE"><code>accessor</code></a>, <a href="#MGL-PAX:READER%20MGL-PAX:LOCATIVE" title="MGL-PAX:READER MGL-PAX:LOCATIVE"><code>reader</code></a> and <a href="#MGL-PAX:WRITER%20MGL-PAX:LOCATIVE" title="MGL-PAX:WRITER MGL-PAX:LOCATIVE"><code>writer</code></a>
  are removed to avoid linking to a possibly large number of
  methods.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40LOCAL-REFERENCES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@FILTERING-AMBIGUOUS-REFERENCES%20MGL-PAX:SECTION" title="Filtering Ambiguous References">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">&#8594;</a> <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1622">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION">9.4.9 Local References</a></h4>

<p>To unclutter the generated output by reducing the number of
links, the so-called 'local' references (e.g. references to the very
definition for which documentation is being generated) are treated
specially. In the following example, there are local references to
the function <code>foo</code> and its arguments, so none of them get turned into
links:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren2">(<span class="code">arg1 arg2</span>)</span>
  <span class="string">"FOO takes two arguments: ARG1 and ARG2."</span>
  t</span>)</span></span></code></pre>

<p>If linking was desired, one could use a <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">Specified Locative</a> (e.g.
<code>[FOO][function]</code> or <code>FOO function</code>), which results in a single
link. An explicit link with an unspecified locative like <code>[foo][]</code>
generates links to all references involving the <code>foo</code> symbol except
the local ones.</p>

<p>The exact rules for local references are as follows:</p>

<ul>
<li><p>Unless a locative is <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">specified</a>, no
  <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a> is performed for
  <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a>s for which there are local references. For example, <code>foo</code>
  does not get any links if there is <em>any</em> local reference with the
  same <a href="#MGL-PAX:@OBJECT%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@OBJECT MGL-PAX:GLOSSARY-TERM">object</a>.</p></li>
<li><p>With a locative specified (e.g. in the explicit link
  <code>[FOO][function]</code> or in the text <code>the FOO function</code>), a single
  link is made irrespective of any local references.</p></li>
<li><p>Explicit links with an unspecified locative (e.g. <code>[foo][]</code>) are
  linked to all non-local references.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40LINKING-TO-THE-HYPERSPEC-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">&#8594;</a> <a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L219">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION">9.5 Linking to the Hyperspec</a></h3>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-LINK-TO-HYPERSPEC-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L223">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC*%20VARIABLE" >*document-link-to-hyperspec*</a></span></span> <span class="locative-args">t</span></span></p>

<p>If true, link symbols found in code to the Common Lisp Hyperspec.</p>

<p>Locatives work as expected (see <a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-CODE* VARIABLE"><code>*document-link-code*</code></a>):
<code>find-if</code> links to <code>find-if</code>, <code>function</code> links
to <code>function</code> and <code>[FUNCTION][type]</code> links to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION TYPE"><code>function</code></a>.</p>

<p><a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">Autolinking</a> to <code>t</code> and <code>nil</code> is
suppressed. If desired, use <code>[t][]</code> (that links to <code>t</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_t.htm" title="T MGL-PAX:CONSTANT"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_t.htm" title="T TYPE"><code>1</code></a>)) or
<code>[T][constant]</code> (that links to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_t.htm" title="T MGL-PAX:CONSTANT"><code>t</code></a>).</p>

<p>Note that linking to sections in the Hyperspec is done with the <a href="#MGL-PAX:CLHS%20MGL-PAX:LOCATIVE" title="MGL-PAX:CLHS MGL-PAX:LOCATIVE"><code>clhs</code></a>
locative and is not subject to the value of this variable.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HYPERSPEC-ROOT-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HYPERSPEC-ROOT*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L237">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HYPERSPEC-ROOT*%20VARIABLE" >*document-hyperspec-root*</a></span></span> <span class="locative-args">&quot;http://www.lispworks.com/documentation/HyperSpec/&quot;</span></span></p>

<p>A URL pointing to an installed Common Lisp Hyperspec. The default
value of is the canonical location.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40LINKING-TO-SECTIONS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">&#8594;</a> <a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1779">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION">9.6 Linking to Sections</a></h3>

<p>The following variables control how to generate section numbering,
table of contents and navigation links.</p>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-LINK-SECTIONS-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1788">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" >*document-link-sections*</a></span></span> <span class="locative-args">t</span></span></p>

<p>When true, HTML anchors are generated before the headings (e.g. of
sections), which allows the table of contents to contain links and
also code-like references to sections (like <code>@foo-manual</code>) to be
translated to links with the section title being the name of the
link.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-MAX-NUMBERING-LEVEL-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-MAX-NUMBERING-LEVEL*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1795">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-MAX-NUMBERING-LEVEL*%20VARIABLE" >*document-max-numbering-level*</a></span></span> <span class="locative-args">3</span></span></p>

<p>A non-negative integer. In their hierarchy, sections on levels less
than this value get numbered in the format of <code>3.1.2</code>. Setting it to
0 turns numbering off.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-MAX-TABLE-OF-CONTENTS-LEVEL-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-MAX-TABLE-OF-CONTENTS-LEVEL*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1800">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-MAX-TABLE-OF-CONTENTS-LEVEL*%20VARIABLE" >*document-max-table-of-contents-level*</a></span></span> <span class="locative-args">3</span></span></p>

<p>A non-negative integer. Top-level sections are given a table of
contents, which includes a nested tree of section titles whose depth
is limited by this value. Setting it to 0 turns generation of the
table of contents off. If <a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-SECTIONS* VARIABLE"><code>*document-link-sections*</code></a> is true, then the
table of contents will link to the sections.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-TEXT-NAVIGATION-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-TEXT-NAVIGATION*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1807">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-TEXT-NAVIGATION*%20VARIABLE" >*document-text-navigation*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>If true, then before each heading a line is printed with links to
the previous, parent and next section. Needs
<a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-SECTIONS* VARIABLE"><code>*document-link-sections*</code></a> to be on to work.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-FANCY-HTML-NAVIGATION-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-FANCY-HTML-NAVIGATION*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L1812">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-FANCY-HTML-NAVIGATION*%20VARIABLE" >*document-fancy-html-navigation*</a></span></span> <span class="locative-args">t</span></span></p>

<p>If true and the output format is HTML, then headings get a
navigation component that consists of links to the previous, parent,
next section and a permalink. This component is normally hidden, it
is visible only when the mouse is over the heading. Needs
<a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-SECTIONS* VARIABLE"><code>*document-link-sections*</code></a> to be on to work.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8594;</a> <a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L2001">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION">9.7 Miscellaneous Variables</a></h3>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-URL-VERSIONS-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-URL-VERSIONS*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L2009">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-URL-VERSIONS*%20VARIABLE" >*document-url-versions*</a></span></span> <span class="locative-args">(2 1)</span></span></p>

<p>A list of versions of PAX URL formats to support in the
generated documenation. The first in the list is used to generate
links.</p>

<p>PAX emits HTML anchors before the documentation of <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>)s
(see <a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">Linking to Sections</a>) and other things (see <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>).
For the function <code>foo</code>, in the current version (version 2), the
anchor is <code>&lt;a id=&quot;MGL-PAX:FOO%20FUNCTION&quot;&gt;</code> and its URL will end
with <code>#MGL-PAX:FOO%20FUNCTION</code>.</p>

<p><em>Note that to make the URL independent of whether a symbol is
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_s.htm" title="FIND-SYMBOL FUNCTION">internal or external</a> to their <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_symb_3.htm" title="SYMBOL-PACKAGE FUNCTION"><code>symbol-package</code></a>, single
colon is printed where a double colon would be expected. Package and
symbol names are both printed verbatim except for escaping colons
and spaces with a backslash. For exported symbols with no funny
characters, this coincides with how <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_pr.htm" title="PRIN1 FUNCTION"><code>prin1</code></a> would print the symbol,
while having the benefit of making the URL independent of the Lisp
printer's escaping strategy and producing human-readable output for
mixed-case symbols. No such promises are made for non-ASCII
characters, and their URLs may change in future versions. Locatives
are printed with <code>prin1</code>.</em></p>

<p>Version 1 is based on the more strict HTML4 standard and the id of
<code>foo</code> is <code>&quot;x-28MGL-PAX-3A-3AFOO-20FUNCTION-29&quot;</code>. This is supported
by Github flavoured Markdown. Version 2 has minimal clutter and is
obviously preferred. However, in order not to break external links,
by default, both anchors are generated.</p>

<p>Let's understand the generated Markdown.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren2">(<span class="code">x</span>)</span></span>)</span>

<span class="paren1">(<span class="code">document #'foo</span>)</span>
=&gt; <span class="paren1">(<span class="code"><span class="string">"&lt;a id=</span><span class="string">\"</span><span class="string">x-28MGL-PAX-3AFOO-20FUNCTION-29</span><span class="string">\"</span><span class="string">&gt;&lt;/a&gt;
&lt;a id=</span><span class="string">\"</span><span class="string">MGL-PAX:FOO%20FUNCTION</span><span class="string">\"</span><span class="string">&gt;&lt;/a&gt;

- [function] **FOO** *X*
"</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="special">*document-url-versions*</span> '<span class="paren4">(<span class="code">1</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">document #'foo</span>)</span></span>)</span>
=&gt; <span class="paren1">(<span class="code"><span class="string">"&lt;a id=</span><span class="string">\"</span><span class="string">x-28MGL-PAX-3AFOO-20FUNCTION-29</span><span class="string">\"</span><span class="string">&gt;&lt;/a&gt;
- [function] **FOO** *X*
"</span></span>)</span></span></code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-MIN-LINK-HASH-LENGTH-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-MIN-LINK-HASH-LENGTH*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L2114">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-MIN-LINK-HASH-LENGTH*%20VARIABLE" >*document-min-link-hash-length*</a></span></span> <span class="locative-args">4</span></span></p>

<p>Recall that markdown reference style links (like <code>[label][id]</code>) are
used for linking to sections and code. It is desirable to have ids
that are short to maintain legibility of the generated markdown, but
also stable to reduce the spurious diffs in the generated
documentation, which can be a pain in a version control system.</p>

<p>Clearly, there is a tradeoff here. This variable controls how many
characters of the md5 sum of the full link id (the reference as a
string) are retained. If collisions are found due to the low number
of characters, then the length of the hash of the colliding
reference is increased.</p>

<p>This variable has no effect on the HTML generated from markdown, but
it can make markdown output more readable.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-MARK-UP-SIGNATURES-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L2152">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES*%20VARIABLE" >*document-mark-up-signatures*</a></span></span> <span class="locative-args">t</span></span></p>

<p>When true, some things such as function names and arglists are
rendered as bold and italic. In <code>:html</code> output, locative types become
links to sources (if <code>:source-uri-fn</code> is provided, see <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>), and
the symbol becomes a self-link for your permalinking pleasure.</p>

<p>For example, a reference is rendered in markdown roughly as:</p>

<pre><code>- [function] foo x y
</code></pre>

<p>With this option on, the above becomes:</p>

<pre><code>- [function] **foo** *x y*
</code></pre>

<p>Also, in HTML <code>**foo**</code> will be a link to that very entry and
<code>[function]</code> may turn into a link to sources.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-NORMALIZE-PACKAGES-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L2274">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES*%20VARIABLE" >*document-normalize-packages*</a></span></span> <span class="locative-args">t</span></span></p>

<p>Determines what <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pkg.htm" title="*PACKAGE* VARIABLE"><code>*package*</code></a> and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_rdtabl.htm" title="*READTABLE* VARIABLE"><code>*readtable*</code></a> are when working with
generating documentation. If true and documentation is generated for
a <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>) (including its <a href="#MGL-PAX:SECTION-ENTRIES%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" title="MGL-PAX:SECTION-ENTRIES (MGL-PAX:READER MGL-PAX:SECTION)"><code>section-entries</code></a>), then <a href="#MGL-PAX:SECTION-PACKAGE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" title="MGL-PAX:SECTION-PACKAGE (MGL-PAX:READER MGL-PAX:SECTION)"><code>section-package</code></a> and
<a href="#MGL-PAX:SECTION-READTABLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" title="MGL-PAX:SECTION-READTABLE (MGL-PAX:READER MGL-PAX:SECTION)"><code>section-readtable</code></a> of the innermost containing section is used. To
eliminate ambiguity <code>[in package ...]</code> messages are printed right
after the section heading if necessary. If false, then <code>*package*</code> and
<code>*readtable*</code> are left at the current values.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40DOCUMENTATION-UTILITIES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION" title="Github Workflow">&#8594;</a> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document-util.lisp#L5">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION">9.8 Utilities for Generating Documentation</a></h3>

<p>Two convenience functions are provided to serve the common case of
having an ASDF system with some readmes and a directory with for the
HTML documentation and the default css stylesheet.</p>

<p><a id="x-28MGL-PAX-3AUPDATE-ASDF-SYSTEM-READMES-20FUNCTION-29"></a>
<a id="MGL-PAX:UPDATE-ASDF-SYSTEM-READMES%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document-util.lisp#L24">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:UPDATE-ASDF-SYSTEM-READMES%20FUNCTION" >update-asdf-system-readmes</a></span></span> <span class="locative-args">object asdf-system &amp;key (url-versions '(1))</span></span></p>

<p>Convenience function to generate two readme files in the directory
holding the <code>asdf-system</code> definition. <code>object</code> is passed on to <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>.</p>

<p><code>README.md</code> has anchors, links, inline code, and other markup added.
Not necessarily the easiest on the eye in an editor, but looks good
on github.</p>

<p><code>readme</code> is optimized for reading in text format. Has no links and
less cluttery markup.</p>

<p>Example usage:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">update-asdf-system-readmes @pax-manual <span class="keyword">:mgl-pax</span></span>)</span></span></code></pre>

<p>Note that <a href="#MGL-PAX:*DOCUMENT-URL-VERSIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-URL-VERSIONS* VARIABLE"><code>*document-url-versions*</code></a> is bound to <code>url-versions</code>, that
defaults to using the uglier version 1 style of <code>url</code> for the sake of
github.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AUPDATE-ASDF-SYSTEM-HTML-DOCS-20FUNCTION-29"></a>
<a id="MGL-PAX:UPDATE-ASDF-SYSTEM-HTML-DOCS%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document-util.lisp#L67">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:UPDATE-ASDF-SYSTEM-HTML-DOCS%20FUNCTION" >update-asdf-system-html-docs</a></span></span> <span class="locative-args">sections asdf-system &amp;key pages (target-dir (asdf/system:system-relative-pathname asdf-system &quot;doc/&quot;)) (update-css-p t)</span></span></p>

<p>Generate pretty HTML documentation for a single ASDF system,
possibly linking to github. If <code>update-css-p</code>, copy the CSS style
sheet to <code>target-dir</code>, as well. Example usage:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">update-asdf-system-html-docs @pax-manual <span class="keyword">:mgl-pax</span></span>)</span></span></code></pre>

<p>The same, linking to the sources on github:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">update-asdf-system-html-docs
  @pax-manual <span class="keyword">:mgl-pax</span>
  <span class="keyword">:pages</span>
  `<span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="keyword">:objects</span>
    <span class="paren4">(<span class="code">,mgl-pax::@pax-manual</span>)</span>
    <span class="keyword">:source-uri-fn</span> ,<span class="paren4">(<span class="code">make-git-source-uri-fn
                     <span class="keyword">:mgl-pax</span>
                     <span class="string">"https://github.com/melisgl/mgl-pax"</span></span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HTML-MAX-NAVIGATION-TABLE-OF-CONTENTS-LEVEL-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HTML-MAX-NAVIGATION-TABLE-OF-CONTENTS-LEVEL*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document-util.lisp#L271">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HTML-MAX-NAVIGATION-TABLE-OF-CONTENTS-LEVEL*%20VARIABLE" >*document-html-max-navigation-table-of-contents-level*</a></span></span> <span class="locative-args">nil</span></span></p>

<p><code>nil</code> or a non-negative integer. If non-NIL, it overrides
<a href="#MGL-PAX:*DOCUMENT-MAX-NUMBERING-LEVEL*%20VARIABLE" title="MGL-PAX:*DOCUMENT-MAX-NUMBERING-LEVEL* VARIABLE"><code>*document-max-numbering-level*</code></a> in dynamic HTML table of contents on
the left of the page.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HTML-HEAD-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HTML-HEAD*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document-util.lisp#L167">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HTML-HEAD*%20VARIABLE" >*document-html-head*</a></span></span> <span class="locative-args">nil</span></span></p>

<p><code>nil</code> or a <code>string</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_string.htm" title="STRING FUNCTION"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_string.htm" title="STRING TYPE"><code>1</code></a>) that's going to be included in the <head> of the
generated html.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HTML-TOP-BLOCKS-OF-LINKS-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document-util.lisp#L171">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS*%20VARIABLE" >*document-html-top-blocks-of-links*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>A list of blocks of links to be displayed on the sidebar on the left,
above the table of contents. A block is of the form <code>(&amp;key title id
links)</code>, where <code>title</code> will be displayed at the top of the block in a
HTML <code>div</code> with <code>id</code>, followed by the links. <code>links</code> is a list
of <code>(URI LABEL) elements.</code></p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document-util.lisp#L178">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS*%20VARIABLE" >*document-html-bottom-blocks-of-links*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>Like <a href="#MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS* VARIABLE"><code>*document-html-top-blocks-of-links*</code></a>, only it is displayed
below the table of contents.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40GITHUB-WORKFLOW-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8592;</a> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">&#8594;</a> <a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION" title="Github Workflow">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L145">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION">9.8.1 Github Workflow</a></h4>

<p>It is generally recommended to commit generated readmes (see
<a href="#MGL-PAX:UPDATE-ASDF-SYSTEM-READMES%20FUNCTION" title="MGL-PAX:UPDATE-ASDF-SYSTEM-READMES FUNCTION"><code>update-asdf-system-readmes</code></a>), so that users have something to read
without reading the code and sites like github can display them.</p>

<p>HTML documentation can also be committed, but there is an issue with
that: when linking to the sources (see <a href="#MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION" title="MGL-PAX:MAKE-GIT-SOURCE-URI-FN FUNCTION"><code>make-git-source-uri-fn</code></a>), the
commit id is in the link. This means that code changes need to be
committed first, and only then can HTML documentation be regenerated
and committed in a followup commit.</p>

<p>The second issue is that github is not very good at serving HTMLs
files from the repository itself (and
<a href="http://htmlpreview.github.io" >http://htmlpreview.github.io</a> chokes
on links to the sources).</p>

<p>The recommended workflow is to use
<a href="https://pages.github.com/" >gh-pages</a>, which can be made relatively
painless with the <code>git worktree</code> command. The gist of it is to make
the <code>doc/</code> directory a checkout of the branch named <code>gh-pages</code>. A
good description of this process is
<a href="http://sangsoonam.github.io/2019/02/08/using-git-worktree-to-deploy-github-pages.html" >http://sangsoonam.github.io/2019/02/08/using-git-worktree-to-deploy-github-pages.html</a>.
Two commits needed still, but it is somewhat less painful.</p>

<p>This way the HTML documentation will be available at
<code>http://&lt;username&gt;.github.io/&lt;repo-name&gt;</code>. It is probably a good
idea to add sections like the <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links">Links</a> section to allow jumping
between the repository and the gh-pages site.</p>

<p><a id="x-28MGL-PAX-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29"></a>
<a id="MGL-PAX:MAKE-GITHUB-SOURCE-URI-FN%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L176">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:MAKE-GITHUB-SOURCE-URI-FN%20FUNCTION" >make-github-source-uri-fn</a></span></span> <span class="locative-args">asdf-system github-uri &amp;key git-version</span></span></p>

<p>This function is a backward-compatibility wrapper around
<a href="#MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION" title="MGL-PAX:MAKE-GIT-SOURCE-URI-FN FUNCTION"><code>make-git-source-uri-fn</code></a>, which supersedes <code>make-github-source-uri-fn</code>.
All arguments are passed on to <code>make-git-source-uri-fn</code>, leaving
<code>uri-format-string</code> at its default, which is suitable for github.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AMAKE-GIT-SOURCE-URI-FN-20FUNCTION-29"></a>
<a id="MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L183">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION" >make-git-source-uri-fn</a></span></span> <span class="locative-args">asdf-system git-forge-uri &amp;key git-version (uri-format-string &quot;~A/blob/~A/~A#L~S&quot;)</span></span></p>

<p>Return a function suitable as <code>:source-uri-fn</code> of a page spec (see
the <code>pages</code> argument of <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>). The function looks at the source
location of the <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a> passed to it, and if the location is
found, the path is made relative to the root directory of
<code>asdf-system</code> and finally an URI pointing to your git forge (such as
github) is returned. A warning is signalled whenever the source
location lookup fails or if the source location points to a
directory not below the directory of <code>asdf-system</code>.</p>

<p>If GIT-FORE-URI is <code>&quot;https://github.com/melisgl/mgl-pax/&quot;</code> and
<code>git-version</code> is <code>&quot;master&quot;</code>, then the returned URI may look like this:</p>

<pre><code>https://github.com/melisgl/mgl-pax/blob/master/src/pax-early.lisp#L12
</code></pre>

<p>If <code>git-version</code> is <code>nil</code>, then an attempt is made to determine to
current commit id from the <code>.git</code> in the directory holding
<code>asdf-system</code>. If no <code>.git</code> directory is found, then no links to
the git forge will be generated.</p>

<p><code>uri-format-string</code> is a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_format.htm" title="FORMAT FUNCTION"><code>cl:format</code></a> control string for four arguments:</p>

<ul>
<li><p><code>git-forge-uri</code>,</p></li>
<li><p><code>git-version</code>,</p></li>
<li><p>the relative path to the file of the source location of the reference,</p></li>
<li><p>and the line number.</p></li>
</ul>

<p>The default value of <code>uri-format-string</code> is for github. If using a
non-standard git forge, such as Sourcehut or Gitlab, simply pass a
suitable <code>uri-format-string</code> matching the URI scheme of your forge.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40PAX-WORLD-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION" title="Github Workflow">&#8592;</a> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION" title="Overview of Escaping">&#8594;</a> <a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L302">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION">9.8.2 PAX World</a></h4>

<p>PAX World is a registry of documents, which can generate
cross-linked HTML documentation pages for all the registered
documents.</p>

<p><a id="x-28MGL-PAX-3AREGISTER-DOC-IN-PAX-WORLD-20FUNCTION-29"></a>
<a id="MGL-PAX:REGISTER-DOC-IN-PAX-WORLD%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L316">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:REGISTER-DOC-IN-PAX-WORLD%20FUNCTION" >register-doc-in-pax-world</a></span></span> <span class="locative-args">name sections page-specs</span></span></p>

<p>Register <code>sections</code> and <code>page-specs</code> under <code>name</code> in PAX World. By
default, <a href="#MGL-PAX:UPDATE-PAX-WORLD%20FUNCTION" title="MGL-PAX:UPDATE-PAX-WORLD FUNCTION"><code>update-pax-world</code></a> generates documentation for all of these.</p></li>
</ul>

<p>For example, this is how PAX registers itself:</p>

<p><a id="x-28MGL-PAX-3AREGISTER-DOC-EXAMPLE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28MGL-PAX-3A-3APAX-SECTIONS-20FUNCTION-29-20-3AEND-20-28MGL-PAX-3A-3AEND-OF-REGISTER-DOC-EXAMPLE-20VARIABLE-29-29-20-3AHEADER-NL-20-22-60-60-60-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="MGL-PAX:REGISTER-DOC-EXAMPLE%20%28MGL-PAX:INCLUDE%20%28:START%20%28MGL-PAX::PAX-SECTIONS%20FUNCTION%29%20:END%20%28MGL-PAX::END-OF-REGISTER-DOC-EXAMPLE%20VARIABLE%29%29%20:HEADER-NL%20%22%60%60%60%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> pax-sections <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code">list @pax-manual</span>)</span></span>)</span>
<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> pax-pages <span class="paren2">(<span class="code"></span>)</span>
  `<span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="keyword">:objects</span>
     <span class="paren4">(<span class="code">, @pax-manual</span>)</span>
     <span class="keyword">:source-uri-fn</span> ,<span class="paren4">(<span class="code">make-git-source-uri-fn
                      <span class="keyword">:mgl-pax</span>
                      <span class="string">"https://github.com/melisgl/mgl-pax"</span></span>)</span></span>)</span></span>)</span></span>)</span>
<span class="paren1">(<span class="code">register-doc-in-pax-world <span class="keyword">:pax</span> <span class="paren2">(<span class="code">pax-sections</span>)</span> <span class="paren2">(<span class="code">pax-pages</span>)</span></span>)</span></span></code></pre>

<p><a id="x-28MGL-PAX-3AUPDATE-PAX-WORLD-20FUNCTION-29"></a>
<a id="MGL-PAX:UPDATE-PAX-WORLD%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document-util.lisp#L286">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:UPDATE-PAX-WORLD%20FUNCTION" >update-pax-world</a></span></span> <span class="locative-args">&amp;key (docs *registered-pax-world-docs*) dir</span></span></p>

<p>Generate HTML documentation for all <code>docs</code>. Files are created in
<code>dir</code> (<code>(asdf:system-relative-pathname :mgl-pax &quot;world/&quot;)</code> by
default if <code>dir</code> is <code>nil</code>). <code>docs</code> is a list of entries of the form (<code>name</code>
<code>sections</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>) <code>page-specs</code>). The default for <code>docs</code> is all the sections and
pages registered with <a href="#MGL-PAX:REGISTER-DOC-IN-PAX-WORLD%20FUNCTION" title="MGL-PAX:REGISTER-DOC-IN-PAX-WORLD FUNCTION"><code>register-doc-in-pax-world</code></a>.</p>

<p>In the absence of <code>:header-fn</code> <code>:footer-fn</code>, <code>:output</code>, every spec in
<code>page-specs</code> is augmented with HTML headers, footers and output
location specifications (based on the name of the section).</p>

<p>If necessary a default page spec is created for every section.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40OVERVIEW-OF-ESCAPING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION" title="Document Generation Implementation Notes">&#8594;</a> <a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION" title="Overview of Escaping">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L2319">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION">9.9 Overview of Escaping</a></h3>

<p>Let's recap how escaping <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a>,
<a href="#MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE* VARIABLE">downcasing</a>, and
<a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a> works.</p>

<ul>
<li><p>One backslash in front of a <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@WORD MGL-PAX:GLOSSARY-TERM">word</a> turns codification off. Use this
  to prevent codification words such as PAX, which is all uppercase
  hence <a href="#MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@CODIFIABLE MGL-PAX:GLOSSARY-TERM">codifiable</a> and it names a package hence it is <a href="#MGL-PAX:@INTERESTING%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@INTERESTING MGL-PAX:GLOSSARY-TERM">interesting</a>.</p></li>
<li><p>One backslash right after an opening backtick turns autolinking
  off.</p></li>
<li><p>Two backslashes right after an opening backtick turns autolinking
  and downcasing off. Use this for things that are not Lisp code but
  which need to be in a monospace font.</p></li>
</ul>

<p>In the following examples capital C/D/A letters mark the presence,
and a/b/c the absence of codification, downcasing, and autolinking
assuming all these features are enabled by
<a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a>. <a href="#MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE* VARIABLE"><code>*document-downcase-uppercase-code*</code></a>,
and <a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-CODE* VARIABLE"><code>*document-link-code*</code></a>.</p>

<pre><code>DOCUMENT                =&gt; [`document`][1234]    (CDA)
\DOCUMENT               =&gt; DOCUMENT              (cda)
`\DOCUMENT`             =&gt; `document`            (CDa)
`\\DOCUMENT`            =&gt; `DOCUMENT`            (CdA)
[DOCUMENT][]            =&gt; [`document`][1234]    (CDA)
[\DOCUMENT][]           =&gt; [DOCUMENT][1234]      (cdA)
[`\DOCUMENT`][]         =&gt; [`document`][1234]    (CDA) *
[`\\DOCUMENT`][]        =&gt; [`DOCUMENT`][1234]    (CdA)
[DOCUMENT][dislocated]  =&gt; `document`            (CDa)
</code></pre>

<p>Note that in the example marked with <code>*</code>, the single backslash,
that would normally turn autolinking off, is ignored because it is
in an explicit link.</p>

<p><a id="x-28MGL-PAX-3A-40DOCUMENT-IMPLEMENTATION-NOTES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION" title="Overview of Escaping">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8594;</a> <a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION" title="Document Generation Implementation Notes">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L2355">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION">9.10 Document Generation Implementation Notes</a></h3>

<p>Documentation Generation is supported on ABCL, AllegroCL, CLISP,
CCL, CMUCL, ECL and SBCL, but their outputs may differ due to the
lack of some introspective capability. SBCL generates complete
output. Compared to that, the following are not supported:</p>

<ul>
<li><p><a href="#COMPILER-MACRO%20MGL-PAX:LOCATIVE" title="COMPILER-MACRO MGL-PAX:LOCATIVE"><code>compiler-macro</code></a> docstrings on ABCL, AllegroCL, CCL, ECL,</p></li>
<li><p><a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_deftp.htm" title="DEFTYPE MGL-PAX:MACRO"><code>deftype</code></a> lambda lists on ABCL, AllegroCL, CLISP, CCL, CMUCL, ECL,</p></li>
<li><p>default values in <a href="#MGL-PAX:MACRO%20MGL-PAX:LOCATIVE" title="MGL-PAX:MACRO MGL-PAX:LOCATIVE"><code>macro</code></a> lambda lists on AllegroCL,</p></li>
<li><p><code>method-combination</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_meth_1.htm" title="METHOD-COMBINATION CLASS"><code>0</code></a> <a href="#METHOD-COMBINATION%20MGL-PAX:LOCATIVE" title="METHOD-COMBINATION MGL-PAX:LOCATIVE"><code>1</code></a>) docstrings on ABCL, AllegroCL.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40TRANSCRIPTS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION" title="Document Generation Implementation Notes">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/transcribe&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L116">&#955;</a></span></span></p>

<h2><a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION">10 Transcripts</a></h2>

<p>What are transcripts for? When writing a tutorial, one often wants
to include a REPL session with maybe a few defuns and a couple of
forms whose output or return values are shown. Also, in a function's
docstring an example call with concrete arguments and return values
speaks volumes. A transcript is a text that looks like a repl
session, but which has a light markup for printed output and return
values, while no markup (i.e. prompt) for Lisp forms. PAX
transcripts may include output and return values of all forms, or
only selected ones. In either case, the transcript itself can be
easily generated from the source code.</p>

<p>The main worry associated with including examples in the
documentation is that they tend to get out-of-sync with the code.
This is solved by being able to parse back and update transcripts.
In fact, this is exactly what happens during documentation
generation with PAX. Code sections tagged <code>cl-transcript</code> are
retranscribed and checked for inconsistency (that is, any difference
in output or return values). If the consistency check fails, an
error is signalled that includes a reference to the object being
documented.</p>

<p>Going beyond documentation, transcript consistency checks can be
used for writing simple tests in a very readable form. For example:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">+ 1 2</span>)</span>
=&gt; 3

<span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ <span class="keyword">:hello</span></span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span>
.. HELLO
=&gt; :HELLO
=&gt; <span class="paren1">(<span class="code">1 2</span>)</span></span></code></pre>

<p>All in all, transcripts are a handy tool especially when combined
with the Emacs support to regenerate them and with
PYTHONIC-STRING-READER's triple-quoted strings, that allow one to
work with nested strings with less noise. The triple-quote syntax
can be enabled with:</p>

<pre><code>(in-readtable pythonic-string-syntax)
</code></pre>

<p><a id="x-28-22mgl-pax-2Ftranscribe-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION" title="Transcribing with Emacs">&#8594;</a> <a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/transcribe&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/mgl-pax.asd#L1">&#955;</a></span></span></p>

<h3><a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM">10.1 <code>mgl-pax/transcribe</code> ASDF System</a></h3>

<ul>
<li>Description: Transcription support for <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax</code></a>.</li>
<li>Long Description: Autoloaded by <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>mgl-pax:transcribe</code></a> and by the Emacs
  integration (see <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">Transcripts</a>).</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40TRANSCRIBING-WITH-EMACS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/transcribe&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION" title="Transcript API">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION" title="Transcribing with Emacs">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1174">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION">10.2 Transcribing with Emacs</a></h3>

<p>Typical transcript usage from within Emacs is simple: add a lisp
form to a docstring or comment at any indentation level. Move the
cursor right after the end of the form as if you were to evaluate it
with <code>C-x C-e</code>. The cursor is marked by <code>#\^</code>:</p>

<pre><code>This is part of a docstring.

```cl-transcript
(values (princ :hello) (list 1 2))^
```
</code></pre>

<p>Note that the use of fenced code blocks with the language tag
<code>cl-transcript</code> is only to tell PAX to perform consistency checks
at documentation generation time.</p>

<p>Now invoke the elisp function <code>mgl-pax-transcribe</code> where the cursor
is and the fenced code block from the docstring becomes:</p>

<pre><code>(values (princ :hello) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1 2)
^
</code></pre>

<p>Then you change the printed message and add a comment to the second
return value:</p>

<pre><code>(values (princ :hello-world) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1
    ;; This value is arbitrary.
    2)
</code></pre>

<p>When generating the documentation you get a
<a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR CONDITION"><code>transcription-consistency-error</code></a> because the printed output and the
first return value changed so you regenerate the documentation by
marking the region of bounded by <code>#\|</code> and the cursor at <code>#\^</code> in
the example:</p>

<pre><code>|(values (princ :hello-world) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1
    ;; This value is arbitrary.
    2)
^
</code></pre>

<p>then invoke the elisp function <code>mgl-pax-retranscribe-region</code> to get:</p>

<pre><code>(values (princ :hello-world) (list 1 2))
.. HELLO-WORLD
=&gt; :HELLO-WORLD
=&gt; (1
    ;; This value is arbitrary.
    2)
^
</code></pre>

<p>Note how the indentation and the comment of <code>(1 2)</code> was left alone
but the output and the first return value got updated.</p>

<p>Alternatively, <code>C-u 1 mgl-pax-transcribe</code> will emit commented markup:</p>

<pre><code>(values (princ :hello) (list 1 2))
;.. HELLO
;=&gt; :HELLO
;=&gt; (1 2)
</code></pre>

<p><code>C-u 0 mgl-pax-retranscribe-region</code> will turn commented into
non-commented markup. In general, the numeric prefix argument is the
index of the syntax to be used in <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax</code></a>:<a href="#MGL-PAX:*TRANSCRIBE-SYNTAXES*%20VARIABLE" title="MGL-PAX:*TRANSCRIBE-SYNTAXES* VARIABLE"><code>*transcribe-syntaxes*</code></a>.
Without a prefix argument <code>mgl-pax-retranscribe-region</code> will not
change the markup style.</p>

<p>Finally, not only do both functions work at any indentation level,
but in comments too:</p>

<pre><code>;;;; (values (princ :hello) (list 1 2))
;;;; .. HELLO
;;;; =&gt; :HELLO
;;;; =&gt; (1 2)
</code></pre>

<p>Transcription support in emacs can be enabled by loading
<code>src/transcribe.el</code>.</p>

<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-API-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION" title="Transcribing with Emacs">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION" title="Transcript API">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L164">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION">10.3 Transcript API</a></h3>

<p><a id="x-28MGL-PAX-3ATRANSCRIBE-20FUNCTION-29"></a>
<a id="MGL-PAX:TRANSCRIBE%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L229">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" >transcribe</a></span></span> <span class="locative-args">input output &amp;key update-only (include-no-output update-only) (include-no-value update-only) (echo t) (check-consistency *transcribe-check-consistency*) default-syntax (input-syntaxes *transcribe-syntaxes*) (output-syntaxes *transcribe-syntaxes*)</span></span></p>

<p>Read forms from <code>input</code> and write them (iff <code>echo</code>) to <code>output</code>
followed by any output and return values produced by calling <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_eval.htm" title="EVAL FUNCTION"><code>eval</code></a> on
the form. <code>input</code> can be a stream or a string, while <code>output</code> can be a
stream or <code>nil</code> in which case transcription goes into a string. The
return value is the <code>output</code> stream or the string that was
constructed.</p>

<p>A simple example is this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">transcribe <span class="string">"(princ 42) "</span> nil</span>)</span>
=&gt; "<span class="paren1">(<span class="code">princ 42</span>)</span>
.. 42
=&gt; 42
"</span></code></pre>

<p>However, the above may be a bit confusing since this documentation
uses <code>transcribe</code> markup syntax in this very example, so let's do it
differently. If we have a file with these contents:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ 42</span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span></span></code></pre>

<p>it is transcribed to:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ 42</span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span>
.. 42
=&gt; 42
=&gt; <span class="paren1">(<span class="code">1 2</span>)</span></span></code></pre>

<p>Output to all standard streams is captured and printed with
the <code>:output</code> prefix (<code>&quot;..&quot;</code>). The return values above are printed
with the <code>:readable</code> prefix (<code>&quot;=&gt;&quot;</code>). Note how these prefixes are
always printed on a new line to facilitate parsing.</p>

<p><strong>Updating</strong></p>

<p><code>transcribe</code> is able to parse its own output. If we transcribe the
previous output above, we get it back exactly. However, if we remove
all output markers, leave only a placeholder value marker and
pass <code>:update-only</code> <code>t</code> with source:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ 42</span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span>
=&gt;</span></code></pre>

<p>we get this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ 42</span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span>
=&gt; 42
=&gt; <span class="paren1">(<span class="code">1 2</span>)</span></span></code></pre>

<p>With <code>update-only</code>, the printed output of a form is only transcribed
if there were output markers in the source. Similarly, with
<code>update-only</code>, return values are only transcribed if there were value
markers in the source.</p>

<p><strong>No Output/Values</strong></p>

<p>If the form produces no output or returns no values, then whether or
not output and values are transcribed is controlled by
<code>include-no-output</code> and <code>include-no-value</code>, respectively. By default,
neither is on so:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values</span>)</span>
..
=&gt;</span></code></pre>

<p>is transcribed to</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values</span>)</span></span></code></pre>

<p>With <code>update-only</code> true, we probably wouldn't like to lose those
markers since they were put there for a reason. Hence, with
<code>update-only</code>, <code>include-no-output</code> and <code>include-no-value</code> default to true.
So with <code>update-only</code> the above example is transcribed to:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values</span>)</span>
..
=&gt; <span class="comment">; No value</span></span></code></pre>

<p>where the last line is the <code>:no-value</code> prefix.</p>

<p><strong>Consistency Checks</strong></p>

<p>If <code>check-consistency</code> is true, then <code>transcribe</code> signals a continuable
<a href="#MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR CONDITION"><code>transcription-output-consistency-error</code></a> whenever a form's output as a
string is different from what was in <code>input</code>, provided that <code>input</code>
contained the output. Similary, for values, a continuable
<a href="#MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR CONDITION"><code>transcription-values-consistency-error</code></a> is signalled if a value read
from the source does not print as the as the value returned by <code>eval</code>.
This allows readable values to be hand-indented without failing
consistency checks:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">list 1 2</span>)</span>
=&gt; <span class="comment">;; This is commented, too.
</span>   <span class="paren1">(<span class="code">1
      <span class="comment">;; Funny indent.
</span>      2</span>)</span></span></code></pre>

<p>See <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">Transcript Consistency Checking</a> for the full picture.</p>

<p><strong>Unreadable Values</strong></p>

<p>The above scheme involves <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_rd_rd.htm" title="READ FUNCTION"><code>read</code></a>, so consistency of unreadable values
cannot be treated the same. In fact, unreadable values must even be
printed differently for transcribe to be able to read them back:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> some-class <span class="paren2">(<span class="code"></span>)</span> <span class="paren2">(<span class="code"></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> print-object <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">obj some-class</span>)</span> stream</span>)</span>
  <span class="paren2">(<span class="code">print-unreadable-object <span class="paren3">(<span class="code">obj stream <span class="keyword">:type</span> t</span>)</span>
    <span class="paren3">(<span class="code">format stream \"~%~%end\"</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">make-instance 'some-class</span>)</span>
==&gt; #&lt;SOME-CLASS 
--&gt;
--&gt; end&gt;</span></code></pre>

<p>where <code>&quot;==&gt;&quot;</code> is the <code>:unreadable</code> prefix and <code>&quot;--&gt;&quot;</code> is the
<code>:unreadable-continuation</code> prefix. As with outputs, a consistency
check between an unreadable value from the source and the value from
<code>eval</code> is performed with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_stgeq_.htm" title="STRING= FUNCTION"><code>string=</code></a> by default. That is, the value from
<code>eval</code> is printed to a string and compared to the source value. Hence,
any change to unreadable values will break consistency checks. This
is most troublesome with instances of classes with the default
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_pr_obj.htm" title="PRINT-OBJECT GENERIC-FUNCTION"><code>print-object</code></a> method printing the memory address. See @ no remedy for
that, except for customizing <code>print-object</code> or not transcribing that
kind of stuff.</p>

<p><strong>Errors</strong></p>

<p>If an <a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_error.htm" title="ERROR CONDITION"><code>error</code></a> condition is signalled, the error is printed to the
output and no values are returned.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">progn</span></i>
  <span class="paren2">(<span class="code">print <span class="string">"hello"</span></span>)</span>
  <span class="paren2">(<span class="code">error <span class="string">"no greeting"</span></span>)</span></span>)</span>
..
.. "hello" 
.. debugger invoked on SIMPLE-ERROR:
..   no greeting</span></code></pre>

<p>To keep the textual representation somewhat likely to be portable,
the printing is done with <code>(format t &quot;#&lt;~S ~S&gt;&quot; (type-of
error) (princ-to-string error))</code>. <a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_smp_cn.htm" title="SIMPLE-CONDITION CONDITION"><code>simple-condition</code></a>s are formatted to
strings with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_smp_cn.htm" title="SIMPLE-CONDITION-FORMAT-CONTROL FUNCTION"><code>simple-condition-format-control</code></a> and
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_smp_cn.htm" title="SIMPLE-CONDITION-FORMAT-ARGUMENTS FUNCTION"><code>simple-condition-format-arguments</code></a>.</p>

<p><strong>Syntaxes</strong></p>

<p>Finally, a transcript may employ different syntaxes for the output
and values of different forms. When <code>input</code> is read, the syntax for
each form is determined by trying to match all prefixes from all
syntaxes in <code>input-syntaxes</code> against a line. If there are no output or
values for a form in <code>input</code>, then the syntax remains undetermined.</p>

<p>When <code>output</code> is written, the prefixes to be used are looked up in
<code>default-syntax</code> of <code>output-syntaxes</code>, if <code>default-syntax</code> is not <code>nil</code>. If
<code>default-syntax</code> is <code>nil</code>, then the syntax used by the same form in the
<code>input</code> is used or (if that could not be determined) the syntax of the
previous form. If there was no previous form, then the first syntax
if <code>output-syntaxes</code> is used.</p>

<p>To produce a transcript that's executable Lisp code,
use <code>:default-syntax</code> <code>:commented-1:</code></p>

<pre><code><span class="code"><span class="paren1">(<span class="code">make-instance 'some-class</span>)</span>
<span class="comment">;==&gt; #&lt;SOME-CLASS
</span><span class="comment">;--&gt;
</span><span class="comment">;--&gt; end&gt;
</span>
<span class="paren1">(<span class="code">list 1 2</span>)</span>
<span class="comment">;=&gt; (1
</span><span class="comment">;-&gt;    2)</span></span></code></pre>

<p>To translate the above to uncommented syntax,
use <code>:default-syntax</code> <code>:default</code>. If <code>default-syntax</code> is <code>nil</code> (the
default), the same syntax will be used in the output as in the input
as much as possible.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ATRANSCRIBE-CHECK-CONSISTENCY-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*TRANSCRIBE-CHECK-CONSISTENCY*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L226">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*TRANSCRIBE-CHECK-CONSISTENCY*%20VARIABLE" >*transcribe-check-consistency*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>The default value of <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a>'s <code>check-consistency</code> argument.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-2ATRANSCRIBE-SYNTAXES-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*TRANSCRIBE-SYNTAXES*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L173">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*TRANSCRIBE-SYNTAXES*%20VARIABLE" >*transcribe-syntaxes*</a></span></span> <span class="locative-args">((:default (:output &quot;..&quot;) (:no-value &quot;=&gt; ; No value&quot;) (:readable &quot;=&gt;&quot;)
  (:unreadable &quot;==&gt;&quot;) (:unreadable-continuation &quot;--&gt;&quot;))
 (:commented-1 (:output &quot;;..&quot;) (:no-value &quot;;=&gt; ; No value&quot;) (:readable &quot;;=&gt;&quot;)
  (:readable-continuation &quot;;-&gt;&quot;) (:unreadable &quot;;==&gt;&quot;)
  (:unreadable-continuation &quot;;--&gt;&quot;))
 (:commented-2 (:output &quot;;;..&quot;) (:no-value &quot;;;=&gt; ; No value&quot;)
  (:readable &quot;;;=&gt;&quot;) (:readable-continuation &quot;;;-&gt;&quot;) (:unreadable &quot;;;==&gt;&quot;)
  (:unreadable-continuation &quot;;;--&gt;&quot;)))</span></span></p>

<p>The default syntaxes used by <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> for reading and writing
lines containing output and values of an evaluated form.</p>

<p>A syntax is a list of of the form <code>(syntax-id &amp;rest prefixes)</code> where
<code>prefixes</code> is a list of <code>(prefix-id prefix-string)</code> elements. For
example the syntax <code>:commented-1</code> looks like this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><span class="keyword">:commented-1</span>
 <span class="paren2">(<span class="code"><span class="keyword">:output</span> <span class="string">";.."</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:no-value</span> <span class="string">";=&gt;  No value"</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:readable</span> <span class="string">";=&gt;"</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:readable-continuation</span> <span class="string">";-&gt;"</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:unreadable</span> <span class="string">";==&gt;"</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:unreadable-continuation</span> <span class="string">";--&gt;"</span></span>)</span></span>)</span></span></code></pre>

<p>All of the above prefixes must be defined for every syntax except
for <code>:readable-continuation</code>. If that's missing (as in the <code>:default</code>
syntax), then the following value is read with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_rd_rd.htm" title="READ FUNCTION"><code>read</code></a> and printed with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_pr.htm" title="PRIN1 FUNCTION"><code>prin1</code></a> (hence no need to mark up the following lines).</p>

<p>When writing, an extra space is added automatically if the line to
be prefixed is not empty. Similarly, the first space following the
prefix is discarded when reading.</p>

<p>See <code>transcribe</code> for how the actual syntax to be used is selected.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ATRANSCRIPTION-ERROR-20CONDITION-29"></a>
<a id="MGL-PAX:TRANSCRIPTION-ERROR%20CONDITION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1077">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIPTION-ERROR%20CONDITION" >transcription-error</a></span></span> <span class="locative-args">error</span></span></p>

<p>Represents syntactic errors in the <code>source</code> argument
of <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> and also serves as the superclass of
<a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR CONDITION"><code>transcription-consistency-error</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ATRANSCRIPTION-CONSISTENCY-ERROR-20CONDITION-29"></a>
<a id="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1140">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" >transcription-consistency-error</a></span></span> <span class="locative-args">transcription-error</span></span></p>

<p>A common superclass for
<a href="#MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR CONDITION"><code>transcription-output-consistency-error</code></a> and
<a href="#MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR CONDITION"><code>transcription-values-consistency-error</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ATRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR-20CONDITION-29"></a>
<a id="MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR%20CONDITION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1146">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR%20CONDITION" >transcription-output-consistency-error</a></span></span> <span class="locative-args">transcription-consistency-error</span></span></p>

<p>Signaled (with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_cerror.htm" title="CERROR FUNCTION"><code>cerror</code></a>) by <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> when invoked
with <code>:check-consistency</code> and the output of a form is not the same as
what was parsed.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ATRANSCRIPTION-VALUES-CONSISTENCY-ERROR-20CONDITION-29"></a>
<a id="MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR%20CONDITION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1153">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR%20CONDITION" >transcription-values-consistency-error</a></span></span> <span class="locative-args">transcription-consistency-error</span></span></p>

<p>Signaled (with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_cerror.htm" title="CERROR FUNCTION"><code>cerror</code></a>) by <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> when invoked
with <code>:check-consistency</code> and the values of a form are inconsistent
with their parsed representation.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-CONISTENCY-CHECKING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION" title="Transcript API">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION" title="Finer-grained Consistency Checks">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1284">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION">10.4 Transcript Consistency Checking</a></h3>

<p>The main use case for consistency checking is detecting
out-of-date examples in documentation, although using it for writing
tests is also a possiblity. Here, we focus on the former.</p>

<p>When a markdown code block tagged <code>cl-transcript</code> is processed
during <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a>, the code in it is replaced with
the output of with <code>(transcribe &lt;code&gt; nil :update-only t
:check-consistency t)</code>. Suppose we have the following example of the
function <code>greet</code>, that prints <code>hello</code> and returns 7.</p>

<pre><code>```cl-transcript
(greet)
.. hello
=&gt; 7
```
</code></pre>

<p>Now, if we change <code>greet</code> to print or return something else, a
<a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR CONDITION"><code>transcription-consistency-error</code></a> will be signalled during
documentation generation. Then we may fix the documentation or
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/r_contin.htm" title="CONTINUE RESTART"><code>continue</code></a> from the error.</p>

<p>By default, comparisons of previous to current ouput, readable and
unreadable return values are performed with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_stgeq_.htm" title="STRING= FUNCTION"><code>string=</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_equal.htm" title="EQUAL FUNCTION"><code>equal</code></a>, and
<code>string=</code>, respectively, which is great in the simple case.
Non-determinism aside, exact matching becomes brittle as soon as the
notoriously unportable pretty printer is used or when unreadable
objects are printed with their <code>#&lt;&gt;</code> syntax, especially when
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_pr_unr.htm" title="PRINT-UNREADABLE-OBJECT MGL-PAX:MACRO"><code>print-unreadable-object</code></a> is used with <code>:identity t</code>.</p>

<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION" title="Finer-grained Consistency Checks">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1319">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION">10.4.1 Finer-grained Consistency Checks</a></h4>

<p>To get around this problem, consistency checking of output,
readable and unreadable values can be customized individually by
supplying <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> with a <code>check-consistency</code> argument
like <code>((:output &lt;output-check&gt;) (:readable
&lt;readable-check&gt;) (:unreadable &lt;unreadable-check&gt;))</code>. In this case,
<code>&lt;output-check&gt;</code> may be <code>nil</code>, <code>t</code>, or a function designator.</p>

<ul>
<li><p>If it's <code>nil</code> or there is no <code>:output</code> entry in the list, then the
  output is not checked for consistency.</p></li>
<li><p>If it's <code>t</code>, then the outputs are compared with the default,
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_stgeq_.htm" title="STRING= FUNCTION"><code>string=</code></a>.</p></li>
<li><p>If it's a function designator, then it's called with two strings
  and must return whether they are consistent with each other.</p></li>
</ul>

<p>The case of <code>&lt;readable-check&gt;</code> and <code>&lt;unreadable-check&gt;</code> is similar.</p>

<p>Code blocks tagged <code>cl-transcript</code> can take arguments, which they
pass on to <code>transcribe</code>. The following shows how to check only the
output.</p>

<pre><code>```cl-transcript (:check-consistency ((:output t)))
(error &quot;Oh, no.&quot;)
.. debugger invoked on SIMPLE-ERROR:
..   Oh, no.

(make-condition 'simple-error)
==&gt; #&lt;SIMPLE-ERROR {1008A81533}&gt;
</code></pre>

<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-DYNENV-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION" title="Finer-grained Consistency Checks">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION" title="Utilities for Consistency Checking">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1350">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION">10.4.2 Controlling the Dynamic Environment</a></h4>

<p>The dynamic enviroment in which forms in the transcript are
evaluated can be controlled via the <code>:dynenv</code> argument of
<code>cl-transcript</code>.</p>

<pre><code>```cl-transcript (:dynenv my-transcript)
...
```
</code></pre>

<p>In this case, instead of calling <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> directly, the call will
be wrapped in a function of no arguments and passed to the function
<code>my-transcript</code>, which establishes the desired dynamic environment
and calls its argument. The following definition of <code>my-transcript</code>
simply packages up oft-used settings to <code>transcribe</code>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> my-transcript <span class="paren2">(<span class="code">fn</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code"><span class="special">*transcribe-check-consistency*</span>
          '<span class="paren5">(<span class="code"><span class="paren6">(<span class="code"><span class="keyword">:output</span> my-transcript-output=</span>)</span>
            <span class="paren6">(<span class="code"><span class="keyword">:readable</span> equal</span>)</span>
            <span class="paren6">(<span class="code"><span class="keyword">:unreadable</span> nil</span>)</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">funcall fn</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> my-transcript-output= <span class="paren2">(<span class="code">string1 string2</span>)</span>
  <span class="paren2">(<span class="code">string= <span class="paren3">(<span class="code">my-transcript-normalize-output string1</span>)</span>
           <span class="paren3">(<span class="code">my-transcript-normalize-output string2</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> my-transcript-normalize-output <span class="paren2">(<span class="code">string</span>)</span>
  <span class="paren2">(<span class="code">squeeze-whitespace <span class="paren3">(<span class="code">delete-trailing-whitespace <span class="paren4">(<span class="code">delete-comments string</span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<p>A more involved solution could rebind global variables set in
transcripts, unintern symbols created or even create a temporary
package for evaluation.</p>

<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8593;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION" title="Utilities for Consistency Checking">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1388">&#955;</a></span></span></p>

<h4><a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION">10.4.3 Utilities for Consistency Checking</a></h4>

<p><a id="x-28MGL-PAX-3ASQUEEZE-WHITESPACE-20FUNCTION-29"></a>
<a id="MGL-PAX:SQUEEZE-WHITESPACE%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1394">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:SQUEEZE-WHITESPACE%20FUNCTION" >squeeze-whitespace</a></span></span> <span class="locative-args">string</span></span></p>

<p>Replace consecutive whitespace characters with a single space in
<code>string</code>. This is useful to do undo the effects of pretty printing
when building comparison functions for <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADELETE-TRAILING-WHITESPACE-20FUNCTION-29"></a>
<a id="MGL-PAX:DELETE-TRAILING-WHITESPACE%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1409">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DELETE-TRAILING-WHITESPACE%20FUNCTION" >delete-trailing-whitespace</a></span></span> <span class="locative-args">string</span></span></p>

<p>Delete whitespace characters after the last non-whitespace
character in each line in <code>string</code>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADELETE-COMMENTS-20FUNCTION-29"></a>
<a id="MGL-PAX:DELETE-COMMENTS%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/transcribe/transcribe.lisp#L1420">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DELETE-COMMENTS%20FUNCTION" >delete-comments</a></span></span> <span class="locative-args">string &amp;key (pattern &quot;;&quot;)</span></span></p>

<p>For each line in <code>string</code> delete the rest of the line after and
including the first occurrence of <code>pattern</code>. On changed lines, delete
trailing whitespace too. Let's define a comparison function:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> string=/no-comments <span class="paren2">(<span class="code">string1 string2</span>)</span>
  <span class="paren2">(<span class="code">string= <span class="paren3">(<span class="code">delete-comments string1</span>)</span> <span class="paren3">(<span class="code">delete-comments string2</span>)</span></span>)</span></span>)</span></span></code></pre>

<p>And use it to check consistency of output:</p>

<pre><code>```cl-transcript (:check-consistency ((:output string=/no-comments)))
(format t &quot;hello~%world&quot;)
.. hello     ; This is the first line.
.. world     ; This is the second line.
```
</code></pre>

<p>Just to make sure the above example works, here it is without the being
quoted.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">format t <span class="string">"hello~%world"</span></span>)</span>
.. hello     <span class="comment">; This is the first line.
</span>.. world     <span class="comment">; This is the second line.</span></span></code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40EXTENSION-API-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION" title="Utilities for Consistency Checking">&#8592;</a> <a href="#MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@NEW-OBJECT-TYPES%20MGL-PAX:SECTION" title="Adding New Object Types">&#8594;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L5">&#955;</a></span></span></p>

<h2><a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION">11 Writing Extensions</a></h2>

<p><a id="x-28MGL-PAX-3A-40NEW-OBJECT-TYPES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@NEW-OBJECT-TYPES%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@REFERENCE-BASED-EXTENSIONS%20MGL-PAX:SECTION" title="Reference Based Extensions">&#8594;</a> <a href="#MGL-PAX:@NEW-OBJECT-TYPES%20MGL-PAX:SECTION" title="Adding New Object Types">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L14">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@NEW-OBJECT-TYPES%20MGL-PAX:SECTION">11.1 Adding New Object Types</a></h3>

<p>One may wish to make the <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> function and <code>M-.</code> navigation
work with new object types. <code>document</code> can be extended by defining a
<a href="#MGL-PAX:DOCUMENT-OBJECT%20GENERIC-FUNCTION" title="MGL-PAX:DOCUMENT-OBJECT GENERIC-FUNCTION"><code>document-object</code></a> method specialized on that type. To allow these
objects to be referenced from <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>, <a href="#MGL-PAX:LOCATE-OBJECT%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-OBJECT GENERIC-FUNCTION"><code>locate-object</code></a> method is to
be defined. If there are multiple equivalent references possible for
the same thing, then <a href="#MGL-PAX:CANONICAL-REFERENCE%20GENERIC-FUNCTION" title="MGL-PAX:CANONICAL-REFERENCE GENERIC-FUNCTION"><code>canonical-reference</code></a> must be specialized. For
the <a href="#MGL-PAX:DOCSTRING%20MGL-PAX:LOCATIVE" title="MGL-PAX:DOCSTRING MGL-PAX:LOCATIVE"><code>docstring</code></a> locative to work on the new type, a <code>docstring</code> method
is needed. For <code>M-.</code> <a href="#MGL-PAX:FIND-SOURCE%20GENERIC-FUNCTION" title="MGL-PAX:FIND-SOURCE GENERIC-FUNCTION"><code>find-source</code></a> can be specialized. Finally,
<a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a> may be overridden if exporting does not
makes sense. Here is how all this is done for <a href="#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system:</code></a></p>

<p><a id="x-28MGL-PAX-3AASDF-EXAMPLE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28ASDF-2FSYSTEM-3ASYSTEM-20MGL-PAX-3ALOCATIVE-29-20-3AEND-20-28MGL-PAX-3A-3AEND-OF-ASDF-EXAMPLE-20VARIABLE-29-29-20-3AHEADER-NL-20-22-60-60-60-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="MGL-PAX:ASDF-EXAMPLE%20%28MGL-PAX:INCLUDE%20%28:START%20%28ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE%29%20:END%20%28MGL-PAX::END-OF-ASDF-EXAMPLE%20VARIABLE%29%29%20:HEADER-NL%20%22%60%60%60%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-locative-type</span></i> asdf:system <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"Refers to an asdf system. The generated documentation will include
  meta information extracted from the system definition. This also
  serves as an example of a symbol that's not accessible in the
  current package and consequently is not exported.

  ASDF:SYSTEM is not EXPORTABLE-LOCATIVE-TYPE-P."</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> locate-object <span class="paren2">(<span class="code">name <span class="paren3">(<span class="code">locative-type <span class="paren4">(<span class="code">eql 'asdf:system</span>)</span></span>)</span>
                          locative-args</span>)</span>
  <span class="paren2">(<span class="code">or <span class="paren3">(<span class="code">and <span class="paren4">(<span class="code">endp locative-args</span>)</span>
           <span class="comment">;; ASDF:FIND-SYSTEM is slow as hell.
</span>           <span class="paren4">(<span class="code">asdf:find-system <span class="paren5">(<span class="code">string-downcase <span class="paren6">(<span class="code">string name</span>)</span></span>)</span> nil</span>)</span></span>)</span>
      <span class="paren3">(<span class="code">locate-error <span class="string">"~S does not name an asdf system."</span> name</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> canonical-reference <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">system asdf:system</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">make-reference <span class="paren3">(<span class="code">character-string <span class="paren4">(<span class="code">slot-value system 'asdf::name</span>)</span></span>)</span>
                  'asdf:system</span>)</span></span>)</span>

<span class="comment">;;; For testing
</span><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*omit-asdf-slots*</span> nil</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> document-object <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">system asdf:system</span>)</span> stream</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">with-heading</span></i> <span class="paren3">(<span class="code">stream system
                        <span class="paren4">(<span class="code">format nil <span class="string">"~A </span><span class="string">\\</span><span class="string">ASDF System"</span>
                                <span class="paren5">(<span class="code">string-upcase
                                 <span class="paren6">(<span class="code">slot-value system 'asdf::name</span>)</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">flet</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">foo <span class="paren6">(<span class="code">name fn &amp;key type</span>)</span>
             <span class="paren6">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren1">(<span class="code"><span class="paren2">(<span class="code">value <span class="paren3">(<span class="code">funcall fn system</span>)</span></span>)</span></span>)</span>
               <span class="paren1">(<span class="code">when <span class="paren2">(<span class="code">and value <span class="paren3">(<span class="code">not <span class="paren4">(<span class="code">equal value <span class="string">""</span></span>)</span></span>)</span></span>)</span>
                 <span class="paren2">(<span class="code">case type
                   <span class="paren3">(<span class="code"><span class="paren4">(<span class="code"><span class="keyword">:link</span></span>)</span>
                    <span class="paren4">(<span class="code">format stream <span class="string">"- ~A: [~A](~A)~%"</span> name value value</span>)</span></span>)</span>
                   <span class="paren3">(<span class="code"><span class="paren4">(<span class="code"><span class="keyword">:mailto</span></span>)</span>
                    <span class="paren4">(<span class="code">format stream <span class="string">"- ~A: [~A](mailto:~A)~%"</span>
                            name value value</span>)</span></span>)</span>
                   <span class="paren3">(<span class="code"><span class="paren4">(<span class="code"><span class="keyword">:source-control</span></span>)</span>
                    <span class="paren4">(<span class="code">format stream <span class="string">"- ~A: [~A](~A)"</span>
                            name <span class="paren5">(<span class="code">first value</span>)</span> <span class="paren5">(<span class="code">second value</span>)</span></span>)</span></span>)</span>
                   <span class="paren3">(<span class="code"><span class="paren4">(<span class="code"><span class="keyword">:docstring</span></span>)</span>
                    <span class="paren4">(<span class="code">format stream <span class="string">"- ~A: "</span> name</span>)</span>
                    <span class="paren4">(<span class="code">document-docstring value stream
                                        <span class="keyword">:indentation</span> <span class="string">"  "</span>
                                        <span class="keyword">:exclude-first-line-p</span> t
                                        <span class="keyword">:paragraphp</span> nil</span>)</span>
                    <span class="paren4">(<span class="code">terpri stream</span>)</span></span>)</span>
                   <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">nil</span>)</span>
                    <span class="paren4">(<span class="code">format stream <span class="string">"- ~A: ~A~%"</span> name value</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">unless <span class="special">*omit-asdf-slots*</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Version"</span> 'asdf/component:component-version</span>)</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Description"</span> 'asdf/system:system-description <span class="keyword">:type</span> <span class="keyword">:docstring</span></span>)</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Long Description"</span> 'asdf/system:system-long-description
             <span class="keyword">:type</span> <span class="keyword">:docstring</span></span>)</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Licence"</span> 'asdf/system:system-licence</span>)</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Author"</span> 'asdf/system:system-author</span>)</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Maintainer"</span> 'asdf/system:system-maintainer</span>)</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Mailto"</span> 'asdf/system:system-mailto <span class="keyword">:type</span> <span class="keyword">:mailto</span></span>)</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Homepage"</span> 'asdf/system:system-homepage <span class="keyword">:type</span> <span class="keyword">:link</span></span>)</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Bug tracker"</span> 'asdf/system:system-bug-tracker <span class="keyword">:type</span> <span class="keyword">:link</span></span>)</span>
        <span class="paren5">(<span class="code">foo <span class="string">"Source control"</span> 'asdf/system:system-source-control
             <span class="keyword">:type</span> <span class="keyword">:source-control</span></span>)</span>
        <span class="paren5">(<span class="code">terpri stream</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> docstring <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">system asdf:system</span>)</span></span>)</span>
  nil</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> find-source <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">system asdf:system</span>)</span></span>)</span>
  `<span class="paren2">(<span class="code"><span class="keyword">:location</span>
    <span class="paren3">(<span class="code"><span class="keyword">:file</span> ,<span class="paren4">(<span class="code">namestring <span class="paren5">(<span class="code">asdf/system:system-source-file system</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:position</span> 1</span>)</span>
    <span class="paren3">(<span class="code"><span class="keyword">:snippet</span> <span class="string">""</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">add-locative-to-source-search-list 'asdf:system</span>)</span>
</span></code></pre>

<p><a id="x-28MGL-PAX-3ADEFINE-LOCATIVE-TYPE-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L41">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" >define-locative-type</a></span></span> <span class="locative-args">locative-type lambda-list &amp;body docstring</span></span></p>

<p>Declare <code>locative-type</code> as a <a href="#MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE" title="MGL-PAX:LOCATIVE MGL-PAX:LOCATIVE"><code>locative</code></a>. One gets two
things in return: first, a place to document the format and
semantics of <code>locative-type</code> (in <code>lambda-list</code> and <code>docstring</code>); second,
being able to reference <code>(locative-type locative)</code>. For example, if
you have:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-locative-type</span></i> variable <span class="paren2">(<span class="code">&amp;optional initform</span>)</span>
  <span class="string">"Dummy docstring."</span></span>)</span></span></code></pre>

<p>then <code>(variable locative)</code> refers to this form.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADEFINE-LOCATIVE-ALIAS-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFINE-LOCATIVE-ALIAS%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L61">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFINE-LOCATIVE-ALIAS%20MGL-PAX:MACRO" >define-locative-alias</a></span></span> <span class="locative-args">alias locative-type</span></span></p>

<p>Define <code>alias</code> as a locative equivalent to <code>locative-type</code> (both
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL TYPE"><code>symbol</code></a>s). The following example shows how to make docstrings read
more naturally by defining an alias.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> my-string <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code"></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defgeneric</span></i> my-string <span class="paren2">(<span class="code">obj</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:documentation</span> <span class="string">"Convert OBJ to MY-STRING."</span></span>)</span></span>)</span>

<span class="comment">;;; This version of FOO has a harder to read docstring because
</span><span class="comment">;;; it needs to disambiguate the MY-STRING reference.
</span><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren2">(<span class="code">x</span>)</span>
  <span class="string">"FOO takes and argument X, a [MY-STRING][class] object."</span></span>)</span>

<span class="comment">;;; Define OBJECT as an alias for the CLASS locative.
</span><span class="paren1">(<span class="code"><i><span class="symbol">define-locative-alias</span></i> object class</span>)</span>

<span class="comment">;;; Note how no explicit link is needed anymore.
</span><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren2">(<span class="code">x</span>)</span>
  <span class="string">"FOO takes an argument X, a MY-CLASS object."</span></span>)</span></span></code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-OBJECT-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:LOCATE-OBJECT%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L100">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-OBJECT%20GENERIC-FUNCTION" >locate-object</a></span></span> <span class="locative-args">object locative-type locative-args</span></span></p>

<p>Return the object to which <code>object</code> and the locative
refer. Signal a <a href="#MGL-PAX:LOCATE-ERROR%20CONDITION" title="MGL-PAX:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition by calling the <a href="#MGL-PAX:LOCATE-ERROR%20FUNCTION" title="MGL-PAX:LOCATE-ERROR FUNCTION"><code>locate-error</code></a>
function if the lookup fails. If a <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a> is returned, then it
must be canonical in the sense that calling <a href="#MGL-PAX:CANONICAL-REFERENCE%20GENERIC-FUNCTION" title="MGL-PAX:CANONICAL-REFERENCE GENERIC-FUNCTION"><code>canonical-reference</code></a> on
it will return the same reference. Don't call this function
directly. It serves only to extend <a href="#MGL-PAX:LOCATE%20FUNCTION" title="MGL-PAX:LOCATE FUNCTION"><code>locate</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-ERROR-20FUNCTION-29"></a>
<a id="MGL-PAX:LOCATE-ERROR%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L115">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-ERROR%20FUNCTION" >locate-error</a></span></span> <span class="locative-args">&amp;rest format-and-args</span></span></p>

<p>Call this function to signal a <a href="#MGL-PAX:LOCATE-ERROR%20CONDITION" title="MGL-PAX:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition from a
<a href="#MGL-PAX:LOCATE-OBJECT%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-OBJECT GENERIC-FUNCTION"><code>locate-object</code></a> method. <code>format-and-args</code> contains a format string and
args suitable for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_format.htm" title="FORMAT FUNCTION"><code>format</code></a> from which the <a href="#MGL-PAX:LOCATE-ERROR-MESSAGE%20%28MGL-PAX:READER%20MGL-PAX:LOCATE-ERROR%29" title="MGL-PAX:LOCATE-ERROR-MESSAGE (MGL-PAX:READER MGL-PAX:LOCATE-ERROR)"><code>locate-error-message</code></a> is
constructed. If <code>format-and-args</code> is <code>nil</code>, then the message will be <code>nil</code>
too.</p>

<p><a href="#MGL-PAX:LOCATE-ERROR-OBJECT%20%28MGL-PAX:READER%20MGL-PAX:LOCATE-ERROR%29" title="MGL-PAX:LOCATE-ERROR-OBJECT (MGL-PAX:READER MGL-PAX:LOCATE-ERROR)"><code>locate-error-object</code></a> and <a href="#MGL-PAX:LOCATE-ERROR-LOCATIVE%20%28MGL-PAX:READER%20MGL-PAX:LOCATE-ERROR%29" title="MGL-PAX:LOCATE-ERROR-LOCATIVE (MGL-PAX:READER MGL-PAX:LOCATE-ERROR)"><code>locate-error-locative</code></a> are populated
automatically.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ACANONICAL-REFERENCE-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:CANONICAL-REFERENCE%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L130">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:CANONICAL-REFERENCE%20GENERIC-FUNCTION" >canonical-reference</a></span></span> <span class="locative-args">object</span></span></p>

<p>Return a <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a> that <a href="#MGL-PAX:RESOLVE%20FUNCTION" title="MGL-PAX:RESOLVE FUNCTION"><code>resolve</code></a>s to <code>object</code>, or
return <code>nil</code> if this operation is not defined for <code>object</code>. Its
<a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a> is <a href="#MGL-PAX:LOCATE-CANONICAL-REFERENCE%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-CANONICAL-REFERENCE GENERIC-FUNCTION"><code>locate-canonical-reference</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ACOLLECT-REACHABLE-OBJECTS-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:COLLECT-REACHABLE-OBJECTS%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L142">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:COLLECT-REACHABLE-OBJECTS%20GENERIC-FUNCTION" >collect-reachable-objects</a></span></span> <span class="locative-args">object</span></span></p>

<p>Return a list of objects representing all things to
be documented in a <code>(document object)</code> call. For a <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>) this is
simply the union of references reachable from references in its
<a href="#MGL-PAX:SECTION-ENTRIES%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" title="MGL-PAX:SECTION-ENTRIES (MGL-PAX:READER MGL-PAX:SECTION)"><code>section-entries</code></a>. The returned objects can be anything provided that
<a href="#MGL-PAX:CANONICAL-REFERENCE%20GENERIC-FUNCTION" title="MGL-PAX:CANONICAL-REFERENCE GENERIC-FUNCTION"><code>canonical-reference</code></a> works on them. The list need not include <code>object</code>
itself.</p>

<p>One only has to specialize this for new container-like objects. Its
<a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a> is <a href="#MGL-PAX:LOCATE-AND-COLLECT-REACHABLE-OBJECTS%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-AND-COLLECT-REACHABLE-OBJECTS GENERIC-FUNCTION"><code>locate-and-collect-reachable-objects</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADOCUMENT-OBJECT-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:DOCUMENT-OBJECT%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L157">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENT-OBJECT%20GENERIC-FUNCTION" >document-object</a></span></span> <span class="locative-args">object stream</span></span></p>

<p>Write <code>object</code> (and its references recursively) in
<a href="#MGL-PAX:*FORMAT*%20VARIABLE" title="MGL-PAX:*FORMAT* VARIABLE"><code>*format*</code></a> to <code>stream</code> in markdown format. Add methods specializing on
<code>object</code> to customize the output of <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>. Its <a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a>
is <a href="#MGL-PAX:LOCATE-AND-DOCUMENT%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-AND-DOCUMENT GENERIC-FUNCTION"><code>locate-and-document</code></a>. This function is for extension, don't call
it directly.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADOCSTRING-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:DOCSTRING%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L164">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCSTRING%20GENERIC-FUNCTION" >docstring</a></span></span> <span class="locative-args">object</span></span></p>

<p>Return the docstring from the definition of <code>object</code>
with <a href="#MGL-PAX:@MARKDOWN-INDENTATION%20MGL-PAX:SECTION" title="Indentation">leading indentation stripped</a>. This
function serves a similar purpose as <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_docume.htm" title="DOCUMENTATION GENERIC-FUNCTION"><code>cl:documentation</code></a>, but it works
with first-class objects when there is one for the corresponding
definition, and with <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a>s when there is not. Its
<a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a> is <a href="#MGL-PAX:LOCATE-DOCSTRING%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-DOCSTRING GENERIC-FUNCTION"><code>locate-docstring</code></a>.</p>

<p><code>docstring</code> is used in the implementation of the <a href="#MGL-PAX:DOCSTRING%20MGL-PAX:LOCATIVE" title="MGL-PAX:DOCSTRING MGL-PAX:LOCATIVE"><code>docstring</code></a> locative.
Some things such as <a href="#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a>s and <code>declaration</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/d_declar.htm" title="DECLARATION DECLARATION"><code>0</code></a> <a href="#DECLARATION%20MGL-PAX:LOCATIVE" title="DECLARATION MGL-PAX:LOCATIVE"><code>1</code></a>)s have no
docstrings. Notably <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>)s don't provide access to docstrings.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AFIND-SOURCE-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:FIND-SOURCE%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L185">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:FIND-SOURCE%20GENERIC-FUNCTION" >find-source</a></span></span> <span class="locative-args">object</span></span></p>

<p>Return the Swank source location for <code>object</code>. It
is called by <code>locate-definitions-for-emacs</code>, which lies behind the
<code>M-.</code> extension (see <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating Sources in Emacs</a>). Its
<a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a> is <a href="#MGL-PAX:LOCATE-AND-FIND-SOURCE%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-AND-FIND-SOURCE GENERIC-FUNCTION"><code>locate-and-find-source</code></a>.</p>

<p>If successful, the return value should look like one of these:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><span class="keyword">:LOCATION</span>
  <span class="paren2">(<span class="code"><span class="keyword">:FILE</span> <span class="string">"/home/melisgl/own/mgl-pax/src/pax.lisp"</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:POSITION</span> 3303</span>)</span> NIL</span>)</span>
<span class="paren1">(<span class="code"><span class="keyword">:LOCATION</span>
  <span class="paren2">(<span class="code"><span class="keyword">:FILE</span> <span class="string">"/home/melisgl/own/mgl-pax/src/pax.lisp"</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:OFFSET</span> 1 3303</span>)</span> NIL</span>)</span>
<span class="paren1">(<span class="code"><span class="keyword">:LOCATION</span>
  <span class="paren2">(<span class="code"><span class="keyword">:FILE</span> <span class="string">"/home/melisgl/own/mgl-pax/src/pax.lisp"</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:FUNCTION-NAME</span> <span class="string">"FOO"</span></span>)</span> NIL</span>)</span></span></code></pre>

<p>The <code>nil</code> above is the source snippet, which is optional. Note that
position 1 is the first character in <code>:file</code>. If unsuccessful, the
return value is like:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><span class="keyword">:error</span> <span class="string">"Unknown source location for SOMETHING"</span></span>)</span></span></code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3AEXPORTABLE-REFERENCE-P-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L232">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION" >exportable-reference-p</a></span></span> <span class="locative-args">package symbol locative-type locative-args</span></span></p>

<p>Return true iff <code>symbol</code> is to be exported from
<code>package</code> when it occurs in a <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> as a reference with
<code>locative-type</code> and <code>locative-args</code>. <code>symbol</code> is <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_s.htm" title="FIND-SYMBOL FUNCTION">accessible</a>
in <code>package</code>.</p>

<p>The default method calls <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a> with
<code>locative-type</code> and ignores the other arguments.</p>

<p>For example, to prevent <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>)s from being export from the <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM"><code>mgl-pax</code></a>
package, the following method is defined.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> exportable-reference-p <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">package <span class="paren4">(<span class="code">eql <span class="paren5">(<span class="code">find-package 'mgl-pax</span>)</span></span>)</span></span>)</span>
                                   symbol <span class="paren3">(<span class="code">locative-type <span class="paren4">(<span class="code">eql 'section</span>)</span></span>)</span>
                                   locative-args</span>)</span>
  nil</span>)</span></span></code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3AEXPORTABLE-LOCATIVE-TYPE-P-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L266">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" >exportable-locative-type-p</a></span></span> <span class="locative-args">locative-type</span></span></p>

<p>Return true iff symbols in references with
<code>locative-type</code> are to be exported by default when they occur in a
<a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>. The default method returns <code>t</code>, while the methods for
<code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>), <code>glossary-term</code>(<a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>0</code></a> <a href="#MGL-PAX:GLOSSARY-TERM%20MGL-PAX:LOCATIVE" title="MGL-PAX:GLOSSARY-TERM MGL-PAX:LOCATIVE"><code>1</code></a>), <code>package</code>(<a href="#PACKAGE%20MGL-PAX:LOCATIVE" title="PACKAGE MGL-PAX:LOCATIVE"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE TYPE"><code>1</code></a>), <a href="#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a>, <code>method</code>(<a href="#METHOD%20MGL-PAX:LOCATIVE" title="METHOD MGL-PAX:LOCATIVE"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_method.htm" title="METHOD TYPE"><code>1</code></a>) and <a href="#MGL-PAX:INCLUDE%20MGL-PAX:LOCATIVE" title="MGL-PAX:INCLUDE MGL-PAX:LOCATIVE"><code>include</code></a>
return <code>nil</code>.</p>

<p>This function is called by the default method of
<a href="#MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-REFERENCE-P GENERIC-FUNCTION"><code>exportable-reference-p</code></a> to decide what symbols <code>defsection</code> shall
export when its <code>export</code> argument is true.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40REFERENCE-BASED-EXTENSIONS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@REFERENCE-BASED-EXTENSIONS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@NEW-OBJECT-TYPES%20MGL-PAX:SECTION" title="Adding New Object Types">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION" title="Extending `document`">&#8594;</a> <a href="#MGL-PAX:@REFERENCE-BASED-EXTENSIONS%20MGL-PAX:SECTION" title="Reference Based Extensions">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L227">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@REFERENCE-BASED-EXTENSIONS%20MGL-PAX:SECTION">11.2 Reference Based Extensions</a></h3>

<p>Let's see how to extend <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> and <code>M-.</code> navigation if there
is no first-class object to represent the definition of interest.
Recall that <a href="#MGL-PAX:LOCATE%20FUNCTION" title="MGL-PAX:LOCATE FUNCTION"><code>locate</code></a> returns a <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a> object in this case. The
generic functions that we have specialized in <a href="#MGL-PAX:@NEW-OBJECT-TYPES%20MGL-PAX:SECTION" title="Adding New Object Types">Adding New Object Types</a> have
<a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a>s, which can be specialized based on
<a href="#MGL-PAX:LOCATIVE-TYPE%20FUNCTION" title="MGL-PAX:LOCATIVE-TYPE FUNCTION"><code>locative-type</code></a>. Here is how the <a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> locative is defined:</p>

<p><a id="x-28MGL-PAX-3AVARIABLE-EXAMPLE-20-28MGL-PAX-3AINCLUDE-20-28-3ASTART-20-28VARIABLE-20MGL-PAX-3ALOCATIVE-29-20-3AEND-20-28MGL-PAX-3A-3AEND-OF-VARIABLE-EXAMPLE-20VARIABLE-29-29-20-3AHEADER-NL-20-22-60-60-60-22-20-3AFOOTER-NL-20-22-60-60-60-22-29-29"></a>
<a id="MGL-PAX:VARIABLE-EXAMPLE%20%28MGL-PAX:INCLUDE%20%28:START%20%28VARIABLE%20MGL-PAX:LOCATIVE%29%20:END%20%28MGL-PAX::END-OF-VARIABLE-EXAMPLE%20VARIABLE%29%29%20:HEADER-NL%20%22%60%60%60%22%20:FOOTER-NL%20%22%60%60%60%22%29"></a></p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-locative-type</span></i> variable <span class="paren2">(<span class="code">&amp;optional initform</span>)</span>
  <span class="string">""</span><span class="string">"Refers to a global special variable. INITFORM, or if not specified,
  the global value of the variable is included in the documentation.

  ```
  ;;; A REFERENCE is returned because there is no such type as VARIABLE.
  (locate '*FORMAT* 'variable)
  ==&gt; #&lt;REFERENCE *FORMAT* VARIABLE&gt;
  ```

  For the output of `(DOCUMENT (MAKE-REFERENCE '*FORMAT* 'VARIABLE))`,
  see *FORMAT*. Note that *FORMAT* is unbound. If the variable is
  BOUNDP, then its _current_ value is included in the documentation.
  See *DOCUMENT-LINK-CODE* for an example output. To override the
  current value, `INITFORM` may be provided. This is particulary
  useful if the value of the variable is something undesirable such as
  `</span><span class="string">\\</span><span class="string">#&lt;MY-CLASS {100171ED93}&gt;`."</span><span class="string">""</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> locate-object <span class="paren2">(<span class="code">symbol <span class="paren3">(<span class="code">locative-type <span class="paren4">(<span class="code">eql 'variable</span>)</span></span>)</span> locative-args</span>)</span>
  <span class="paren2">(<span class="code">unless <span class="paren3">(<span class="code">&lt;= <span class="paren4">(<span class="code">length locative-args</span>)</span> 1</span>)</span>
    <span class="paren3">(<span class="code">locate-error <span class="string">"The lambda list of the VARIABLE locative is ~
                   (&amp;OPTIONAL INITFORM)."</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">make-reference symbol <span class="paren3">(<span class="code">cons locative-type locative-args</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> locate-and-document <span class="paren2">(<span class="code">symbol <span class="paren3">(<span class="code">locative-type <span class="paren4">(<span class="code">eql 'variable</span>)</span></span>)</span>
                                locative-args stream</span>)</span>
  <span class="paren2">(<span class="code">destructuring-bind <span class="paren3">(<span class="code">&amp;optional <span class="paren4">(<span class="code">initform nil initformp</span>)</span></span>)</span> locative-args
    <span class="paren3">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">arglist <span class="paren6">(<span class="code">multiple-value-bind <span class="paren1">(<span class="code">value unboundp</span>)</span>
                       <span class="paren1">(<span class="code">symbol-global-value symbol</span>)</span>
                     <span class="paren1">(<span class="code">when <span class="paren2">(<span class="code">or initformp <span class="paren3">(<span class="code">not unboundp</span>)</span></span>)</span>
                       <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code"><span class="special">*print-pretty*</span> t</span>)</span></span>)</span>
                         <span class="paren3">(<span class="code">prin1-to-markdown <span class="paren4">(<span class="code"><i><span class="symbol">if</span></i> initformp
                                                initform
                                                value</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
      <span class="paren4">(<span class="code">documenting-reference <span class="paren5">(<span class="code">stream <span class="keyword">:arglist</span> arglist</span>)</span>
        <span class="paren5">(<span class="code">document-docstring <span class="paren6">(<span class="code">documentation* symbol 'variable</span>)</span> stream</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> locate-docstring <span class="paren2">(<span class="code">symbol <span class="paren3">(<span class="code">locative-type <span class="paren4">(<span class="code">eql 'variable</span>)</span></span>)</span>
                             locative-args</span>)</span>
  <span class="paren2">(<span class="code">declare <span class="paren3">(<span class="code">ignore locative-args</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">documentation* symbol 'variable</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> locate-and-find-source <span class="paren2">(<span class="code">symbol <span class="paren3">(<span class="code">locative-type <span class="paren4">(<span class="code">eql 'variable</span>)</span></span>)</span>
                                   locative-args</span>)</span>
  <span class="paren2">(<span class="code">declare <span class="paren3">(<span class="code">ignore locative-args</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">find-definition symbol 'variable</span>)</span></span>)</span>
</span></code></pre>

<p><a id="x-28MGL-PAX-3A-40REFERENCE-DELEGATE-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L253">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" >reference delegate</a></span></span></span></p>

<p><a href="#MGL-PAX:CANONICAL-REFERENCE%20GENERIC-FUNCTION" title="MGL-PAX:CANONICAL-REFERENCE GENERIC-FUNCTION"><code>canonical-reference</code></a>, <a href="#MGL-PAX:COLLECT-REACHABLE-OBJECTS%20GENERIC-FUNCTION" title="MGL-PAX:COLLECT-REACHABLE-OBJECTS GENERIC-FUNCTION"><code>collect-reachable-objects</code></a>, <a href="#MGL-PAX:DOCUMENT-OBJECT%20GENERIC-FUNCTION" title="MGL-PAX:DOCUMENT-OBJECT GENERIC-FUNCTION"><code>document-object</code></a>,
<a href="#MGL-PAX:DOCSTRING%20GENERIC-FUNCTION" title="MGL-PAX:DOCSTRING GENERIC-FUNCTION"><code>docstring</code></a>, and <a href="#MGL-PAX:FIND-SOURCE%20GENERIC-FUNCTION" title="MGL-PAX:FIND-SOURCE GENERIC-FUNCTION"><code>find-source</code></a> delegate dealing with
<a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>references</code></a> to another generic function, one each, which is called
their reference delegate. Each of these delegator functions invokes
its delegate when a <code>reference</code> is passed to it (as its <code>object</code>
argument), or there is no method specialized for its arguments, in
which case it uses the <code>canonical-reference</code>.</p>

<p>The net effect is that is that it is sufficient to specialize either
the delegator for a first-class object or the delegate for a new
locative type.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-CANONICAL-REFERENCE-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:LOCATE-CANONICAL-REFERENCE%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L288">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-CANONICAL-REFERENCE%20GENERIC-FUNCTION" >locate-canonical-reference</a></span></span> <span class="locative-args">object locative-type locative-args</span></span></p>

<p>This is the <a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a> of
<a href="#MGL-PAX:CANONICAL-REFERENCE%20GENERIC-FUNCTION" title="MGL-PAX:CANONICAL-REFERENCE GENERIC-FUNCTION"><code>canonical-reference</code></a>. The default method calls <a href="#MGL-PAX:LOCATE-OBJECT%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-OBJECT GENERIC-FUNCTION"><code>locate-object</code></a> with the
three arguments. If <code>locate-object</code> returns a <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a>, then that's
taken to be the canonical reference and is returned, else
<code>canonical-reference</code> is invoked with the returned object.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-AND-COLLECT-REACHABLE-OBJECTS-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:LOCATE-AND-COLLECT-REACHABLE-OBJECTS%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L315">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-AND-COLLECT-REACHABLE-OBJECTS%20GENERIC-FUNCTION" >locate-and-collect-reachable-objects</a></span></span> <span class="locative-args">object locative-type locative-args</span></span></p>

<p>This is the <a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a> of
<a href="#MGL-PAX:COLLECT-REACHABLE-OBJECTS%20GENERIC-FUNCTION" title="MGL-PAX:COLLECT-REACHABLE-OBJECTS GENERIC-FUNCTION"><code>collect-reachable-objects</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-AND-DOCUMENT-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:LOCATE-AND-DOCUMENT%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L326">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-AND-DOCUMENT%20GENERIC-FUNCTION" >locate-and-document</a></span></span> <span class="locative-args">object locative-type locative-args stream</span></span></p>

<p>This is the <a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a> of <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-DOCSTRING-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:LOCATE-DOCSTRING%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L339">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-DOCSTRING%20GENERIC-FUNCTION" >locate-docstring</a></span></span> <span class="locative-args">object locative-type locative-args</span></span></p>

<p>This is the <a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a> of <a href="#MGL-PAX:DOCSTRING%20GENERIC-FUNCTION" title="MGL-PAX:DOCSTRING GENERIC-FUNCTION"><code>docstring</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ALOCATE-AND-FIND-SOURCE-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:LOCATE-AND-FIND-SOURCE%20GENERIC-FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L359">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATE-AND-FIND-SOURCE%20GENERIC-FUNCTION" >locate-and-find-source</a></span></span> <span class="locative-args">object locative-type locative-args</span></span></p>

<p>This is the <a href="#MGL-PAX:@REFERENCE-DELEGATE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE-DELEGATE MGL-PAX:GLOSSARY-TERM">reference delegate</a> of <a href="#MGL-PAX:FIND-SOURCE%20GENERIC-FUNCTION" title="MGL-PAX:FIND-SOURCE GENERIC-FUNCTION"><code>find-source</code></a>.</p></li>
</ul>

<p>We have covered the basic building blocks of reference based
extensions. Now let's see how the obscure
<a href="#MGL-PAX:DEFINE-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-SYMBOL-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-symbol-locative-type</code></a> and
<a href="#MGL-PAX:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-definer-for-symbol-locative-type</code></a> macros work together to
simplify the common task of associating definition and documentation
with symbols in a certain context.</p>

<p><a id="x-28MGL-PAX-3ADEFINE-SYMBOL-LOCATIVE-TYPE-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFINE-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L380">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFINE-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" >define-symbol-locative-type</a></span></span> <span class="locative-args">locative-type lambda-list &amp;body docstring</span></span></p>

<p>Similar to <a href="#MGL-PAX:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-locative-type</code></a> but it assumes that all things
locatable with <code>locative-type</code> are going to be just symbols defined
with a definer defined with <a href="#MGL-PAX:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-definer-for-symbol-locative-type</code></a>.
It is useful to attach documentation and source location to symbols
in a particular context. An example will make everything clear:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-symbol-locative-type</span></i> direction <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"A direction is a symbol. (After this `M-.` on `DIRECTION LOCATIVE`
  works and it can also be included in DEFSECTION forms.)"</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">define-definer-for-symbol-locative-type</span></i> <i><span class="symbol">define-direction</span></i> direction
  <span class="string">"With DEFINE-DIRECTION one can document what a symbol means when
  interpreted as a direction."</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">define-direction</span></i> up <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"UP is equivalent to a coordinate delta of (0, -1)."</span></span>)</span></span></code></pre>

<p>After all this, <code>(up direction)</code> refers to the <code>define-direction</code>
form above.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L445">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" >define-definer-for-symbol-locative-type</a></span></span> <span class="locative-args">name locative-type &amp;body docstring</span></span></p>

<p>Define a macro with <code>name</code> which can be used to attach documentation,
a lambda-list and source location to a symbol in the context of
<code>locative-type</code>. The defined macro's arglist is (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL TYPE"><code>symbol</code></a> <code>lambda-list</code>
<code>&amp;optional</code> <code>docstring</code>). <code>locative-type</code> is assumed to have been defined
with <a href="#MGL-PAX:DEFINE-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-SYMBOL-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-symbol-locative-type</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40EXTENDING-DOCUMENT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@REFERENCE-BASED-EXTENSIONS%20MGL-PAX:SECTION" title="Reference Based Extensions">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@EXTENDING-FIND-SOURCE%20MGL-PAX:SECTION" title="Extending `find-source`">&#8594;</a> <a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION" title="Extending `document`">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L43">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION">11.3 Extending <code>document</code></a></h3>

<p>The following utilities are for writing new <a href="#MGL-PAX:DOCUMENT-OBJECT%20GENERIC-FUNCTION" title="MGL-PAX:DOCUMENT-OBJECT GENERIC-FUNCTION"><code>document-object</code></a> and
<a href="#MGL-PAX:LOCATE-AND-DOCUMENT%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-AND-DOCUMENT GENERIC-FUNCTION"><code>locate-and-document</code></a> methods, which emit markdown.</p>

<p><a id="x-28MGL-PAX-3A-2AFORMAT-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*FORMAT*%20VARIABLE"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L55">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*FORMAT*%20VARIABLE" >*format*</a></span></span></span></p>

<p>Bound by <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>, this allows markdown output to depend on the
output format.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AWITH-HEADING-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:WITH-HEADING%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L60">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:WITH-HEADING%20MGL-PAX:MACRO" >with-heading</a></span></span> <span class="locative-args">(stream object title &amp;key link-title-to) &amp;body body</span></span></p>

<p>Write a markdown heading with <code>title</code> to <code>stream</code>. Nested <code>with-heading</code>s
produce nested headings. If <a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-SECTIONS* VARIABLE"><code>*document-link-sections*</code></a>, generate
anchors based on the <a href="#MGL-PAX:CANONICAL-REFERENCE%20GENERIC-FUNCTION" title="MGL-PAX:CANONICAL-REFERENCE GENERIC-FUNCTION"><code>canonical-reference</code></a> of <code>object</code>. <code>link-title-to</code>
behaves like the <code>link-title-to</code> argument of <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADOCUMENTING-REFERENCE-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DOCUMENTING-REFERENCE%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L73">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENTING-REFERENCE%20MGL-PAX:MACRO" >documenting-reference</a></span></span> <span class="locative-args">(stream &amp;key reference arglist name) &amp;body body</span></span></p>

<p>Write <code>reference</code> to <code>stream</code> as described in
<a href="#MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES*%20VARIABLE" title="MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES* VARIABLE"><code>*document-mark-up-signatures*</code></a>, and establish <code>reference</code> as a <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">local
reference</a>. Unless <code>arglist</code> is <code>nil</code> or
<code>:not-available</code>, it is printed after the name of object of <code>reference</code>.</p>

<p>If <code>arglist</code> is a list, then it is must be a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/03_d.htm" title="&quot;3.4&quot; MGL-PAX:CLHS">lambda list</a> and
is printed without the outermost parens and with the package names
removed from the argument names.</p>

<p>If <code>arglist</code> is a string, then it is printed without <a href="#MGL-PAX:ESCAPE-MARKDOWN%20FUNCTION" title="MGL-PAX:ESCAPE-MARKDOWN FUNCTION"><code>escape-markdown</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AWITH-DISLOCATED-OBJECTS-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:WITH-DISLOCATED-OBJECTS%20MGL-PAX:MACRO"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/document-early.lisp#L118">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:WITH-DISLOCATED-OBJECTS%20MGL-PAX:MACRO" >with-dislocated-objects</a></span></span> <span class="locative-args">objects &amp;body body</span></span></p>

<p>For each object in <code>objects</code>, establish a <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">local
reference</a> with the <a href="#MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE" title="MGL-PAX:DISLOCATED MGL-PAX:LOCATIVE"><code>dislocated</code></a> locative, which
<a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">prevents autolinking</a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADOCUMENT-DOCSTRING-20FUNCTION-29"></a>
<a id="MGL-PAX:DOCUMENT-DOCSTRING%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L661">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENT-DOCSTRING%20FUNCTION" >document-docstring</a></span></span> <span class="locative-args">docstring stream &amp;key (indentation &quot;    &quot;) exclude-first-line-p (paragraphp t)</span></span></p>

<p>Process and <code>docstring</code> to <code>stream</code>, <a href="#MGL-PAX:@MARKDOWN-INDENTATION%20MGL-PAX:SECTION" title="Indentation">stripping
indentation</a> from it, performing
<a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a> and <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>, finally prefixing each line with
<code>indentation</code>. The prefix is not added to the first line if
<code>exclude-first-line-p</code>. If <code>paragraphp</code>, then add a newline before and
after the output.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ADOCUMENTATION-2A-20FUNCTION-29"></a>
<a id="MGL-PAX:DOCUMENTATION*%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/docstring.lisp#L48">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENTATION*%20FUNCTION" >documentation*</a></span></span> <span class="locative-args">object doc-type</span></span></p>

<p>A small wrapper around <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_docume.htm" title="DOCUMENTATION GENERIC-FUNCTION"><code>cl:documentation</code></a> to smooth over differences
between implementations.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AESCAPE-MARKDOWN-20FUNCTION-29"></a>
<a id="MGL-PAX:ESCAPE-MARKDOWN%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/markdown.lisp#L140">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:ESCAPE-MARKDOWN%20FUNCTION" >escape-markdown</a></span></span> <span class="locative-args">string</span></span></p>

<p>Construct a new string from <code>string</code> by adding a backslash before
each special markdown character:</p>

<pre><code>*_`&lt;&gt;[]
</code></pre></li>
</ul>

<p><a id="x-28MGL-PAX-3APRIN1-TO-MARKDOWN-20FUNCTION-29"></a>
<a id="MGL-PAX:PRIN1-TO-MARKDOWN%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/document/document.lisp#L2220">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:PRIN1-TO-MARKDOWN%20FUNCTION" >prin1-to-markdown</a></span></span> <span class="locative-args">object</span></span></p>

<p>Like <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_to_.htm" title="PRIN1-TO-STRING FUNCTION"><code>prin1-to-string</code></a>, but bind <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pr_cas.htm" title="*PRINT-CASE* VARIABLE"><code>*print-case*</code></a> depending on
<a href="#MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE* VARIABLE"><code>*document-downcase-uppercase-code*</code></a> and <a href="#MGL-PAX:*FORMAT*%20VARIABLE" title="MGL-PAX:*FORMAT* VARIABLE"><code>*format*</code></a>, and
<a href="#MGL-PAX:ESCAPE-MARKDOWN%20FUNCTION" title="MGL-PAX:ESCAPE-MARKDOWN FUNCTION"><code>escape-markdown</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40EXTENDING-FIND-SOURCE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EXTENDING-FIND-SOURCE%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION" title="Extending `document`">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION" title="Sections">&#8594;</a> <a href="#MGL-PAX:@EXTENDING-FIND-SOURCE%20MGL-PAX:SECTION" title="Extending `find-source`">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/find-definition.lisp#L3">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@EXTENDING-FIND-SOURCE%20MGL-PAX:SECTION">11.4 Extending <code>find-source</code></a></h3>

<p>The following utilities are for writing new <a href="#MGL-PAX:FIND-SOURCE%20GENERIC-FUNCTION" title="MGL-PAX:FIND-SOURCE GENERIC-FUNCTION"><code>find-source</code></a> and
<a href="#MGL-PAX:LOCATE-AND-FIND-SOURCE%20GENERIC-FUNCTION" title="MGL-PAX:LOCATE-AND-FIND-SOURCE GENERIC-FUNCTION"><code>locate-and-find-source</code></a> methods. Their locative arguments are
translated to Swank <code>dspecs</code>, and it is an error if there is no
translation. In general, Swank supports Common Lisp
definitions (hence the <a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> and <code>function</code>(<a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/s_fn.htm" title="FUNCTION MGL-PAX:MACRO"><code>1</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION TYPE"><code>2</code></a>) locatives, for example)
but not PAX- and user-defined additions (e.g. <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>),
<a href="#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a>).</p>

<p><a id="x-28MGL-PAX-3AFIND-DEFINITION-20FUNCTION-29"></a>
<a id="MGL-PAX:FIND-DEFINITION%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/find-definition.lisp#L14">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:FIND-DEFINITION%20FUNCTION" >find-definition</a></span></span> <span class="locative-args">object &amp;rest locatives</span></span></p>

<p>Return a Swank source location for a definition of <code>object</code>. Try
forming <a href="#MGL-PAX:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="MGL-PAX:@REFERENCE MGL-PAX:GLOSSARY-TERM">reference</a>s with <code>object</code> and one of <code>locatives</code>. Stop at the
first locative with which a definition is found, and return its
location. If no location was found, then return the usual
Swank <code>(:error ...)</code>. The implementation is based on the rather
expensive <code>swank-backend:find-definitions</code> function.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AFIND-DEFINITION-2A-20FUNCTION-29"></a>
<a id="MGL-PAX:FIND-DEFINITION*%20FUNCTION"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/navigate/find-definition.lisp#L33">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:FIND-DEFINITION*%20FUNCTION" >find-definition*</a></span></span> <span class="locative-args">object reference-object &amp;rest locatives</span></span></p>

<p>Like <a href="#MGL-PAX:FIND-DEFINITION%20FUNCTION" title="MGL-PAX:FIND-DEFINITION FUNCTION"><code>find-definition</code></a>, but tries to get the definition of
<code>object</code> (for example a <code>function</code>(<a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/s_fn.htm" title="FUNCTION MGL-PAX:MACRO"><code>1</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION TYPE"><code>2</code></a>) or <code>method</code>(<a href="#METHOD%20MGL-PAX:LOCATIVE" title="METHOD MGL-PAX:LOCATIVE"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_method.htm" title="METHOD TYPE"><code>1</code></a>) object) with the fast but
not widely supported <code>swank-backend:find-source-location</code> before
calling the much slower but more complete
<code>swank-backend:find-definitions</code>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40SECTIONS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@SECTIONS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EXTENDING-FIND-SOURCE%20MGL-PAX:SECTION" title="Extending `find-source`">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION" title="Glossary Terms">&#8594;</a> <a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION" title="Sections">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L465">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION">11.5 Sections</a></h3>

<p><a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a> objects rarely need to be dissected since
<a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> and <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> cover most needs. However, it is plausible
that one wants to subclass them and maybe redefine how they are
presented.</p>

<p><a id="x-28MGL-PAX-3ASECTION-20CLASS-29"></a>
<a id="MGL-PAX:SECTION%20CLASS"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L148">[class]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION%20CLASS" >section</a></span></span></span></p>

<p><a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> stores its <code>name</code>, <code>title</code>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE TYPE"><code>package</code></a>,
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_rdtabl.htm" title="READTABLE TYPE"><code>readtable</code></a> and <code>entries</code> arguments in <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>
objects.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ASECTION-NAME-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-NAME%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L149">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-NAME%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-name</a></span></span> <span class="locative-args">section (:name)</span></span></p>

<p>The name of the global variable whose value is
this <code>section</code>(<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>0</code></a> <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>1</code></a>) object.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ASECTION-PACKAGE-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-PACKAGE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L153">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-PACKAGE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-package</a></span></span> <span class="locative-args">section (:package)</span></span></p>

<p><a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pkg.htm" title="*PACKAGE* VARIABLE"><code>*package*</code></a> will be bound to this package when
generating documentation for this section if
<a href="#MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES*%20VARIABLE" title="MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES* VARIABLE"><code>*document-normalize-packages*</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ASECTION-READTABLE-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-READTABLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L158">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-READTABLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-readtable</a></span></span> <span class="locative-args">section (:readtable)</span></span></p>

<p><a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_rdtabl.htm" title="*READTABLE* VARIABLE"><code>*readtable*</code></a> will be bound to this when generating
documentation for this section if <a href="#MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES*%20VARIABLE" title="MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES* VARIABLE"><code>*document-normalize-packages*</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ASECTION-TITLE-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-TITLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L162">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-TITLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-title</a></span></span> <span class="locative-args">section (:title)</span></span></p>

<p>A markdown string or <code>nil</code>. Used in generated
documentation.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ASECTION-LINK-TITLE-TO-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-LINK-TITLE-TO%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L166">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-LINK-TITLE-TO%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-link-title-to</a></span></span> <span class="locative-args">section (:link-title-to = nil)</span></span></p>

<p>A <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a> or <code>nil</code>. Used in generated documentation.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3ASECTION-ENTRIES-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-ENTRIES%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L170">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-ENTRIES%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-entries</a></span></span> <span class="locative-args">section (:entries)</span></span></p>

<p>A list of markdown docstrings and <a href="#MGL-PAX:REFERENCE%20CLASS" title="MGL-PAX:REFERENCE CLASS"><code>reference</code></a>
objects in the order they occurred in <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3A-40GLOSSARY-TERMS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION"></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION" title="Sections">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION" title="Glossary Terms">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/extension-api.lisp#L479">&#955;</a></span></span></p>

<h3><a href="#MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION">11.6 Glossary Terms</a></h3>

<p><a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a> objects rarely need to be dissected since
<a href="#MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-GLOSSARY-TERM MGL-PAX:MACRO"><code>define-glossary-term</code></a> and <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> cover most needs. However, it is
plausible that one wants to subclass them and maybe redefine how
they are presented.</p>

<p><a id="x-28MGL-PAX-3AGLOSSARY-TERM-20CLASS-29"></a>
<a id="MGL-PAX:GLOSSARY-TERM%20CLASS"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L296">[class]</a></span> <span class="reference-object"><a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" >glossary-term</a></span></span></span></p>

<p><a href="#MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-GLOSSARY-TERM MGL-PAX:MACRO"><code>define-glossary-term</code></a> instantiates a <code>glossary-term</code>
with its <code>name</code> and <code>title</code> arguments.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AGLOSSARY-TERM-NAME-20-28MGL-PAX-3AREADER-20MGL-PAX-3AGLOSSARY-TERM-29-29"></a>
<a id="MGL-PAX:GLOSSARY-TERM-NAME%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L297">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:GLOSSARY-TERM-NAME%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29" >glossary-term-name</a></span></span> <span class="locative-args">glossary-term (:name)</span></span></p>

<p>The name of the global variable whose value is
this <code>glossary-term</code>(<a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>0</code></a> <a href="#MGL-PAX:GLOSSARY-TERM%20MGL-PAX:LOCATIVE" title="MGL-PAX:GLOSSARY-TERM MGL-PAX:LOCATIVE"><code>1</code></a>) object.</p></li>
</ul>

<p><a id="x-28MGL-PAX-3AGLOSSARY-TERM-TITLE-20-28MGL-PAX-3AREADER-20MGL-PAX-3AGLOSSARY-TERM-29-29"></a>
<a id="MGL-PAX:GLOSSARY-TERM-TITLE%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29"></a></p>

<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/163848ae5a00ed7573038501289283118971b495/src/base/pax-early.lisp#L301">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:GLOSSARY-TERM-TITLE%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29" >glossary-term-title</a></span></span> <span class="locative-args">glossary-term (:title)</span></span></p>

<p>A markdown string or <code>nil</code>. Used in generated
documentation.</p></li>
</ul>
  </div>
</div>
<script>$('#page-toc').toc({'selectors': 'h1,h2,h3,h4'});</script>
</body>
</html>
