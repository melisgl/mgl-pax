<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<title>PAX Manual
</title>
<link type='text/css' href='style.css' rel='stylesheet'>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width">
   <script src="jquery.min.js"></script>
<script src="toc.min.js"></script>
<script type="text/x-mathjax-config">
     MathJax.Hub.Config({
       tex2jax: {
         inlineMath: [['$','$']],
         processEscapes: true
       }
     });
   </script>
   <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
   </script>
   
</head>
<body>
<div id="content-container">
<div id="toc">
<div id="page-toc">
</div>
<div id="toc-footer"><ul><li><a href="https://github.com/melisgl/mgl-pax">[generated by MGL-PAX]</a></li></ul></div>
</div>
<div id="content">
<p><a id="x-28MGL-PAX-3A-40PAX-MANUAL-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PAX-MANUAL%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">&#8594;</a> <a href="pax-manual.html" title="PAX Manual">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/pax.lisp#L47">&#955;</a></span></span></p>
<h1><a href="pax-manual.html">PAX Manual</a></h1>
<h2>Table of Contents</h2>
<ul>
<li><a href="#MGL-PAX:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">1 Introduction</a></li>
<li><a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">2 Emacs Setup</a></li>
<li><a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links and Systems">3 Links and Systems</a>

<ul>
<li><a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM">3.1 The mgl-pax ASDF System</a></li>
<li><a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/full&quot; ASDF/SYSTEM:SYSTEM">3.2 The mgl-pax/full ASDF System</a></li>
</ul></li>
<li><a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION" title="Background">4 Background</a></li>
<li><a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">5 Basics</a>

<ul>
<li><a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">5.1 Parsing</a></li>
</ul></li>
<li><a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION" title="PAX Locatives">6 PAX Locatives</a></li>
<li><a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">7 Navigating Sources in Emacs</a>

<ul>
<li><a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/navigate&quot; ASDF/SYSTEM:SYSTEM">7.1 The mgl-pax/navigate ASDF System</a></li>
</ul></li>
<li><a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">8 Generating Documentation</a>

<ul>
<li><a href="#MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION" title="The `document` Function">8.1 The <code>document</code> Function</a>

<ul>
<li><a href="#MGL-PAX:@DOCUMENTABLES%20MGL-PAX:SECTION" title="Documentables">8.1.1 Documentables</a></li>
<li><a href="#MGL-PAX:@DOCUMENT-RETURN%20MGL-PAX:SECTION" title="Return Values">8.1.2 Return Values</a></li>
<li><a href="#MGL-PAX:@PAGES%20MGL-PAX:SECTION" title="Pages">8.1.3 Pages</a></li>
<li><a href="#MGL-PAX:@PACKAGE-AND-READTABLE%20MGL-PAX:SECTION" title="Package and Readtable">8.1.4 Package and Readtable</a></li>
</ul></li>
<li><a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/document&quot; ASDF/SYSTEM:SYSTEM">8.2 The mgl-pax/document ASDF System</a></li>
<li><a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">8.3 Browsing Live Documentation</a>

<ul>
<li><a href="#MGL-PAX:@PAX-URLS%20MGL-PAX:SECTION" title="PAX URLs">8.3.1 PAX URLs</a></li>
<li><a href="#MGL-PAX:@APROPOS%20MGL-PAX:SECTION" title="Apropos">8.3.2 Apropos</a></li>
<li><a href="#MGL-PAX:@EMACS-SETUP-FOR-BROWSING%20MGL-PAX:SECTION" title="Emacs Setup for Browsing">8.3.3 Emacs Setup for Browsing</a></li>
<li><a href="#MGL-PAX:@BROWSING-WITH-W3M%20MGL-PAX:SECTION" title="Browsing with w3m">8.3.4 Browsing with w3m</a></li>
<li><a href="#MGL-PAX:@BROWSING-WITH-OTHER-BROWSERS%20MGL-PAX:SECTION" title="Browsing with Other Browsers">8.3.5 Browsing with Other Browsers</a></li>
</ul></li>
<li><a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">8.4 Markdown Support</a>

<ul>
<li><a href="#MGL-PAX:@MARKDOWN-IN-DOCSTRINGS%20MGL-PAX:SECTION" title="Markdown in Docstrings">8.4.1 Markdown in Docstrings</a></li>
<li><a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION" title="Syntax Highlighting">8.4.2 Syntax Highlighting</a></li>
<li><a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION" title="MathJax">8.4.3 MathJax</a></li>
</ul></li>
<li><a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">8.5 Codification</a></li>
<li><a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">8.6 Linking to Code</a>

<ul>
<li><a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">8.6.1 Specified Locative</a></li>
<li><a href="#MGL-PAX:@UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Unspecified Locative">8.6.2 Unspecified Locative</a></li>
<li><a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">8.6.3 Explicit and Autolinking</a></li>
<li><a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">8.6.4 Preventing Autolinking</a></li>
<li><a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION" title="Unresolvable Links">8.6.5 Unresolvable Links</a></li>
<li><a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION" title="Suppressed Links">8.6.6 Suppressed Links</a></li>
<li><a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">8.6.7 Local References</a></li>
</ul></li>
<li><a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">8.7 Linking to the Hyperspec</a></li>
<li><a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">8.8 Linking to Sections</a></li>
<li><a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">8.9 Miscellaneous Variables</a></li>
<li><a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">8.10 Utilities for Generating Documentation</a>

<ul>
<li><a href="#MGL-PAX:@HTML-OUTPUT%20MGL-PAX:SECTION" title="HTML Output">8.10.1 HTML Output</a></li>
<li><a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION" title="Github Workflow">8.10.2 Github Workflow</a></li>
<li><a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">8.10.3 PAX World</a></li>
</ul></li>
<li><a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION" title="Overview of Escaping">8.11 Overview of Escaping</a></li>
<li><a href="#MGL-PAX:@OUTPUT-DETAILS%20MGL-PAX:SECTION" title="Output Details">8.12 Output Details</a></li>
<li><a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION" title="Documentation Generation Implementation Notes">8.13 Documentation Generation Implementation Notes</a></li>
</ul></li>
<li><a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">9 Transcripts</a>

<ul>
<li><a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/transcribe&quot; ASDF/SYSTEM:SYSTEM">9.1 The mgl-pax/transcribe ASDF System</a></li>
<li><a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION" title="Transcribing with Emacs">9.2 Transcribing with Emacs</a></li>
<li><a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION" title="Transcript API">9.3 Transcript API</a></li>
<li><a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">9.4 Transcript Consistency Checking</a>

<ul>
<li><a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION" title="Finer-Grained Consistency Checks">9.4.1 Finer-Grained Consistency Checks</a></li>
<li><a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">9.4.2 Controlling the Dynamic Environment</a></li>
<li><a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION" title="Utilities for Consistency Checking">9.4.3 Utilities for Consistency Checking</a></li>
</ul></li>
</ul></li>
<li><a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">10 Writing Extensions</a>

<ul>
<li><a href="#MGL-PAX:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">10.1 Adding New Locatives</a></li>
<li><a href="#MGL-PAX:@LOCATIVE-ALIASES%20MGL-PAX:SECTION" title="Locative Aliases">10.2 Locative Aliases</a></li>
<li><a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION" title="Extending `document`">10.3 Extending <code>document</code></a></li>
<li><a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION" title="Sections">10.4 Sections</a></li>
<li><a href="#MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION" title="Glossary Terms">10.5 Glossary Terms</a></li>
</ul></li>
</ul>
<h6>[in package MGL-PAX with nicknames PAX]</h6>
<p><a id="x-28MGL-PAX-3A-40INTRODUCTION-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@INTRODUCTION%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="pax-manual.html" title="PAX Manual">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">&#8594;</a> <a href="#MGL-PAX:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/pax.lisp#L73">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@INTRODUCTION%20MGL-PAX:SECTION">1 Introduction</a></h2>
<p><em>What if documentation really lived in the code?</em></p>
<p>Docstrings are already there. If some narrative glued them together,
we'd be able develop and explore the code along with the
documentation due to their physical proximity. The main tool that
PAX provides for this is <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> @foo-random-manual <span class="paren2">(<span class="code"><span class="keyword">:title</span> <span class="string">"Foo Random manual"</span></span>)</span>
  <span class="string">"Foo Random is a random number generator library."</span>
  <span class="paren2">(<span class="code">foo-random-state class</span>)</span>
  <span class="paren2">(<span class="code">uniform-random <i><span class="symbol">function</span></i></span>)</span>
  <span class="paren2">(<span class="code">@foo-random-examples section</span>)</span></span>)</span></span></code></pre>
<p>Like this one, sections can have docstrings and
<a href="dref-manual.html" title="DRef Manual">references</a> to
definitions (e.g. <code>(uniform-random function)</code>). These docstrings and
references are the glue. To support interactive development, PAX</p>
<ul>
<li><p>makes <a href="https://slime.common-lisp.dev/" title="SLIME">SLIME</a>'s <a href="http://common-lisp.net/project/slime/doc/html/Finding-definitions.html#Finding-definitions" title="`m-.`"><code>m-.</code></a> work with references and</p></li>
<li><p>adds a documentation browser.</p></li>
</ul>
<p>See <a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">Emacs Setup</a>.</p>
<p>Beyond interactive workflows, <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a> from
sections and all the referenced items in Markdown or HTML format is
also implemented.</p>
<p>With the simplistic tools provided, one may emphasize the narrative
as with Literate Programming, but documentation is generated from
code, not vice versa, and there is no support for chunking.</p>
<p><em>Code is first, code must look pretty, documentation is code</em>.</p>
<h5>Docstrings</h5>
<p>PAX automatically recognizes and <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">marks up code</a> with
backticks and <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">links code</a> to their definitions.
Take, for instance, SBCL's <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_abortc.htm" title="ABORT (MGL-PAX:CLHS FUNCTION)"><code>abort</code></a> function, whose docstring is
written in the usual style, uppercasing names of symbols:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code">docstring #'abort</span>)</span>
=&gt; "Transfer control to a restart named ABORT, signalling a CONTROL-ERROR if
   none exists."</span></code></pre>
<p>Note how in the generated documentation, <code>abort</code> is set with a
monospace font, while <code>control-error</code> is autolinked:</p>
<ul>
<li><p>[function] <strong>ABORT</strong> <em>&amp;OPTIONAL CONDITION</em></p>

<p>Transfer control to a restart named <code>abort</code>, signalling a
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_contro.htm" title="CONTROL-ERROR CONDITION"><code>control-error</code></a> if none exists.</p></li>
</ul>
<p>In the following <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">transcript</a>, the above output is
rendered from the raw markdown:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code">document #'abort <span class="keyword">:format</span> <span class="keyword">:markdown</span></span>)</span>
.. - [function] **ABORT** *&amp;OPTIONAL CONDITION*
..
..     Transfer control to a restart named `ABORT`, signalling a [`CONTROL-ERROR`][7c2c] if
..     none exists.
..
..   [7c2c]: http://www.lispworks.com/documentation/HyperSpec/Body/e_contro.htm "CONTROL-ERROR <span class="paren1">(<span class="code">MGL-PAX:CLHS CONDITION</span>)</span>"
..</span></code></pre>
<h5>A Complete Example</h5>
<p>Here is an example of how it all works together:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">mgl-pax:define-package</span></i> <span class="keyword">:foo-random</span>
  <span class="paren2">(<span class="code"><span class="keyword">:documentation</span> <span class="string">"This package provides various utilities for random.
  See FOO-RANDOM:@FOO-RANDOM-MANUAL."</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:use</span> <span class="keyword">#:common-lisp</span> <span class="keyword">#:mgl-pax</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">in-package <span class="keyword">:foo-random</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> @foo-random-manual <span class="paren2">(<span class="code"><span class="keyword">:title</span> <span class="string">"Foo Random manual"</span></span>)</span>
  <span class="string">"FOO-RANDOM is a random number generator library inspired by CL:RANDOM.
  Functions such as UNIFORM-RANDOM use *FOO-STATE* and have a
  :RANDOM-STATE keyword arg."</span>
  <span class="paren2">(<span class="code">foo-random-state class</span>)</span>
  <span class="paren2">(<span class="code">state <span class="paren3">(<span class="code">reader foo-random-state</span>)</span></span>)</span>
  <span class="string">"Hey we can also print states!"</span>
  <span class="paren2">(<span class="code">print-object <span class="paren3">(<span class="code">method <span class="paren4">(<span class="code"></span>)</span> <span class="paren4">(<span class="code">foo-random-state t</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code"><span class="special">*foo-state*</span> variable</span>)</span>
  <span class="paren2">(<span class="code">gaussian-random <i><span class="symbol">function</span></i></span>)</span>
  <span class="paren2">(<span class="code">uniform-random <i><span class="symbol">function</span></i></span>)</span>
  <span class="comment">;; This is a subsection.
</span>  <span class="paren2">(<span class="code">@foo-random-examples section</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> foo-random-state <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">state <span class="keyword">:reader</span> state</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> print-object <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">object foo-random-state</span>)</span> stream</span>)</span>
  <span class="paren2">(<span class="code">print-unreadable-object <span class="paren3">(<span class="code">object stream <span class="keyword">:type</span> t</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*foo-state*</span> <span class="paren2">(<span class="code">make-instance 'foo-random-state</span>)</span>
  <span class="string">"Much like *RANDOM-STATE* but uses the FOO algorithm."</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> uniform-random <span class="paren2">(<span class="code">limit &amp;key <span class="paren3">(<span class="code">random-state <span class="special">*foo-state*</span></span>)</span></span>)</span>
  <span class="string">"Return a random number from the between 0 and LIMIT (exclusive)
  uniform distribution."</span>
  nil</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> gaussian-random <span class="paren2">(<span class="code">stddev &amp;key <span class="paren3">(<span class="code">random-state <span class="special">*foo-state*</span></span>)</span></span>)</span>
  <span class="string">"Return a random number from a zero mean normal distribution with
  STDDEV."</span>
  nil</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> @foo-random-examples <span class="paren2">(<span class="code"><span class="keyword">:title</span> <span class="string">"Examples"</span></span>)</span>
  <span class="string">"Let's see the transcript of a real session of someone working
  with FOO:

  ```cl-transcript
  (values (princ :hello) (list 1 2))
  .. HELLO
  =&gt; :HELLO
  =&gt; (1 2)

  (make-instance 'foo-random-state)
  ==&gt; #&lt;FOO-RANDOM-STATE &gt;
  ```"</span></span>)</span></span></code></pre>
<p>Note how <code>(variable *foo-state*)</code> in the <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> form both
exports <code>*foo-state*</code> and includes its documentation in
<code>@foo-random-manual</code>. The symbols <a href="dref-manual.html#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> and
<a href="dref-manual.html#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a> are just two instances of <a href="dref-manual.html#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="locative">locative</a>s,
which are used in <code>defsection</code> to refer to definitions tied to
symbols.</p>
<p><code>(document @foo-random-manual)</code> generates fancy markdown or HTML
output with <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE">automatic markup</a> and <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">autolinks</a> uppercase <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a>s
found in docstrings, numbers sections, and creates a table of
contents.</p>
<p>One can even generate documentation for different but related
libraries at the same time with the output going to different files
but with cross-page links being automatically added for symbols
mentioned in docstrings. In fact, this is what <a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">PAX World</a> does. See
<a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a> for some convenience functions to cover
the most common cases.</p>
<p>The <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">transcript</a> in the code block tagged with
<code>cl-transcript</code> is automatically checked for up-to-dateness when
documentation is generated.</p>
<p><a id="x-28MGL-PAX-3A-40EMACS-SETUP-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links and Systems">&#8594;</a> <a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/pax.lisp#L177">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION">2 Emacs Setup</a></h2>
<p>Load <code>src/mgl-pax.el</code> in Emacs, and maybe set up some key bindings.</p>
<p>If you installed PAX with Quicklisp, the location of <code>mgl-pax.el</code>
may change with updates, and you may want to copy the current
version of <code>mgl-pax.el</code> to a stable location:</p>
<pre><code>(mgl-pax:install-pax-elisp &quot;~/quicklisp/&quot;)
</code></pre>
<p>Then, assuming the Elisp file is in the quicklisp directory, add
something like this to your <code>.emacs</code>:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><a href="http://www.gnu.org/software/emacs/elisp-manual/html_node/elisp_196.html#IDX517" class="symbol">load</a> <span class="string">"~/quicklisp/mgl-pax.el"</span></span>)</span>
<span class="paren1">(<span class="code">mgl-pax-hijack-slime-doc-keys</span>)</span>
<span class="paren1">(<span class="code"><a href="http://www.gnu.org/software/emacs/elisp-manual/html_node/elisp_333.html#IDX1030" class="symbol">global-set-key</a> <span class="paren2">(<span class="code">kbd <span class="string">"C-."</span></span>)</span> 'mgl-pax-document</span>)</span>
<span class="paren1">(<span class="code"><a href="http://www.gnu.org/software/emacs/elisp-manual/html_node/elisp_333.html#IDX1030" class="symbol">global-set-key</a> <span class="paren2">(<span class="code">kbd <span class="string">"s-x t"</span></span>)</span> 'mgl-pax-transcribe-last-expression</span>)</span>
<span class="paren1">(<span class="code"><a href="http://www.gnu.org/software/emacs/elisp-manual/html_node/elisp_333.html#IDX1030" class="symbol">global-set-key</a> <span class="paren2">(<span class="code">kbd <span class="string">"s-x r"</span></span>)</span> 'mgl-pax-retranscribe-region</span>)</span></span></code></pre>
<p>For <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">Browsing Live Documentation</a>, <code>mgl-pax-browser-function</code> can be
customized in Elisp. To browse within Emacs, choose
<code>w3m-browse-url</code> (see
<a href="https://emacs-w3m.github.io/info/emacs-w3m.html" >w3m</a>), and make
sure both the w3m binary and the w3m Emacs package are installed. On
Debian, simply install the <code>w3m-el</code> package. With other browser
functions, a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE (MGL-PAX:CLHS CLASS)">HUNCHENTOOT</a> web server is started.</p>
<p>See <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating Sources in Emacs</a>, <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a> and
<a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION" title="Transcribing with Emacs">Transcribing with Emacs</a> for how to use the relevant features.</p>
<p><a id="x-28MGL-PAX-3AINSTALL-PAX-ELISP-20FUNCTION-29"></a>
<a id="MGL-PAX:INSTALL-PAX-ELISP%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/pax.lisp#L210">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:INSTALL-PAX-ELISP%20FUNCTION" >install-pax-elisp</a></span></span> <span class="locative-args">target-dir</span></span></p>

<p>Copy <code>mgl-pax.el</code> distributed with this package to <code>target-dir</code>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40LINKS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LINKS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links and Systems">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/pax.lisp#L236">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION">3 Links and Systems</a></h2>
<p>Here is the <a href="https://github.com/melisgl/mgl-pax" >official
repository</a> and the <a href="http://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html" >HTML
documentation</a>
for the latest version.</p>
<p>PAX is built on top of the <a href="dref-manual.html" title="DRef Manual">DRef
library</a> (bundled in the same repository). See
<a href="http://melisgl.github.io/mgl-pax-world/dref-manual.html" >DRef's HTML
documentation</a></p>
<p><a id="x-28-22mgl-pax-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links and Systems">&#8592;</a> <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links and Systems">&#8593;</a> <a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/full&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/mgl-pax.asd#L1">&#955;</a></span></span></p>
<h3><a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM">3.1 The mgl-pax ASDF System</a></h3>
<ul>
<li>Version: 0.2.4</li>
<li>Description: Exploratory programming tool and documentation
  generator.</li>
<li>Long Description: The set of dependencies of the MGL-PAX system is
  kept light, and its heavier dependencies are autoloaded via ASDF
  when the relevant functionality is accessed. See the
  <code>mgl-pax/navigate</code>, <code>mgl-pax/document</code>, <code>mgl-pax/transcribe</code> and
  <code>mgl-pax/full</code> systems. To keep deployed code small, client systems
  should declare an ASDF dependency on this system, never on the
  others, which are intended for autoloading and interactive use.</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
<li>Homepage: <a href="http://melisgl.github.io/mgl-pax" >http://melisgl.github.io/mgl-pax</a></li>
<li>Bug tracker: <a href="https://github.com/melisgl/mgl-pax/issues" >https://github.com/melisgl/mgl-pax/issues</a></li>
<li>Source control: <a href="https://github.com/melisgl/mgl-pax.git" >GIT</a></li>
</ul>
<p><a id="x-28-22mgl-pax-2Ffull-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links and Systems">&#8593;</a> <a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION" title="Background">&#8594;</a> <a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/full&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/mgl-pax.asd#L1">&#955;</a></span></span></p>
<h3><a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM">3.2 The mgl-pax/full ASDF System</a></h3>
<ul>
<li>Description: MGL-PAX with all features preloaded except MGL-PAX/WEB.</li>
<li>Long Description: Do not declare a dependency on this system. It
  is autoloaded.</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40BACKGROUND-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%2Ffull%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/full&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">&#8594;</a> <a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION" title="Background">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/pax.lisp#L249">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION">4 Background</a></h2>
<p>As a user, I frequently run into documentation that's incomplete
and out of date, so I tend to stay in the editor and explore the
code by jumping around with <a href="https://slime.common-lisp.dev/" title="SLIME">SLIME</a>'s <a href="http://common-lisp.net/project/slime/doc/html/Finding-definitions.html#Finding-definitions" title="`m-.`"><code>m-.</code></a> (<code>slime-edit-definition</code>).
As a library author, I spend a great deal of time polishing code but
precious little writing documentation.</p>
<p>In fact, I rarely write anything more comprehensive than docstrings
for exported stuff. Writing docstrings feels easier than writing a
separate user manual, and they are always close at hand during
development. The drawback of this style is that users of the library
have to piece the big picture together themselves.</p>
<p>That's easy to solve, I thought, let's just put all the narrative
that holds docstrings together in the code and be a bit like a
Literate Programmer turned inside out. The original prototype, which
did almost everything I wanted, was this:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defmacro</span></i> <i><span class="symbol">defsection</span></i> <span class="paren2">(<span class="code">name docstring</span>)</span>
  `<span class="paren2">(<span class="code"><i><span class="symbol">defun</span></i> ,name <span class="paren3">(<span class="code"></span>)</span> ,docstring</span>)</span></span>)</span></span></code></pre>
<p>Armed with this <code>defsection</code>, I soon found myself
organizing code following the flow of user-level documentation and
relegated comments to implementation details entirely. However, some
parts of <code>defsection</code> docstrings were just listings of
all the functions, macros and variables related to the narrative,
and this list was repeated in the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpkg.htm" title="DEFPACKAGE (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defpackage</code></a> form complete with
little comments that were like section names. A clear violation of
<a href="http://c2.com/cgi/wiki?OnceAndOnlyOnce" title="OAOO">OAOO</a>, one of them had to go, so <code>defsection</code> got a list
of symbols to export.</p>
<p>That was great, but soon I found that the listing of symbols is
ambiguous if, for example, a function, a compiler macro and a class
were named by the same symbol. This did not concern exporting, of
course, but it didn't help readability. Distractingly, on such
symbols, <code>M-.</code> was popping up selection dialogs. There were two
birds to kill, and the symbol got accompanied by a type, which was
later generalized into the concept of locatives:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> @introduction <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"A single line for one man ..."</span>
  <span class="paren2">(<span class="code">foo class</span>)</span>
  <span class="paren2">(<span class="code">bar <i><span class="symbol">function</span></i></span>)</span></span>)</span></span></code></pre>
<p>After a bit of elisp hacking, <code>M-.</code> was smart enough to
disambiguate based on the locative found in the vicinity of the
symbol, and everything was good for a while.</p>
<p>Then, I realized that sections could refer to other sections if
there were a <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>section</code></a> locative. Going down that path, I soon began to
feel the urge to generate pretty documentation as all the necessary
information was available in the <code>defsection</code> forms. The design
constraint imposed on documentation generation was that following
the typical style of upcasing symbols in docstrings, there should be
no need to explicitly mark up links: if <code>M-.</code> works, then the
documentation generator shall also be able figure out what's being
referred to.</p>
<p>I settled on <a href="https://daringfireball.net/projects/markdown/" title="markdown">markdown</a> as a reasonably non-intrusive format, and a
few thousand lines later PAX was born. Since then, locatives and
references were factored out into the <a href="dref-manual.html" title="DRef Manual">DRef</a>
library to let PAX focus on <code>M-.</code> and documentation.</p>
<p><a id="x-28MGL-PAX-3A-40BASICS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@BASICS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@BACKGROUND%20MGL-PAX:SECTION" title="Background">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">&#8594;</a> <a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/pax.lisp#L317">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION">5 Basics</a></h2>
<p>Now let's examine the most important pieces.</p>
<p><a id="x-28MGL-PAX-3ADEFSECTION-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFSECTION%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L12">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" >defsection</a></span></span> <span class="locative-args">name (&amp;key (package '*package*) (readtable '*readtable*) (export t) title link-title-to (discard-documentation-p *discard-documentation-p*)) &amp;body entries</span></span></p>

<p>Define a documentation section and maybe export referenced symbols.
A bit behind the scenes, a global variable with <code>name</code> is defined and
is bound to a <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a> object. By convention, section names
start with the character <code>@</code>. See <a href="#MGL-PAX:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">Introduction</a> for an example.</p>

<p><strong>Entries</strong></p>

<p><code>entries</code> consists of docstrings and references in any order.
Docstrings are arbitrary strings in markdown format.</p>

<p>References are <a href="dref-manual.html#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>s given in the form <code>(name locative)</code>.
For example, <code>(foo function)</code> refers to the function <code>foo</code>, <code>(@bar
section)</code> says that <code>@bar</code> is a subsection of this
one. <code>(baz (method () (t t t)))</code> refers to the default method of the
three argument generic function <code>baz</code>. <code>(foo function)</code> is
equivalent to <code>(foo (function))</code>. See the DRef <a href="dref-manual.html#DREF:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">Introduction</a>
for more.</p>

<p>The same name may occur in multiple references, typically with
different locatives, but this is not required.</p>

<p>The references are not <a href="dref-manual.html#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>d until documentation is generated, so
they may refer to things yet to be defined.</p>

<p><strong>Exporting</strong></p>

<p>If <code>export</code> is true (the default), <code>name</code> and the <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>s of references
among <code>entries</code> which are <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL (MGL-PAX:CLHS CLASS)"><code>symbol</code></a>s are candidates for exporting. A
candidate symbol is exported if</p>

<ul>
<li><p>it is <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_s.htm" title="FIND-SYMBOL (MGL-PAX:CLHS FUNCTION)">accessible</a> in <code>package</code>, and</p></li>
<li><p>there is a reference to it in the section being defined which is
  approved by <a href="#MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-REFERENCE-P GENERIC-FUNCTION"><code>exportable-reference-p</code></a>.</p></li>
</ul>

<p>See <a href="#MGL-PAX:DEFINE-PACKAGE%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-PACKAGE MGL-PAX:MACRO"><code>define-package</code></a> if you use the export feature. The idea with
confounding documentation and exporting is to force documentation of
all exported symbols.</p>

<p><strong>Misc</strong></p>

<p><code>title</code> is a string containing markdown or <code>nil</code>. If non-<code>nil</code>, it
determines the text of the heading in the generated output.
<code>link-title-to</code> is a reference given as an <code>(name locative)</code> pair or
<code>nil</code>, to which the heading will link when generating HTML. If not
specified, the heading will link to its own anchor.</p>

<p>When <code>discard-documentation-p</code> (defaults to <a href="#MGL-PAX:*DISCARD-DOCUMENTATION-P*%20VARIABLE" title="MGL-PAX:*DISCARD-DOCUMENTATION-P* VARIABLE"><code>*discard-documentation-p*</code></a>)
is true, <code>entries</code> will not be recorded to save memory.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADISCARD-DOCUMENTATION-P-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DISCARD-DOCUMENTATION-P*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L7">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DISCARD-DOCUMENTATION-P*%20VARIABLE" >*discard-documentation-p*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>The default value of <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>'s <code>discard-documentation-p</code> argument.
One may want to set <code>*discard-documentation-p*</code> to true before
building a binary application.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ADEFINE-PACKAGE-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFINE-PACKAGE%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L275">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFINE-PACKAGE%20MGL-PAX:MACRO" >define-package</a></span></span> <span class="locative-args">package &amp;rest options</span></span></p>

<p>This is like <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpkg.htm" title="DEFPACKAGE (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>cl:defpackage</code></a> but silences warnings and errors
signalled when the redefined package is at variance with the current
state of the package. Typically this situation occurs when symbols
are exported by calling <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_export.htm" title="EXPORT (MGL-PAX:CLHS FUNCTION)"><code>export</code></a> (as is the case with <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>) as
opposed to adding <code>:export</code> forms to the <code>defpackage</code> form and the
package definition is subsequently reevaluated. See the section on
<a href="http://www.sbcl.org/manual/#Package-Variance" >package variance</a> in
the SBCL manual.</p>

<p>The bottom line is that if you rely on <code>defsection</code> to do the
exporting, then you'd better use <code>define-package</code>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ADEFINE-GLOSSARY-TERM-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L248">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO" >define-glossary-term</a></span></span> <span class="locative-args">name (&amp;key title url (discard-documentation-p *discard-documentation-p*)) &amp;optional docstring</span></span></p>

<p>Define a global variable with <code>name</code>, and set it to a <a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a> object. <code>title</code>, <code>url</code> and <code>docstring</code> are markdown strings or
<code>nil</code>. Glossary terms are <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>ed in the lightweight bullet +
locative + name/title style. See the glossary entry <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> for an
example.</p>

<p>When a glossary term is linked to in documentation, its <code>title</code> will
be the link text instead of the name of the symbol (as with
<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>s).</p>

<p>Glossary entries with a non-<code>nil</code> <code>url</code> are like external links: they
are linked to their <code>url</code> in the generated documentation. These offer
a more reliable alternative to using markdown reference links and
are usually not included in <code>section</code>s.</p>

<p>When <code>discard-documentation-p</code> (defaults to <a href="#MGL-PAX:*DISCARD-DOCUMENTATION-P*%20VARIABLE" title="MGL-PAX:*DISCARD-DOCUMENTATION-P* VARIABLE"><code>*discard-documentation-p*</code></a>)
is true, <code>docstring</code> will not be recorded to save memory.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40PARSING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PARSING%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">&#8592;</a> <a href="#MGL-PAX:@BASICS%20MGL-PAX:SECTION" title="Basics">&#8593;</a> <a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION" title="PAX Locatives">&#8594;</a> <a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/parse.lisp#L5">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION">5.1 Parsing</a></h3>
<p>When <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating Sources in Emacs</a> or <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a>, references
are parsed from the buffer content or docstrings, respectively. In
either case, <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>s are extracted from <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a>s and then turned into
<a href="dref-manual.html#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">DRef names</a> to form <a href="dref-manual.html#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="reference">DRef references</a> maybe with locatives found next to the <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a>.</p>
<p><a id="x-28MGL-PAX-3A-40WORD-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/parse.lisp#L14">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" >word</a></span></span></span></p>

<p>A <em>word</em> is a string from which we want to extract a <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>. When
<a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating</a>, the word is
<code>slime-symbol-at-point</code>. When <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a>, it is a
non-empty string between whitespace characters in a docstring.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40NAME-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/parse.lisp#L24">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" >name</a></span></span></span></p>

<p>A <em>name</em> is a string that denotes a possible <a href="dref-manual.html#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">DRef
 name</a> (e.g. an <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_intern.htm" title="INTERN (MGL-PAX:CLHS FUNCTION)"><code>intern</code></a>ed <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL (MGL-PAX:CLHS CLASS)"><code>symbol</code></a>, the name of a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE (MGL-PAX:CLHS CLASS)"><code>package</code></a>
or an <a href="dref-manual.html#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a>). Names are constructed from <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a>s by trimming
some prefixes and suffixes. For a given word, multiple candidate
names are considered in the following order.</p>

<ol>
<li><p>The entire word.</p></li>
<li><p>Trimming the characters `#&lt;{;&quot;'`` from the left of the word.</p></li>
<li><p>Trimming the characters `,;:.&gt;}&quot;'`` from the right of the word.</p></li>
<li><p>Trimming both of the previous two at the same time.</p></li>
<li><p>From the result of 4., further removing some plural markers.</p></li>
<li><p>From the result of 4., further removing non-uppercase prefixes
   and suffixes.</p></li>
</ol>

<p>For example, when <code>m-.</code> is pressed while point is over
<code>nonREADable.</code>, the last word of the sentence <code>It may be
nonREADable.</code>, the following names are considered until one is found
with a definition:</p>

<ol>
<li><p>The entire word, <code>&quot;nonREADable.&quot;</code>.</p></li>
<li><p>Trimming left does not produce a new word.</p></li>
<li><p>Trimming right removes the dot and gives <code>&quot;nonREADable&quot;</code>.</p></li>
<li><p>Trimming both is the same as trimming right.</p></li>
<li><p>No plural markers are found.</p></li>
<li><p>The lowercase prefix and suffix is removed around the uppercase
   core, giving <code>&quot;READ&quot;</code>. This has a definition, which `M-.' will
   visit.</p></li>
</ol>

<p>The exact rules for steps 5. and 6. are the following.</p>

<ul>
<li><p>If a <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a> ends with what looks like a plural
marker (case-insensitive), then a <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> is created by removing it.
For example, from the <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a> <code>buses</code> the plural marker <code>es</code> is
removed to produce the <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> <code>bus</code>. The list of plural markers
considered is <code>s</code> (e.g. <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_car_c.htm" title="CAR (MGL-PAX:CLHS FUNCTION)"><code>cars</code></a>), <code>es</code> (e.g. <code>buses</code>), <code>ses</code> (e.g.
<code>gasses</code>), <code>zes</code> (e.g. <code>fezzes</code>), and <code>ren</code> (e.g. <code>children</code>).</p></li>
<li><p>From a <a href="#MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM" title="codifiable">codifiable</a> <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a>, a <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> is created by removing the prefix
before the first and the suffix after the last uppercase character
if they contain at least one lowercase character.</p></li>
</ul></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40PAX-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">&#8594;</a> <a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION" title="PAX Locatives">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/locatives.lisp#L5">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION">6 PAX Locatives</a></h2>
<p>To the <a href="dref-manual.html#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">Locative Types</a> defined by DRef, PAX adds a few of its own.</p>
<p><a id="x-28MGL-PAX-3ASECTION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:SECTION%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/locatives.lisp#L19">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" >section</a></span></span></span></p>

<p>Refers to a <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a> defined by <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>.</p>

<p><code>section</code> is <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a> but not exported by
default (see <a href="#MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-REFERENCE-P GENERIC-FUNCTION"><code>exportable-reference-p</code></a>).</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AGLOSSARY-TERM-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:GLOSSARY-TERM%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/locatives.lisp#L67">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:GLOSSARY-TERM%20MGL-PAX:LOCATIVE" >glossary-term</a></span></span></span></p>

<p>Refers to a <a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a> defined by <a href="#MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-GLOSSARY-TERM MGL-PAX:MACRO"><code>define-glossary-term</code></a>.</p>

<p><code>glossary-term</code> is <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a> but not exported by
default (see <a href="#MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-REFERENCE-P GENERIC-FUNCTION"><code>exportable-reference-p</code></a>).</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ADISLOCATED-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/locatives.lisp#L164">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE" >dislocated</a></span></span></span></p>

<p>Refers to a symbol in a non-specific context. Useful for preventing
<a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a>. For example, if
there is a function called <code>foo</code> then</p>

<pre><code>`FOO`
</code></pre>

<p>will be linked (if <a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-CODE* VARIABLE"><code>*document-link-code*</code></a>) to its definition. However,</p>

<pre><code>[`FOO`][dislocated]
</code></pre>

<p>will not be. With a dislocated locative, <a href="dref-manual.html#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a> always fails with a
<a href="dref-manual.html#DREF-EXT:LOCATE-ERROR%20CONDITION" title="DREF-EXT:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition. Also see <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">Preventing Autolinking</a>.</p>

<p><code>dislocated</code> references do not <a href="dref-manual.html#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AARGUMENT-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:ARGUMENT%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/locatives.lisp#L187">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:ARGUMENT%20MGL-PAX:LOCATIVE" >argument</a></span></span></span></p>

<p>An alias for <a href="#MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE" title="MGL-PAX:DISLOCATED MGL-PAX:LOCATIVE"><code>dislocated</code></a>, so that one can refer to an argument of
a macro without accidentally linking to a class that has the same
name as that argument. In the following example,
<code>format</code> may link to <code>cl:format</code> (if we generated
documentation for it):</p>

<pre><code><span class="code">"See FORMAT in DOCUMENT."</span></code></pre>

<p>Since <code>argument</code> is a locative, we can prevent that linking by writing:</p>

<pre><code><span class="code">"See the FORMAT argument of DOCUMENT."</span></code></pre>

<p><code>argument</code> references do not <a href="dref-manual.html#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AINCLUDE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:INCLUDE%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/locatives.lisp#L225">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:INCLUDE%20MGL-PAX:LOCATIVE" >include</a></span></span> <span class="locative-args">source &amp;key line-prefix header footer header-nl footer-nl</span></span></p>

<p>This pseudolocative refers to a region of a file. <code>source</code> can be a
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_string.htm" title="STRING (MGL-PAX:CLHS CLASS)"><code>string</code></a> or a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pn.htm" title="PATHNAME (MGL-PAX:CLHS CLASS)"><code>pathname</code></a>, in which case the whole file
is being pointed to, or it can explicitly supply <code>start</code>, <code>end</code>
locatives. <code>include</code> is typically used to include non-lisp files in
the documentation (say markdown or Elisp as in the next example) or
regions of Lisp source files. This can reduce clutter and
duplication.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defsection</span></i> @example-section <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code">mgl-pax.el <span class="paren3">(<span class="code">include #.<span class="paren4">(<span class="code">asdf:system-relative-pathname
                          <span class="keyword">:mgl-pax</span> <span class="string">"src/mgl-pax.el"</span></span>)</span>
                       <span class="keyword">:header-nl</span> <span class="string">"```elisp"</span> <span class="keyword">:footer-nl</span> <span class="string">"```"</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">foo-example <span class="paren3">(<span class="code">include <span class="paren4">(<span class="code"><span class="keyword">:start</span> <span class="paren5">(<span class="code">dref-ext:make-source-location <i><span class="symbol">function</span></i></span>)</span>
                         <span class="keyword">:end</span> <span class="paren5">(<span class="code">dref-ext:source-location-p <i><span class="symbol">function</span></i></span>)</span></span>)</span>
                        <span class="keyword">:header-nl</span> <span class="string">"```"</span>
                        <span class="keyword">:footer-nl</span> <span class="string">"```"</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<p>In the above example, when documentation is generated, the entire
<code>src/mgl-pax.el</code> file is included in the markdown output surrounded
by the strings given as <code>header-nl</code> and <code>footer-nl</code>. The documentation
of <code>foo-example</code> will be the region of the file from the
<a href="dref-manual.html#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> of the <code>start</code> reference (inclusive) to the
<code>source-location</code> of the <code>end</code> reference (exclusive). If only one of
<code>start</code> and <code>end</code> is specified, then they default to the beginning and
end of the file, respectively.</p>

<p>Since <code>start</code> and <code>end</code> are literal references, pressing <code>M-.</code> on
<code>pax.el</code> will open the <code>src/mgl-pax.el</code> file and put the cursor on
its first character. <code>M-.</code> on <code>foo-example</code> will go to the source
location of the <code>foo</code> function.</p>

<p>With the <a href="dref-manual.html#LAMBDA%20MGL-PAX:LOCATIVE" title="LAMBDA MGL-PAX:LOCATIVE"><code>lambda</code></a> locative, one can specify positions in arbitrary
files as in, for example, <a href="#MGL-PAX:@EMACS-SETUP-FOR-BROWSING%20MGL-PAX:SECTION" title="Emacs Setup for Browsing">Emacs Setup for Browsing</a>.</p>

<ul>
<li><p><code>source</code> is either an absolute pathname designator or a list
  matching the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#destructuring_lambda_list" title="&quot;destructuring lambda list&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">destructuring lambda list</a> <code>(&amp;key start end)</code>,
  where <code>start</code> and <code>end</code> must be <code>nil</code> or <code>(&lt;name&gt; &lt;locative&gt;)</code>
  lists (not evaluated) like a <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> entry. Their
  <code>source-location</code>s constitute the bounds of the region of the file
  to be included. Note that the file of the source location of <code>start</code>
  and <code>end</code> must be the same. If <code>source</code> is a pathname designator, then
  it must be absolute so that the locative is context independent.</p></li>
<li><p>If specified, <code>line-prefix</code> is a string that's prepended to each
  line included in the documentation. For example, a string of four
  spaces makes markdown think it's a code block.</p></li>
<li><p><code>header</code> and <code>footer</code>, if non-<code>nil</code>, are printed before the included
  string.</p></li>
<li><p><code>header-nl</code> and <code>footer-nl</code>, if non-<code>nil</code>, are printed between two
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_terpri.htm" title="FRESH-LINE (MGL-PAX:CLHS FUNCTION)"><code>fresh-line</code></a> calls.</p></li>
</ul>

<p><code>include</code> is not <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>, and <code>include</code> references do
not <a href="dref-manual.html#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ADOCSTRING-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:DOCSTRING%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/locatives.lisp#L213">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCSTRING%20MGL-PAX:LOCATIVE" >docstring</a></span></span></span></p>

<p><code>docstring</code> is a pseudolocative for including the parse tree of the
markdown <a href="dref-manual.html#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a> of a definition in the parse tree of
a docstring when generating documentation. It has no source location
information and only works as an explicit link. This construct is
intended to allow docstrings to live closer to their implementation,
which typically involves a non-exported definition.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> div2 <span class="paren2">(<span class="code">x</span>)</span>
  <span class="string">"X must be [even* type][docstring]."</span>
  <span class="paren2">(<span class="code">/ x 2</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">deftype</span></i> even* <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"an even integer"</span>
  '<span class="paren2">(<span class="code">satisfies evenp</span>)</span></span>)</span>

<span class="paren1">(<span class="code">document #'div2</span>)</span>
.. - [function] DIV2 X
..
..     X must be an even integer.
..</span></code></pre>

<p>There is no way to <a href="dref-manual.html#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a> <code>docstring</code>s, so nothing to <a href="dref-manual.html#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a> either.</p></li>
</ul>
<p><a id="x-28GO-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="GO%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/locatives.lisp#L103">[locative]</a></span> <span class="reference-object"><a href="#GO%20MGL-PAX:LOCATIVE" >go</a></span></span> <span class="locative-args">(name locative)</span></span></p>

<p>Redirect to a definition in the context of the <a href="dref-manual.html#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="reference">reference</a>
designated by <code>name</code> and <code>locative</code>. This pseudolocative is intended for
things that have no explicit global definition.</p>

<p>As an example, consider this part of a hypothetical documentation of
CLOS:</p>

<pre><code>(defsection @clos ()
  (defmethod macro)
  (call-next-method (go (defmethod macro))))
</code></pre>

<p>The <code>go</code> reference exports the symbol <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defmet.htm" title="DEFMETHOD (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>call-next-method</code></a> and also
produces a terse redirection message in the documentation.</p>

<p><code>go</code> behaves as described below.</p>

<ul>
<li><p>A <code>go</code> reference <a href="dref-manual.html#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>s to what <code>name</code> with <code>locative</code> resolves to:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">resolve <span class="paren2">(<span class="code">dref 'xxx '<span class="paren3">(<span class="code"><i><span class="symbol">go</span></i> <span class="paren4">(<span class="code">print <i><span class="symbol">function</span></i></span>)</span></span>)</span></span>)</span></span>)</span>
==&gt; #&lt;FUNCTION PRINT&gt;</span></code></pre></li>
<li><p>The <a href="dref-manual.html#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a> of a <code>go</code> reference is <code>nil</code>.</p></li>
<li><p><a href="dref-manual.html#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> (thus <code>M-.</code>) returns the source location of the
  embedded reference:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">equal <span class="paren2">(<span class="code">source-location <span class="paren3">(<span class="code">dref 'xxx '<span class="paren4">(<span class="code"><i><span class="symbol">go</span></i> <span class="paren5">(<span class="code">print <i><span class="symbol">function</span></i></span>)</span></span>)</span></span>)</span></span>)</span>
       <span class="paren2">(<span class="code">source-location <span class="paren3">(<span class="code">dref 'print '<i><span class="symbol">function</span></i></span>)</span></span>)</span></span>)</span>
=&gt; T</span></code></pre></li>
</ul></li>
</ul>
<p><a id="x-28MGL-PAX-3ACLHS-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:CLHS%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/locatives.lisp#L352">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:CLHS%20MGL-PAX:LOCATIVE" >clhs</a></span></span> <span class="locative-args">&amp;optional nested-locative</span></span></p>

<p>Refers to sections or definitions in the Common Lisp Hyperspec.
These have no source location so <code>M-.</code> will not work. What works
is linking in documentation, including <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">Browsing Live Documentation</a>.
The generated links are relative to <a href="#MGL-PAX:*DOCUMENT-HYPERSPEC-ROOT*%20VARIABLE" title="MGL-PAX:*DOCUMENT-HYPERSPEC-ROOT* VARIABLE"><code>*document-hyperspec-root*</code></a> and
work even if <a href="#MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC* VARIABLE"><code>*document-link-to-hyperspec*</code></a> is <code>nil</code>.</p>

<ul>
<li><p><em>definitions</em>: These are typically unnecessary as <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> will
  produce the same link for e.g. <code>PPRINT</code>, <code>[PPRINT][function]</code>,
  or <code>[pprint][]</code> if <code>*document-link-to-hyperspec*</code> is non-<code>nil</code> and the
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_pr.htm" title="PPRINT (MGL-PAX:CLHS FUNCTION)"><code>pprint</code></a> function in the running Lisp is not being <code>document</code>ed. When
  <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">Browsing Live Documentation</a>, a slight difference is that
  everything is being <code>document</code>ed, so using the <code>clhs</code> link bypasses
  the page with the definition in the running Lisp.</p>

<ul>
<li><p><em>unambiguous</em>: <code>[pprint][clhs]</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_pr.htm" title="PPRINT (MGL-PAX:CLHS FUNCTION)">pprint</a>)</p></li>
<li><p><em>ambiguous</em>: <code>[function][clhs]</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/a_fn.htm" title="FUNCTION MGL-PAX:CLHS">function</a>)</p></li>
<li><p><em>explicit</em>: <code>[function][(clhs class)]</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION (MGL-PAX:CLHS CLASS)">function</a>)</p></li>
</ul></li>
<li><p><em>glossary terms</em> (case-insensitive):</p>

<ul>
<li><code>[lambda list][(clhs glossary-term)]</code>
  (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_l.htm#lambda_list" title="&quot;lambda list&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">lambda list</a>)</li>
</ul></li>
<li><p><em>issues</em>:</p>

<ul>
<li><p><code>[ISSUE:AREF-1D][clhs]</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Issues/iss009_w.htm" title="&quot;ISSUE:AREF-1D&quot; (MGL-PAX:CLHS MGL-PAX:SECTION)">ISSUE:AREF-1D</a>)</p></li>
<li><p><code>[ISSUE:AREF-1D][(clhs section)]</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Issues/iss009_w.htm" title="&quot;ISSUE:AREF-1D&quot; (MGL-PAX:CLHS MGL-PAX:SECTION)">ISSUE:AREF-1D</a>)</p></li>
</ul></li>
<li><p><em>issue summaries</em>: These render
   as (<a href="http://www.lispworks.com/documentation/HyperSpec/Issues/iss045.htm" title="&quot;SUMMARY:CHARACTER-PROPOSAL:2-6-5&quot; (MGL-PAX:CLHS MGL-PAX:SECTION)">SUMMARY:CHARACTER-PROPOSAL:2-6-5</a>):</p>

<ul>
<li><p><code>[SUMMARY:CHARACTER-PROPOSAL:2-6-5][clhs]</code></p></li>
<li><p><code>[SUMMARY:CHARACTER-PROPOSAL:2-6-5][(clhs section)]</code></p></li>
</ul>

<p>Since these summary ids are not particularly reader friendly,
the alternative form of the <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">Specified Locative</a> may be used:</p>

<ul>
<li><code>[see this][SUMMARY:CHARACTER-PROPOSAL:2-6-5 (clhs
  section)]</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Issues/iss045.htm" title="&quot;SUMMARY:CHARACTER-PROPOSAL:2-6-5&quot; (MGL-PAX:CLHS MGL-PAX:SECTION)">see this</a>)</li>
</ul></li>
<li><p><em>sections</em>:</p>

<ul>
<li><p><em>by section number</em>: <code>[3.4][clhs]</code> or <code>[3.4][(clhs
   section)]</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/03_d.htm" title="&quot;3.4&quot; (MGL-PAX:CLHS MGL-PAX:SECTION)">3.4</a>)</p></li>
<li><p><em>by section title</em> (case-insensitive, substring match):
   <code>[lambda lists][clhs]</code> or <code>[lambda lists][(clhs
   section)]</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/03_d.htm" title="&quot;3.4&quot; (MGL-PAX:CLHS MGL-PAX:SECTION)">lambda lists</a>)</p></li>
<li><p><em>by filename</em>: <code>[03_d][clhs]</code> or <code>[03_d][(clhs
   section)]</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/03_d.htm" title="&quot;3.4&quot; (MGL-PAX:CLHS MGL-PAX:SECTION)">03_d</a>)</p></li>
</ul></li>
</ul>

<p>As the above examples show, the <code>nested-locative</code> argument of the <a href="#MGL-PAX:CLHS%20MGL-PAX:LOCATIVE" title="MGL-PAX:CLHS MGL-PAX:LOCATIVE"><code>clhs</code></a>
locative may be omitted. In that case, definitions, glossary terms,
issues, issue summaries, and sections are considered in that order.
Sections are considered last because a substring of a section title
can be matched by chance easily.</p>

<p>All examples so far used <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">explicit</a>
links. Autolinking also works if the <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> is marked up as code or
is <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">codified</a> (e.g. in <code>COS clhs</code> (<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_sin_c.htm" title="COS (MGL-PAX:CLHS FUNCTION)"><code>cos</code></a> clhs).</p>

<p>As mentioned above, <code>m-.</code> does not do anything over <code>clhs</code>
references. Slightly more usefully, the <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">live documentation
browser</a> understands <code>clhs</code> links so one
can enter inputs like <code>3.4 clhs</code>, <code>&quot;lambda list&quot; clhs</code> or <code>error (clhs
function)</code>.</p>

<p><code>clhs</code> references do not <a href="dref-manual.html#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40NAVIGATING-IN-EMACS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION" title="PAX Locatives">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/navigate&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/navigate/navigate.lisp#L64">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION">7 Navigating Sources in Emacs</a></h2>
<p>Integration into <a href="https://slime.common-lisp.dev/" title="SLIME">SLIME</a>'s <a href="http://common-lisp.net/project/slime/doc/html/Finding-definitions.html#Finding-definitions" title="`m-.`"><code>m-.</code></a> (<code>slime-edit-definition</code>) allows
one to visit the <a href="dref-manual.html#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> of a definition(<a href="dref-manual.html#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>0</code></a> <a href="dref-manual.html#DREF:DREF%20FUNCTION" title="DREF:DREF FUNCTION"><code>1</code></a>).</p>
<p>The definition is either determined from the buffer content at point
or is prompted. If prompted, then the format is <code>&lt;name&gt; &lt;locative&gt;</code>,
where the locative may be omitted to recover stock Slime behaviour.</p>
<p>When determining the definition from the buffer contents,
<code>slime-symbol-at-point</code> is parsed as a <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a>, then candidate
locatives are looked for before and after that word. Thus, if a
locative is the previous or the next expression around the symbol of
interest, then <code>M-.</code> will go straight to the definition which
corresponds to the locative. If that fails, <code>M-.</code> will try to find
the definitions in the normal way, which may involve popping up an
xref buffer and letting the user interactively select one of
possible definitions.</p>
<p>In the following examples, when the cursor is on one of the
characters of <code>foo</code> or just after <code>foo</code>, pressing <code>M-.</code> will visit
the definition of function <code>foo</code>:</p>
<pre><code>function foo
foo function
(function foo)
(foo function)
</code></pre>
<p>In particular, <a href="dref-manual.html#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="reference">reference</a>s in a <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> form are in (<code>name</code>
<a href="dref-manual.html#MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE" title="MGL-PAX:LOCATIVE MGL-PAX:LOCATIVE"><code>locative</code></a>) format so <code>M-.</code> will work just fine there.</p>
<p>Just like vanilla <code>M-.</code>, this works in comments and docstrings. In
the next example, pressing <code>M-.</code> on <code>foo</code> will visit <code>foo</code>'s
default method:</p>
<pre><code><span class="code"><span class="comment">;; See RESOLVE* (method () (dref)) for how this all works.</span></span></code></pre>
<p>With a prefix argument (<code>C-u M-.</code>), one can enter a symbol plus a
locative separated by whitespace to preselect one of the
possibilities.</p>
<p>The <code>M-.</code> extensions can be enabled by loading <code>src/mgl-pax.el</code>.
See <a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">Emacs Setup</a>. In addition, the Elisp command
<code>mgl-pax-edit-parent-section</code> visits the source location of the
section containing the definition with <code>point</code> in it. See
<a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">Browsing Live Documentation</a>.</p>
<p><a id="x-28-22mgl-pax-2Fnavigate-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">&#8592;</a> <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">&#8593;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8594;</a> <a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/navigate&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/mgl-pax.asd#L1">&#955;</a></span></span></p>
<h3><a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM">7.1 The mgl-pax/navigate ASDF System</a></h3>
<ul>
<li>Description: Slime <code>M-.</code> support for MGL-PAX.</li>
<li>Long Description: Autoloaded by Slime's <code>M-.</code> when <code>src/pax.el</code> is
  loaded. See <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating Sources in Emacs</a>.</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40GENERATING-DOCUMENTATION-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%2Fnavigate%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/navigate&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION" title="The `document` Function">&#8594;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L5">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION">8 Generating Documentation</a></h2>
<p><a id="x-28MGL-PAX-3A-40DOCUMENT-FUNCTION-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@DOCUMENTABLES%20MGL-PAX:SECTION" title="Documentables">&#8594;</a> <a href="#MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION" title="The `document` Function">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L769">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION">8.1 The <code>document</code> Function</a></h3>
<p><a id="x-28MGL-PAX-3ADOCUMENT-20FUNCTION-29"></a>
<a id="MGL-PAX:DOCUMENT%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L784">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENT%20FUNCTION" >document</a></span></span> <span class="locative-args">documentable &amp;key (stream t) pages (format :plain)</span></span></p>

<p>Write <code>documentable</code> in <code>format</code> to <code>stream</code> diverting some output to <code>pages</code>.
<code>format</code> is a 3BMD output format (currently one of <code>:markdown</code>,
<code>:html</code> and <code>:plain</code>). <code>stream</code> may be a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_stream.htm" title="STREAM (MGL-PAX:CLHS CLASS)"><code>stream</code></a> object, <code>t</code> or <code>nil</code>
as with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_format.htm" title="FORMAT (MGL-PAX:CLHS FUNCTION)"><code>cl:format</code></a>.</p>

<p>To look up the documentation of the <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> function itself:</p>

<pre><code>(document #'document)
</code></pre>

<p>The same with fancy markup:</p>

<pre><code>(document #'document :format :markdown)
</code></pre>

<p>To document a <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>:</p>

<pre><code>(document @pax-manual)
</code></pre>

<p>To generate the documentation for separate libraries with automatic
cross-links:</p>

<pre><code>(document (list pax::@pax-manual dref::@dref-manual) :format :markdown)
</code></pre>

<p>See <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">Utilities for Generating Documentation</a> for more.</p>

<p>Definitions that do not define a first-class object are supported
via <a href="dref-manual.html" title="DRef Manual">DRef</a>:</p>

<pre><code>(document (dref:locate 'foo 'type))
</code></pre>

<p>There are quite a few special variables that affect how output is
generated, see <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a>, <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>,
<a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">Linking to Sections</a>, and
<a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">Miscellaneous Variables</a>.</p>

<p>For the details, see the following sections, starting with
<a href="#MGL-PAX:@DOCUMENTABLES%20MGL-PAX:SECTION" title="Documentables">Documentables</a>. Also see <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">Writing Extensions</a> and <a href="#MGL-PAX:DOCUMENT-OBJECT*%20GENERIC-FUNCTION" title="MGL-PAX:DOCUMENT-OBJECT* GENERIC-FUNCTION"><code>document-object*</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40DOCUMENTABLES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@DOCUMENTABLES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION" title="The `document` Function">&#8592;</a> <a href="#MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION" title="The `document` Function">&#8593;</a> <a href="#MGL-PAX:@DOCUMENT-RETURN%20MGL-PAX:SECTION" title="Return Values">&#8594;</a> <a href="#MGL-PAX:@DOCUMENTABLES%20MGL-PAX:SECTION" title="Documentables">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L626">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@DOCUMENTABLES%20MGL-PAX:SECTION">8.1.1 Documentables</a></h4>
<ul>
<li><p>The <code>documentable</code> argument may be a <a href="dref-manual.html#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> or anything else
  that is <a href="dref-manual.html#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>able. This includes non-<code>dref</code> <a href="dref-manual.html#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>s and
  first-class objects such as <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION (MGL-PAX:CLHS CLASS)"><code>function</code></a>s.</p></li>
<li><p>If <code>documentable</code> is a string, then it is processed like a docstring
  in <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>. That is, with <a href="#MGL-PAX:@MARKDOWN-IN-DOCSTRINGS%20MGL-PAX:SECTION" title="Markdown in Docstrings">docstring sanitization</a>, <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a>, and linking (see
  <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>, <a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">Linking to the Hyperspec</a>).</p></li>
<li><p>Finally, <code>documentable</code> may be a nested list of <code>locate</code>able objects
  and docstrings. The structure of the list is unimportant. The
  objects in it are documented in depth-first order.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40DOCUMENT-RETURN-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@DOCUMENT-RETURN%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@DOCUMENTABLES%20MGL-PAX:SECTION" title="Documentables">&#8592;</a> <a href="#MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION" title="The `document` Function">&#8593;</a> <a href="#MGL-PAX:@PAGES%20MGL-PAX:SECTION" title="Pages">&#8594;</a> <a href="#MGL-PAX:@DOCUMENT-RETURN%20MGL-PAX:SECTION" title="Return Values">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1190">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@DOCUMENT-RETURN%20MGL-PAX:SECTION">8.1.2 Return Values</a></h4>
<p>If <code>pages</code> are <code>nil</code>, then <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> - like <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_format.htm" title="FORMAT (MGL-PAX:CLHS FUNCTION)"><code>cl:format</code></a> - returns a
string (when <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_stream.htm" title="STREAM (MGL-PAX:CLHS CLASS)"><code>stream</code></a> is <code>nil</code>) else <code>nil</code>.</p>
<p>If <code>pages</code>, then a list of output designators are returned, one for
each non-empty page (to which some output has been written), which
are determined as follows.</p>
<ul>
<li><p>The string itself if the output was to a string.</p></li>
<li><p>The stream if the output was to a stream.</p></li>
<li><p>The pathname of the file if the output was to a file.</p></li>
</ul>
<p>If the default page given by the <code>stream</code> argument of <code>document</code> was
written to, then its output designator is the first element of the
returned list. The rest of the designators correspond to the
non-empty pages in the <code>pages</code> argument of <code>document</code> in that order.</p>
<p><a id="x-28MGL-PAX-3A-40PAGES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PAGES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@DOCUMENT-RETURN%20MGL-PAX:SECTION" title="Return Values">&#8592;</a> <a href="#MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION" title="The `document` Function">&#8593;</a> <a href="#MGL-PAX:@PACKAGE-AND-READTABLE%20MGL-PAX:SECTION" title="Package and Readtable">&#8594;</a> <a href="#MGL-PAX:@PAGES%20MGL-PAX:SECTION" title="Pages">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L861">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@PAGES%20MGL-PAX:SECTION">8.1.3 Pages</a></h4>
<p>The <code>pages</code> argument of <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> is to create multi-page documents
by routing some of the generated output to files, strings or
streams. <code>pages</code> is a list of page specification elements. A page spec
is a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_p.htm#property_list" title="&quot;property list&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">property list</a> with keys <code>:objects</code>, <code>:output</code>,
<code>:uri-fragment</code>, <code>:source-uri-fn</code>, <code>:header-fn</code> and <code>:footer-fn</code>. <code>objects</code> is
a list of objects (references are allowed but not required) whose
documentation is to be sent to <code>:output</code>.</p>
<p>Documentation is initially sent to a default stream (the <code>stream</code>
argument of <code>document</code>), but output is redirected if the thing being
currently documented is the <code>:object</code> of a <code>page-spec</code>.</p>
<p><code>:output</code> can be a number things:</p>
<ul>
<li><p>If it's <code>nil</code>, then output will be collected in a string.</p></li>
<li><p>If it's <code>t</code>, then output will be sent to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_debug_.htm" title="*STANDARD-OUTPUT* (MGL-PAX:CLHS VARIABLE)"><code>*standard-output*</code></a>.</p></li>
<li><p>If it's a stream, then output will be sent to that stream.</p></li>
<li><p>If it's a list whose first element is a string or a pathname, then
  output will be sent to the file denoted by that and the rest of
  the elements of the list are passed on to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_open.htm" title="OPEN (MGL-PAX:CLHS FUNCTION)"><code>cl:open</code></a>. One extra
  keyword argument is <code>:ensure-directories-exist</code>. If it's true,
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_ensu_1.htm" title="ENSURE-DIRECTORIES-EXIST (MGL-PAX:CLHS FUNCTION)"><code>ensure-directories-exist</code></a> will be called on the pathname before
  it's opened.</p></li>
</ul>
<p>Note that even if <code>pages</code> is specified, <code>stream</code> acts as a catch all,
absorbing the generated documentation for references not claimed by
any pages.</p>
<p><code>:header-fn</code>, if not <code>nil</code>, is a function of a single stream argument,
which is called just before the first write to the page. Since
<code>:format</code> <code>:html</code> only generates HTML fragments, this makes it possible
to print arbitrary headers, typically setting the title, CSS
stylesheet, or charset.</p>
<p><code>:footer-fn</code> is similar to <code>:header-fn</code>, but it's called after the last
write to the page. For HTML, it typically just closes the body.</p>
<p><code>:uri-fragment</code> is a string such as <code>&quot;doc/manual.html&quot;</code> that specifies
where the page will be deployed on a webserver. It defines how links
between pages will look. If it's not specified and <code>:output</code> refers to
a file, then it defaults to the name of the file. If <code>:uri-fragment</code>
is <code>nil</code>, then no links will be made to or from that page.</p>
<p>Finally, <code>:source-uri-fn</code> is a function of a single, <code>reference</code>
argument. If it returns a value other than <code>nil</code>, then it must be a
string representing an URI. If <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_format.htm" title="FORMAT (MGL-PAX:CLHS FUNCTION)"><code>format</code></a> is <code>:html</code> and
<a href="#MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES*%20VARIABLE" title="MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES* VARIABLE"><code>*document-mark-up-signatures*</code></a> is true, then the locative as
displayed in the signature will be a link to this <code>uri</code>. See
<a href="#MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION" title="MGL-PAX:MAKE-GIT-SOURCE-URI-FN FUNCTION"><code>make-git-source-uri-fn</code></a>.</p>
<p><code>pages</code> may look something like this:</p>
<pre><code><span class="code">`<span class="paren1">(<span class="code"><span class="paren2">(<span class="code"><span class="comment">;; The section about SECTIONs and everything below it ...
</span>   <span class="keyword">:objects</span> <span class="paren3">(<span class="code">, @sections</span>)</span>
   <span class="comment">;; ... is so boring that it's not worth the disk space, so
</span>   <span class="comment">;; send it to a string.
</span>   <span class="keyword">:output</span> <span class="paren3">(<span class="code">nil</span>)</span>
   <span class="comment">;; Explicitly tell other pages not to link to these guys.
</span>   <span class="keyword">:uri-fragment</span> nil</span>)</span>
  <span class="comment">;; Send the @EXTENSION-API section and everything reachable
</span>  <span class="comment">;; from it ...
</span>  <span class="paren2">(<span class="code"><span class="keyword">:objects</span> <span class="paren3">(<span class="code">, @extension-api</span>)</span>
   <span class="comment">;; ... to build/tmp/pax-extension-api.html.
</span>   <span class="keyword">:output</span> <span class="string">"build/tmp/pax-extension-api.html"</span>
   <span class="comment">;; However, on the web server html files will be at this
</span>   <span class="comment">;; location relative to some common root, so override the
</span>   <span class="comment">;; default:
</span>   <span class="keyword">:uri-fragment</span> <span class="string">"doc/dev/pax-extension-api.html"</span>
   <span class="comment">;; Set html page title, stylesheet, charset.
</span>   <span class="keyword">:header-fn</span> 'write-html-header
   <span class="comment">;; Just close the body.
</span>   <span class="keyword">:footer-fn</span> 'write-html-footer</span>)</span>
  <span class="comment">;; Catch references that were not reachable from the above. It
</span>  <span class="comment">;; is important for this page spec to be last.
</span>  <span class="paren2">(<span class="code"><span class="keyword">:objects</span> <span class="paren3">(<span class="code">, @pax-manual</span>)</span>
   <span class="keyword">:output</span> <span class="string">"build/tmp/manual.html"</span>
   <span class="comment">;; Links from the extension api page to the manual page will
</span>   <span class="comment">;; be to ../user/pax-manual#&lt;anchor&gt;, while links going to
</span>   <span class="comment">;; the opposite direction will be to
</span>   <span class="comment">;; ../dev/pax-extension-api.html#&lt;anchor&gt;.
</span>   <span class="keyword">:uri-fragment</span> <span class="string">"doc/user/pax-manual.html"</span>
   <span class="keyword">:header-fn</span> 'write-html-header
   <span class="keyword">:footer-fn</span> 'write-html-footer</span>)</span></span>)</span></span></code></pre>
<p><a id="x-28MGL-PAX-3A-40PACKAGE-AND-READTABLE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PACKAGE-AND-READTABLE%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PAGES%20MGL-PAX:SECTION" title="Pages">&#8592;</a> <a href="#MGL-PAX:@DOCUMENT-FUNCTION%20MGL-PAX:SECTION" title="The `document` Function">&#8593;</a> <a href="#MGL-PAX:@HOME-SECTION%20MGL-PAX:SECTION" title="Home Section">&#8594;</a> <a href="#MGL-PAX:@PACKAGE-AND-READTABLE%20MGL-PAX:SECTION" title="Package and Readtable">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L3036">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@PACKAGE-AND-READTABLE%20MGL-PAX:SECTION">8.1.4 Package and Readtable</a></h4>
<p>While generating documentation, symbols may be read (e.g. from
docstrings) and printed. What values of <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pkg.htm" title="*PACKAGE* (MGL-PAX:CLHS VARIABLE)"><code>*package*</code></a> and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_rdtabl.htm" title="*READTABLE* (MGL-PAX:CLHS VARIABLE)"><code>*readtable*</code></a>
are used is determined separately for each definition being
documented.</p>
<ul>
<li><p>If the values of <code>*package*</code> and <code>*readtable*</code> in effect at the time
  of definition were captured (e.g. by <a href="dref-manual.html#DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-locative-type</code></a> and
  <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>), then they are used.</p></li>
<li><p>Else, if the definition has a <a href="#MGL-PAX:@HOME-SECTION%20MGL-PAX:SECTION" title="Home Section">Home Section</a> (see below), then the
  home section's <a href="#MGL-PAX:SECTION-PACKAGE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" title="MGL-PAX:SECTION-PACKAGE (MGL-PAX:READER MGL-PAX:SECTION)"><code>section-package</code></a> and <a href="#MGL-PAX:SECTION-READTABLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" title="MGL-PAX:SECTION-READTABLE (MGL-PAX:READER MGL-PAX:SECTION)"><code>section-readtable</code></a> are used.</p></li>
<li><p>Else, if the definition has an argument list, then the package of
  the first argument that's not external in any package is used.</p></li>
<li><p>Else, if the definition is <a href="dref-manual.html#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>d by a symbol, then its
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_symb_3.htm" title="SYMBOL-PACKAGE (MGL-PAX:CLHS FUNCTION)"><code>symbol-package</code></a> is used, and <code>*readtable*</code> is set to the standard
  readtable <code>(named-readtables:find-readtable :common-lisp)</code>.</p></li>
<li><p>Else, <code>*package*</code> is set to the <code>cl-user</code> package and <code>*readtable*</code> to
  the standard readtable.</p></li>
</ul>
<p>The values thus determined come into effect after the name itself is
printed, for printing of the arglist and the docstring.</p>
<pre><code>CL-USER&gt; (pax:document #'foo)
- [function] FOO &lt;!&gt; X Y &amp;KEY (ERRORP T)

    Do something with X and Y.
</code></pre>
<p>In the above, the <code>&lt;!&gt;</code> marks the place where <code>*package*</code> and
<code>*readtable*</code> are bound.</p>
<p><a id="x-28MGL-PAX-3A-40HOME-SECTION-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@HOME-SECTION%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PACKAGE-AND-READTABLE%20MGL-PAX:SECTION" title="Package and Readtable">&#8592;</a> <a href="#MGL-PAX:@PACKAGE-AND-READTABLE%20MGL-PAX:SECTION" title="Package and Readtable">&#8593;</a> <a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/document&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#MGL-PAX:@HOME-SECTION%20MGL-PAX:SECTION" title="Home Section">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L3072">&#955;</a></span></span></p>
<h5><a href="#MGL-PAX:@HOME-SECTION%20MGL-PAX:SECTION">Home Section</a></h5>
<p>The home section of an object is a <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a> that contains the
object's definition in its <a href="#MGL-PAX:SECTION-ENTRIES%20FUNCTION" title="MGL-PAX:SECTION-ENTRIES FUNCTION"><code>section-entries</code></a> or <code>nil</code>. In the
overwhelming majority of cases there should be at most one
containing section.</p>
<p>If there are multiple containing sections, the following apply.</p>
<ul>
<li><p>If the <a href="dref-manual.html#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> of the definition is a non-keyword symbol, only
  those containing sections are considered whose package is closest
  to the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_symb_3.htm" title="SYMBOL-PACKAGE (MGL-PAX:CLHS FUNCTION)"><code>symbol-package</code></a> of the name, where closest is defined as
  having the longest common prefix between the two <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_pkg_na.htm" title="PACKAGE-NAME (MGL-PAX:CLHS FUNCTION)"><code>package-name</code></a>s.</p></li>
<li><p>If there are multiple sections with equally long matches or the
  name is not a non-keyword symbol, then it's undefined which one is
  the home section.</p></li>
</ul>
<p>For example, <code>(mgl-pax:document function)</code> is an entry in the
<code>MGL-PAX::@BASICS</code> section. Unless another section that contains
it is defined in the MGL-PAX package, the home section is guaranteed
to be <code>MGL-PAX::@BASICS</code> because the <code>symbol-package</code>s of
<a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>mgl-pax:document</code></a> and <code>MGL-PAX::@BASICS</code> are the same (hence their
common prefix is maximally long).</p>
<p>This scheme would also work, for example, if the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_h.htm#home_package" title="&quot;home package&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">home package</a>
of <code>document</code> were <code>mgl-pax/impl</code>, and it were reexported from
<code>mgl-pax</code> because the only way to externally change the home package
would be to define a containing section in a package like
<code>mgl-pax/imp</code>.</p>
<p>Thus, relying on the package system makes it possible to find the
intended home section of a definition among multiple containing
sections with high probability. However, for names which are not
symbols, there is no package system to advantage of.</p>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-NORMALIZE-PACKAGES-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L3096">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-NORMALIZE-PACKAGES*%20VARIABLE" >*document-normalize-packages*</a></span></span> <span class="locative-args">t</span></span></p>

<p>Whether to print <code>[in package &lt;package-name&gt;]</code> in the documentation
when the package changes.</p></li>
</ul>
<p><a id="x-28-22mgl-pax-2Fdocument-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@HOME-SECTION%20MGL-PAX:SECTION" title="Home Section">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">&#8594;</a> <a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/document&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/mgl-pax.asd#L1">&#955;</a></span></span></p>
<h3><a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM">8.2 The mgl-pax/document ASDF System</a></h3>
<ul>
<li>Description: Documentation generation support for MGL-PAX.</li>
<li>Long Description: Do not declare a dependency on this system. It is
  autoloaded. See <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a>.</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40BROWSING-LIVE-DOCUMENTATION-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%2Fdocument%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/document&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@PAX-URLS%20MGL-PAX:SECTION" title="PAX URLs">&#8594;</a> <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/browse.lisp#L5">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION">8.3 Browsing Live Documentation</a></h3>
<p>Documentation can be browsed live in Emacs or with an external
browser. HTML documentation, complete with <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a> and
<a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">links</a>, is generated from docstrings of all kinds
of Lisp definitions and PAX <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>s.</p>
<p>If <a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">Emacs Setup</a> has been done, the Elisp function <code>mgl-pax-document</code>
displays documentation as a single HTML page generated by PAX via
Slime. For example, to view the documentation of this very <code>section</code>,
one can do:</p>
<pre><code>M-x mgl-pax-document
View Documentation of: pax::@browsing-live-documentation
</code></pre>
<p>If the empty string is entered, and there is no existing w3m buffer
or w3m is not used, then sections registered in <a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">PAX World</a> are
listed. If there is a w3m buffer, then entering the empty string
displays that buffer.</p>
<p>If we enter <code>function</code> instead, then a <a href="pax:function" >disambiguation
page</a> (note that this and other <code>pax:</code> links only work
in Emacs) will be shown with the documentation of the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION (MGL-PAX:CLHS CLASS)"><code>function</code></a> class
and the <a href="dref-manual.html#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a> locative. One may then follow the links on the page
to navigate to a page with the documentation the desired definition.</p>
<p>Alternatively, a <a href="dref-manual.html#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="locative">locative</a> may be entered as part of the
argument to <code>mgl-pax-document</code> as in <code>function class</code>, which gives
<a href="pax:function%20class" >this result</a>. Finally, the definition of
<a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> in the context of a single-page <a href="pax-manual.html" title="PAX Manual">PAX Manual</a> can be
<a href="pax:pax::@pax-manual#pax:defsection%20pax:macro" >viewed</a> by
entering <code>pax::@pax-manual#pax:defsection pax:macro</code>.</p>
<p>In interactive use, <code>mgl-pax-document</code> defaults to documenting
<code>slime-symbol-at-point</code>, possibly with a nearby locative the same
way as in <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs">Navigating Sources in Emacs</a>. The convenience function
<code>mgl-pax-document-current-definition</code> documents the definition with
point in it.</p>
<p><a id="x-28MGL-PAX-3A-40PAX-URLS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PAX-URLS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">&#8592;</a> <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">&#8593;</a> <a href="#MGL-PAX:@APROPOS%20MGL-PAX:SECTION" title="Apropos">&#8594;</a> <a href="#MGL-PAX:@PAX-URLS%20MGL-PAX:SECTION" title="PAX URLs">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/browse.lisp#L49">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@PAX-URLS%20MGL-PAX:SECTION">8.3.1 PAX URLs</a></h4>
<p>A PAX URL consists of a REFERENCE and an optional <code>fragment</code>
part:</p>
<pre><code>URL = [REFERENCE] [&quot;#&quot; FRAGMENT]
</code></pre>
<p>where REFERENCE names either</p>
<ul>
<li><p>a complete <a href="dref-manual.html#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="reference">reference</a> (e.g. <code>&quot;pax:section class&quot;</code>),</p></li>
<li><p>or the <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> of a reference (e.g. <code>&quot;pax:section&quot;</code>), which
  possibly makes what to document ambiguous.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40APROPOS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@APROPOS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PAX-URLS%20MGL-PAX:SECTION" title="PAX URLs">&#8592;</a> <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">&#8593;</a> <a href="#MGL-PAX:@EMACS-SETUP-FOR-BROWSING%20MGL-PAX:SECTION" title="Emacs Setup for Browsing">&#8594;</a> <a href="#MGL-PAX:@APROPOS%20MGL-PAX:SECTION" title="Apropos">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/browse.lisp#L567">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@APROPOS%20MGL-PAX:SECTION">8.3.2 Apropos</a></h4>
<p>The Elisp functions <code>mgl-pax-apropos</code>, <code>mgl-pax-apropos-all</code>, and
<code>mgl-pax-apropos-package</code> can display the results of
<a href="dref-manual.html#DREF:DREF-APROPOS%20FUNCTION" title="DREF:DREF-APROPOS FUNCTION"><code>dref:dref-apropos</code></a> in the <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">live documentation browser</a>. These parallel the functionality of
<code>slime-apropos</code>, <code>slime-apropos-all</code>, and <code>slime-apropos-package</code>.</p>
<p><code>dref:dref-apropos</code> itself is similar to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_apropo.htm" title="APROPOS-LIST (MGL-PAX:CLHS FUNCTION)"><code>cl:apropos-list</code></a>, but it
supports more flexible matching – e.g. filtering by
<a href="dref-manual.html#DREF:@LOCATIVE-TYPE%20MGL-PAX:GLOSSARY-TERM" title="locative type">locative type</a>s – and returns <a href="dref-manual.html#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="reference">DRef
references</a>.</p>
<p>The returned references are presented in two groups: those with
non-symbol and those with symbol <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>s. The non-symbol group is
sorted by locative type then by name. The symbol group is sorted by
name then by locative type.</p>
<p><a id="x-28MGL-PAX-3A-40EMACS-SETUP-FOR-BROWSING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EMACS-SETUP-FOR-BROWSING%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@APROPOS%20MGL-PAX:SECTION" title="Apropos">&#8592;</a> <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">&#8593;</a> <a href="#MGL-PAX:@BROWSING-WITH-W3M%20MGL-PAX:SECTION" title="Browsing with w3m">&#8594;</a> <a href="#MGL-PAX:@EMACS-SETUP-FOR-BROWSING%20MGL-PAX:SECTION" title="Emacs Setup for Browsing">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/browse.lisp#L62">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@EMACS-SETUP-FOR-BROWSING%20MGL-PAX:SECTION">8.3.3 Emacs Setup for Browsing</a></h4>
<p>Make sure <a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">Emacs Setup</a> has been done. In particular, set
<code>mgl-pax-browser-function</code> to choose between browsing documentation
with <a href="https://emacs-w3m.github.io/info/emacs-w3m.html" >w3m</a> in an
Emacs buffer, or with an external browser plus a web server in the
Lisp image.</p>
<p>In <a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">Emacs Setup</a>, <code>(mgl-pax-hijack-slime-doc-keys)</code> was evaluated,
which handles the common case of binding keys. The Elisp definition
is reproduced here for its docstring.</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><a href="http://www.gnu.org/software/emacs/elisp-manual/html_node/elisp_167.html#IDX483" class="symbol"><i><span class="symbol">defun</span></i></a> mgl-pax-hijack-slime-doc-keys <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"Make the following changes to `slime-doc-map' (assuming it's
bound to `C-c C-d').

- `C-c C-d a': `mgl-pax-apropos' (replaces `slime-apropos')
- `C-c C-d z': `mgl-pax-aproposa-all' (replaces `slime-apropos-all')
- `C-c C-d p': `mgl-pax-apropos-package' (replaces `slime-apropos-package')
- `C-c C-d d': `mgl-pax-document' (replaces `slime-describe-symbol')
- `C-c C-d f': `mgl-pax-document' (replaces `slime-describe-function')
- `C-c C-d c': `mgl-pax-current-definition-toggle-view'

Also, regardless of whether `w3m' is available, add this:

- `C-c C-d u': `mgl-pax-edit-parent-section'

In addition, because it can be almost as useful as `M-.', one may
want to give `mgl-pax-document' a more convenient binding such as
`C-.' or `s-.' if you have a Super key. For example, to bind
`C-.' in all Slime buffers:

    (slime-bind-keys slime-parent-map nil '((</span><span class="string">\"</span><span class="string">C-.</span><span class="string">\"</span><span class="string"> mgl-pax-document)))

To bind `C-.' globally:

    (global-set-key (kbd </span><span class="string">\"</span><span class="string">C-.</span><span class="string">\"</span><span class="string">) 'mgl-pax-document)"</span>
  
...</span>)</span></span></code></pre>
<p><a id="x-28MGL-PAX-3A-40BROWSING-WITH-W3M-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@BROWSING-WITH-W3M%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EMACS-SETUP-FOR-BROWSING%20MGL-PAX:SECTION" title="Emacs Setup for Browsing">&#8592;</a> <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">&#8593;</a> <a href="#MGL-PAX:@BROWSING-WITH-OTHER-BROWSERS%20MGL-PAX:SECTION" title="Browsing with Other Browsers">&#8594;</a> <a href="#MGL-PAX:@BROWSING-WITH-W3M%20MGL-PAX:SECTION" title="Browsing with w3m">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/browse.lisp#L89">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@BROWSING-WITH-W3M%20MGL-PAX:SECTION">8.3.4 Browsing with w3m</a></h4>
<p>With <a href="https://emacs-w3m.github.io/info/emacs-w3m_10.html#Key-Binding" title="w3m's default key bindings">w3m's default key bindings</a>, moving the cursor between links involves
<code>tab</code> and <code>s-tab</code> (or <code>&lt;up&gt;</code> and <code>&lt;down&gt;</code>). <code>ret</code> and <code>&lt;right&gt;</code>
follow a link, while <code>b</code> and <code>&lt;left&gt;</code> go back in history.</p>
<p>In addition, the following PAX-specific key bindings are available:</p>
<ul>
<li><p><code>m-.</code> visits the source location of the definition corresponding
  to the link under the point.</p></li>
<li><p>Invoking <code>mgl-pax-document</code> on a section title link will show the
  documentation of that section on its own page.</p></li>
<li><p><code>n</code> moves to the next PAX definition on the page.</p></li>
<li><p><code>p</code> moves to the previous PAX definition on the page.</p></li>
<li><p><code>u</code> follows the first <code>Up:</code> link (to the first containing
  <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>) if any.</p></li>
<li><p><code>u</code> is like <code>u</code> but positions the cursor at the top of the page.</p></li>
<li><p><code>v</code> visits the source location of the current definition (the one
  under the cursor or the first one above it).</p></li>
<li><p><code>v</code> visits the source location of the first definition on the
  page.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40BROWSING-WITH-OTHER-BROWSERS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@BROWSING-WITH-OTHER-BROWSERS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@BROWSING-WITH-W3M%20MGL-PAX:SECTION" title="Browsing with w3m">&#8592;</a> <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">&#8593;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8594;</a> <a href="#MGL-PAX:@BROWSING-WITH-OTHER-BROWSERS%20MGL-PAX:SECTION" title="Browsing with Other Browsers">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/browse.lisp#L118">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@BROWSING-WITH-OTHER-BROWSERS%20MGL-PAX:SECTION">8.3.5 Browsing with Other Browsers</a></h4>
<p>When the value of the Elisp variable <code>mgl-pax-browser-function</code>
is not <code>w3m-browse-url</code>, requests are served via a web server
started in the running Lisp, and documentation is most likely
displayed in a separate browser window .</p>
<p>By default, <code>mgl-pax-browser-function</code> is <code>nil</code>, which makes PAX use
<code>browse-url-browser-function</code>. You may want to customize the related
<code>browse-url-new-window-flag</code> or, for Chrome, set
<code>browse-url-chrome-arguments</code> to <code>(&quot;--new-window&quot;)</code>.</p>
<p>In the browser, clicking on the locative on the left of the
object (e.g. in <code>- [function] PRINT</code>) will raise and focus the Emacs
window (if Emacs is not in text mode, and also subject to window
manager focus stealing settings), then go to the corresponding
source location. For sections, clicking on the lambda link will do
the same (see <a href="#MGL-PAX:*DOCUMENT-FANCY-HTML-NAVIGATION*%20VARIABLE" title="MGL-PAX:*DOCUMENT-FANCY-HTML-NAVIGATION* VARIABLE"><code>*document-fancy-html-navigation*</code></a>).</p>
<p>Finally, note that the <code>url</code>s exposed by the web server are subject to
change.</p>
<p><a id="x-28MGL-PAX-3A-40MARKDOWN-SUPPORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@BROWSING-WITH-OTHER-BROWSERS%20MGL-PAX:SECTION" title="Browsing with Other Browsers">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@MARKDOWN-IN-DOCSTRINGS%20MGL-PAX:SECTION" title="Markdown in Docstrings">&#8594;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1268">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION">8.4 Markdown Support</a></h3>
<p>The <a href="https://daringfireball.net/projects/markdown/" title="markdown">markdown</a> in docstrings is processed with the <a href="https://github.com/3b/3bmd" title="3BMD">3BMD</a> library.</p>
<p><a id="x-28MGL-PAX-3A-40MARKDOWN-IN-DOCSTRINGS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MARKDOWN-IN-DOCSTRINGS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8592;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8593;</a> <a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION" title="Syntax Highlighting">&#8594;</a> <a href="#MGL-PAX:@MARKDOWN-IN-DOCSTRINGS%20MGL-PAX:SECTION" title="Markdown in Docstrings">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1274">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@MARKDOWN-IN-DOCSTRINGS%20MGL-PAX:SECTION">8.4.1 Markdown in Docstrings</a></h4>
<ul>
<li><p>Docstrings can be indented in any of the usual styles. PAX
normalizes indentation by stripping the longest run of leading
spaces common to all non-blank lines except the first. The following
two docstrings are equivalent:</p>

<pre><code>(defun foo ()
  &quot;This is
  indented
  differently&quot;)

(defun foo ()
  &quot;This is
indented
differently&quot;)
</code></pre></li>
<li><p>When <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">Browsing Live Documentation</a>, the page displayed can be of,
say, a single function within what would constitute the offline
documentation of a library. Because markdown reference link
definitions, for example</p>

<pre><code>[Daring Fireball]: http://daringfireball.net/
</code></pre>

<p>can be defined anywhere, they wouldn't be resolvable in that
case, their use is discouraged. Currently, only reflink
definitions in the vicinity of their uses are resolvable. This
is left intentionally vague because the specifics are subject to
change.</p>

<p>See <a href="#MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-GLOSSARY-TERM MGL-PAX:MACRO"><code>define-glossary-term</code></a> for a better alternative to markdown
reference links.</p></li>
</ul>
<p>Docstrings of definitions which do not have a <a href="#MGL-PAX:@HOME-SECTION%20MGL-PAX:SECTION" title="Home Section">Home Section</a> and are
not <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>s themselves are assumed to have been written with no
knowledge of PAX and to conform to markdown only by accident. These
docstrings are thus sanitized more aggressively.</p>
<ul>
<li><p>Indentation of what looks like blocks of Lisp code is rounded up to
a multiple of 4. More precisely, non-zero indented lines between
blank lines or the docstring boundaries are reindented if the first
non-space character of the first line is an <code>(</code> or a <code>;</code> character.</p></li>
<li><p>Special HTML characters <code>&lt;&amp;</code> are escaped.</p></li>
<li><p>Furthermore, to reduce the chance of inadvertently introducing a
markdown heading, if a line starts with a string of <code>#</code> characters,
then the first one is automatically escaped. Thus, the following two
docstrings are equivalent:</p>

<pre><code>The characters #\Space, #\Tab and
#Return are in the whitespace group.

The characters #\Space, #\Tab and
\#Return are in the whitespace group.
</code></pre></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40MARKDOWN-SYNTAX-HIGHLIGHTING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MARKDOWN-IN-DOCSTRINGS%20MGL-PAX:SECTION" title="Markdown in Docstrings">&#8592;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8593;</a> <a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION" title="MathJax">&#8594;</a> <a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION" title="Syntax Highlighting">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1323">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION">8.4.2 Syntax Highlighting</a></h4>
<p>For syntax highlighting, Github's <a href="https://help.github.com/articles/github-flavored-markdown#fenced-code-blocks" title="fenced code blocks">fenced code blocks</a> markdown
extension to mark up code
blocks with triple backticks is enabled so all you need to do is
write:</p>
<pre><code>```elisp
(defun foo ())
```
</code></pre>
<p>to get syntactically marked up HTML output. Copy <code>src/style.css</code>
from PAX and you are set. The language tag, <code>elisp</code> in this example,
is optional and defaults to <code>common-lisp</code>.</p>
<p>See the documentation of <a href="https://github.com/3b/3bmd" title="3BMD">3BMD</a> and <a href="https://github.com/redline6561/colorize/" title="Colorize">Colorize</a> for the details.</p>
<p><a id="x-28MGL-PAX-3A-40MATHJAX-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MATHJAX%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MARKDOWN-SYNTAX-HIGHLIGHTING%20MGL-PAX:SECTION" title="Syntax Highlighting">&#8592;</a> <a href="#MGL-PAX:@MARKDOWN-SUPPORT%20MGL-PAX:SECTION" title="Markdown Support">&#8593;</a> <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">&#8594;</a> <a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION" title="MathJax">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1348">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION">8.4.3 MathJax</a></h4>
<p>Displaying pretty mathematics in TeX format is supported via
MathJax. It can be done inline with <code>$</code> like this:</p>
<pre><code>$\int_0^\infty e^{-x^2} dx=\frac{\sqrt{\pi}}{2}$
</code></pre>
<p>which is displayed as $\int_0^\infty e^{-x^2}
dx=\frac{\sqrt{\pi}}{2}$, or it can be delimited by <code>$$</code> like this:</p>
<pre><code>$$\int_0^\infty e^{-x^2} dx=\frac{\sqrt{\pi}}{2}$$
</code></pre>
<p>to get: $$\int_0^\infty e^{-x^2} dx=\frac{\sqrt{\pi}}{2}$$</p>
<p>MathJax will leave code blocks (including those inline with
backticks) alone. Outside code blocks, escape <code>$</code> by prefixing it
with a backslash to scare MathJax off.</p>
<p>Escaping all those backslashes in TeX fragments embedded in Lisp
strings can be a pain. <a href="https://github.com/smithzvk/pythonic-string-reader" title="Pythonic String Reader">Pythonic String Reader</a> can help with that.</p>
<p><a id="x-28MGL-PAX-3A-40CODIFICATION-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION" title="MathJax">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8594;</a> <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1463">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION">8.5 Codification</a></h3>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-UPPERCASE-IS-CODE-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1469">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" >*document-uppercase-is-code*</a></span></span> <span class="locative-args">t</span></span></p>

<p>When true, <a href="#MGL-PAX:@INTERESTING%20MGL-PAX:GLOSSARY-TERM" title="interesting">interesting</a> <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>s extracted from <a href="#MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM" title="codifiable">codifiable</a> <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a>s
are assumed to be code as if they were marked up with backticks. For
example, this docstring</p>

<pre><code>&quot;T PRINT CLASSes SECTION *PACKAGE* MGL-PAX ASDF
CaMeL Capital&quot;
</code></pre>

<p>is equivalent to this:</p>

<pre><code>&quot;`T` `PRINT` `CLASS`es `SECTION` `*PACKAGE*` `MGL-PAX` `ASDF`
CaMel Capital&quot;
</code></pre>

<p>and renders as</p>

<p><code>t</code> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_pr.htm" title="PRINT (MGL-PAX:CLHS FUNCTION)"><code>print</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS (MGL-PAX:CLHS CLASS)"><code>class</code></a>es <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a> <code>mgl-pax</code> <code>asdf</code> CaMel Capital</p>

<p>where the links are added due to <a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-CODE* VARIABLE"><code>*document-link-code*</code></a>.</p>

<p>To suppress codification, add a backslash to the beginning of the
a <a href="#MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM" title="codifiable">codifiable</a> word or right after the leading <code>*</code> if it would
otherwise be parsed as markdown emphasis:</p>

<pre><code>&quot;\\SECTION *\\PACKAGE*&quot;
</code></pre>

<p>The number of backslashes is doubled above because that's how the
example looks in a docstring. Note that the backslash is discarded
even if <code>*document-uppercase-is-code*</code> is false.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40CODIFIABLE-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1490">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM" >codifiable</a></span></span></span></p>

<p>A <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a> is <em>codifiable</em> iff</p>

<ul>
<li><p>it has a single uppercase character (e.g. it's <code>t</code>) and no
  lowercase characters at all, or</p></li>
<li><p>there is more than one uppercase character and no lowercase
  characters between them (e.g. <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS (MGL-PAX:CLHS CLASS)"><code>class</code></a>es, non<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_rd_rd.htm" title="READ (MGL-PAX:CLHS FUNCTION)"><code>read</code></a>able, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_class_.htm" title="CLASS-NAME (MGL-PAX:CLHS GENERIC-FUNCTION)"><code>class-name</code></a>s
  but not <code>Classes</code> or <code>aTe</code>.</p></li>
</ul></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40INTERESTING-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="MGL-PAX:@INTERESTING%20MGL-PAX:GLOSSARY-TERM"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1506">[glossary-term]</a></span> <span class="reference-object"><a href="#MGL-PAX:@INTERESTING%20MGL-PAX:GLOSSARY-TERM" >interesting</a></span></span></span></p>

<p>A <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> is <em>interesting</em> iff</p>

<ul>
<li><p>it names a symbol external to its package, or</p></li>
<li><p>it is at least 3 characters long and names an interned symbol, or</p></li>
<li><p>it names a <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">local reference</a>.</p></li>
</ul>

<p>See <a href="#MGL-PAX:@PACKAGE-AND-READTABLE%20MGL-PAX:SECTION" title="Package and Readtable">Package and Readtable</a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-DOWNCASE-UPPERCASE-CODE-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1678">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE" >*document-downcase-uppercase-code*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>If true, then all Markdown inline code (that is, <code>stuff between
backticks</code>, including those found if <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a>)
which has no lowercase characters is downcased in the output.
Characters of literal strings in the code may be of any case. If
this variable is <code>:only-in-markup</code> and the output format does not
support markup (e.g. it's <code>:plain</code>), then no downcasing is performed.
For example,</p>

<pre><code>`(PRINT &quot;Hello&quot;)`
</code></pre>

<p>is downcased to</p>

<pre><code>`(print &quot;Hello&quot;)`
</code></pre>

<p>because it only contains uppercase characters outside the string.
However,</p>

<pre><code>`MiXed &quot;RESULTS&quot;`
</code></pre>

<p>is not altered because it has lowercase characters.</p>

<p>If the first two characters are backslashes, then no downcasing is
performed, in addition to <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">Preventing Autolinking</a>. Use this to mark
inline code that's not Lisp.</p>

<pre><code>Press `\\M-.` in Emacs.
</code></pre></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40LINKING-TO-CODE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">&#8594;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1776">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION">8.6 Linking to Code</a></h3>
<p>In this section, we describe all ways of linking to code
available when <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a> is true.</p>
<p><em>Note that invoking <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs"><code>M-.</code></a> on the
<a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> of any of the following links will disambiguate based the
textual context, determining the locative. In a nutshell, if <code>M-.</code>
works without popping up a list of choices, then the documentation
will contain a single link.</em></p>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-LINK-CODE-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1794">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" >*document-link-code*</a></span></span> <span class="locative-args">t</span></span></p>

<p>Enable the various forms of links in docstrings described in
<a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>. See the following sections for a description of
how to use linking.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40SPECIFIED-LOCATIVE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Unspecified Locative">&#8594;</a> <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1850">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION">8.6.1 Specified Locative</a></h4>
<p>The following examples all render as <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>.</p>
<ul>
<li><p><code>[DOCUMENT][function]</code> (<em>name + locative, explicit link</em>)</p></li>
<li><p><code>DOCUMENT function</code> (<em>name + locative, autolink</em>)</p></li>
<li><p><code>function DOCUMENT</code> (<em>locative + name, autolink</em>)</p></li>
</ul>
<p>The Markdown link definition (i.e. <code>function</code> between the second
set of brackets above) needs no backticks to mark it as code.</p>
<p>Here and below, the <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> (<code>document</code>) is uppercased, and we rely
on <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a> being true. Alternatively, the <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>
could be explicitly marked up as code with a pair of backticks, and
then its character case would likely not matter (subject to
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_rdtabl.htm" title="READTABLE-CASE (MGL-PAX:CLHS FUNCTION)"><code>readtable-case</code></a>).</p>
<p>The link text in the above examples is <code>document</code>. To override it,
this form may be used:</p>
<ul>
<li><code>[see this][document function]</code> (<em>title + name + locative,
  explicit link</em>) renders as: <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION">see this</a>.</li>
</ul>
<p><a id="x-28MGL-PAX-3A-40UNSPECIFIED-LOCATIVE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@UNAMBIGUOUS-UNSPECIFICED-LOCATIVE%20MGL-PAX:SECTION" title="Unambiguous Unspecified Locative">&#8594;</a> <a href="#MGL-PAX:@UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Unspecified Locative">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1900">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION">8.6.2 Unspecified Locative</a></h4>
<p>When only an <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> is provided without a locative, all
definitions of the name are considered as possible link targets.
Then, definitions that are not symbol-based (i.e. whose
<a href="dref-manual.html#DREF-EXT:XREF-NAME%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-NAME (MGL-PAX:READER DREF:XREF)"><code>xref-name</code></a> is not a symbol) are filtered out to prevent
unrelated <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE (MGL-PAX:CLHS CLASS)"><code>package</code></a>s and <a href="dref-manual.html#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a>s from cluttering the
documentation without the control provided by importing symbols.</p>
<p>To further reduce clutter, if the definitions include a
<a href="dref-manual.html#GENERIC-FUNCTION%20MGL-PAX:LOCATIVE" title="GENERIC-FUNCTION MGL-PAX:LOCATIVE"><code>generic-function</code></a> locative, then all references with <a href="dref-manual.html#DREF-EXT:LOCATIVE-TYPE%20FUNCTION" title="DREF-EXT:LOCATIVE-TYPE FUNCTION"><code>locative-type</code></a>
<a href="dref-manual.html#METHOD%20MGL-PAX:LOCATIVE" title="METHOD MGL-PAX:LOCATIVE"><code>method</code></a>, <a href="dref-manual.html#MGL-PAX:ACCESSOR%20MGL-PAX:LOCATIVE" title="MGL-PAX:ACCESSOR MGL-PAX:LOCATIVE"><code>accessor</code></a>, <a href="dref-manual.html#MGL-PAX:READER%20MGL-PAX:LOCATIVE" title="MGL-PAX:READER MGL-PAX:LOCATIVE"><code>reader</code></a> and
<a href="dref-manual.html#MGL-PAX:WRITER%20MGL-PAX:LOCATIVE" title="MGL-PAX:WRITER MGL-PAX:LOCATIVE"><code>writer</code></a> are removed to avoid linking to a possibly large
number of methods.</p>
<p>Furthermore, filter out all references with <code>locative-type</code>
<a href="dref-manual.html#MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE" title="MGL-PAX:LOCATIVE MGL-PAX:LOCATIVE"><code>locative</code></a> if there are references with other <code>locative-type</code>s.</p>
<p><a id="x-28MGL-PAX-3A-40UNAMBIGUOUS-UNSPECIFICED-LOCATIVE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@UNAMBIGUOUS-UNSPECIFICED-LOCATIVE%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Unspecified Locative">&#8592;</a> <a href="#MGL-PAX:@UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Unspecified Locative">&#8593;</a> <a href="#MGL-PAX:@AMBIGUOUS-UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Ambiguous Unspecified Locative">&#8594;</a> <a href="#MGL-PAX:@UNAMBIGUOUS-UNSPECIFICED-LOCATIVE%20MGL-PAX:SECTION" title="Unambiguous Unspecified Locative">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1966">&#955;</a></span></span></p>
<h5><a href="#MGL-PAX:@UNAMBIGUOUS-UNSPECIFICED-LOCATIVE%20MGL-PAX:SECTION">Unambiguous Unspecified Locative</a></h5>
<p>In the following examples, although no locative is specified,
<code>document</code> names a single <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> being <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>ed, so they all
render as <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>.</p>
<ul>
<li><p><code>[document][]</code> (<em>name, explicit link</em>),</p></li>
<li><p><code>document</code> (<em>name, autolink</em>).</p></li>
</ul>
<p>To override the title:</p>
<ul>
<li><code>[see this][document]</code> (<em>title + name, explicit link</em>) renders
  as: <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION">see this</a>.</li>
</ul>
<p><a id="x-28MGL-PAX-3A-40AMBIGUOUS-UNSPECIFIED-LOCATIVE-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@AMBIGUOUS-UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@UNAMBIGUOUS-UNSPECIFICED-LOCATIVE%20MGL-PAX:SECTION" title="Unambiguous Unspecified Locative">&#8592;</a> <a href="#MGL-PAX:@UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Unspecified Locative">&#8593;</a> <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">&#8594;</a> <a href="#MGL-PAX:@AMBIGUOUS-UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Ambiguous Unspecified Locative">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1980">&#955;</a></span></span></p>
<h5><a href="#MGL-PAX:@AMBIGUOUS-UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION">Ambiguous Unspecified Locative</a></h5>
<p>These examples all render as <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>, linking to both
definitions of the <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> <code>section</code>, the <code>class</code> and the
<code>locative</code>.</p>
<ul>
<li><p><code>[section][]</code> (<em>name, explicit link</em>)</p></li>
<li><p><code>section</code> (<em>name, autolink</em>)</p></li>
</ul>
<p>To override the title:</p>
<ul>
<li><code>[see this][section]</code> (<em>title + name, explicit link</em>) renders
  as: <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS">see this</a>.</li>
</ul>
<p><a id="x-28MGL-PAX-3A-40EXPLICIT-AND-AUTOLINKING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@AMBIGUOUS-UNSPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Ambiguous Unspecified Locative">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">&#8594;</a> <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1994">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION">8.6.3 Explicit and Autolinking</a></h4>
<p>The examples in the previous sections are marked with <em>explicit
link</em> or <em>autolink</em>. Explicit links are those with a Markdown
reference link spelled out explicitly, while autolinks are those
without.</p>
<p><a id="x-28MGL-PAX-3A-40PREVENTING-AUTOLINKING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION" title="Unresolvable Links">&#8594;</a> <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2214">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION">8.6.4 Preventing Autolinking</a></h4>
<p>In the common case, when <a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a> is true,
prefixing an uppercase <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a> with a backslash prevents it from being
codified and thus also prevents <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a> form kicking in. For example,</p>
<pre><code>\DOCUMENT
</code></pre>
<p>renders as DOCUMENT. If it should be marked up as code but not
autolinked, the backslash must be within backticks like this:</p>
<pre><code>`\DOCUMENT`
</code></pre>
<p>This renders as <code>document</code>. Alternatively, the <a href="#MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE" title="MGL-PAX:DISLOCATED MGL-PAX:LOCATIVE"><code>dislocated</code></a> or the
<a href="#MGL-PAX:ARGUMENT%20MGL-PAX:LOCATIVE" title="MGL-PAX:ARGUMENT MGL-PAX:LOCATIVE"><code>argument</code></a> locative may be used as in <code>[DOCUMENT][dislocated]</code>.</p>
<p><a id="x-28MGL-PAX-3A-40UNRESOLVABLE-REFLINKS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION" title="Suppressed Links">&#8594;</a> <a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION" title="Unresolvable Links">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2302">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION">8.6.5 Unresolvable Links</a></h4>
<p><a id="x-28MGL-PAX-3AUNRESOLVABLE-REFLINK-20CONDITION-29"></a>
<a id="MGL-PAX:UNRESOLVABLE-REFLINK%20CONDITION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2307">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:UNRESOLVABLE-REFLINK%20CONDITION" >unresolvable-reflink</a></span></span> <span class="locative-args"><a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_warnin.htm" title="WARNING (MGL-PAX:CLHS CONDITION)">warning</a></span></span></p>

<p>When <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> encounters an <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">explicit
link</a> such as <code>[NONEXISTENT][function]</code>
that looks like a PAX construct but cannot be resolved, it signals
and <code>unresolvable-reflink</code> warning.</p>

<ul>
<li><p>If the <a href="#MGL-PAX:OUTPUT-REFLINK%20FUNCTION" title="MGL-PAX:OUTPUT-REFLINK FUNCTION"><code>output-reflink</code></a> restart is invoked, then no warning is
  printed and the markdown link is left unchanged. <code>muffle-warning</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_abortc.htm" title="MUFFLE-WARNING (MGL-PAX:CLHS FUNCTION)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/r_muffle.htm" title="MUFFLE-WARNING (MGL-PAX:CLHS RESTART)"><code>1</code></a>) is
  equivalent to <code>output-reflink</code>.</p></li>
<li><p>If the <a href="#MGL-PAX:OUTPUT-LABEL%20FUNCTION" title="MGL-PAX:OUTPUT-LABEL FUNCTION"><code>output-label</code></a> restart is invoked, then no warning is printed
  and the markdown link is replaced by its label. For example,
  <code>[NONEXISTENT][function]</code> becomes <code>nonexistent</code>.</p></li>
<li><p>If the warning is not handled, then it is printed to
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_debug_.htm" title="*ERROR-OUTPUT* (MGL-PAX:CLHS VARIABLE)"><code>*error-output*</code></a>. Otherwise, it behaves as <code>output-reflink</code>.</p></li>
</ul></li>
</ul>
<p><a id="x-28MGL-PAX-3AOUTPUT-REFLINK-20FUNCTION-29"></a>
<a id="MGL-PAX:OUTPUT-REFLINK%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2380">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:OUTPUT-REFLINK%20FUNCTION" >output-reflink</a></span></span> <span class="locative-args">&amp;optional condition</span></span></p>

<p>Invoke the <code>output-reflink</code> restart. See <a href="#MGL-PAX:UNRESOLVABLE-REFLINK%20CONDITION" title="MGL-PAX:UNRESOLVABLE-REFLINK CONDITION"><code>unresolvable-reflink</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AOUTPUT-LABEL-20FUNCTION-29"></a>
<a id="MGL-PAX:OUTPUT-LABEL%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2385">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:OUTPUT-LABEL%20FUNCTION" >output-label</a></span></span> <span class="locative-args">&amp;optional condition</span></span></p>

<p>Invoke the <code>output-label</code> restart. See <a href="#MGL-PAX:UNRESOLVABLE-REFLINK%20CONDITION" title="MGL-PAX:UNRESOLVABLE-REFLINK CONDITION"><code>unresolvable-reflink</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40SUPPRESSED-LINKS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@UNRESOLVABLE-REFLINKS%20MGL-PAX:SECTION" title="Unresolvable Links">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">&#8594;</a> <a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION" title="Suppressed Links">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2395">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION">8.6.6 Suppressed Links</a></h4>
<p><a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">Autolinking</a> of code (i.e.
of something like <code>foo</code>) is suppressed if it would create a link
that was already made within the same docstring. In the following
docstring, only the first <code>foo</code> will be turned into a link.</p>
<pre><code>&quot;`FOO` is safe. `FOO` is great.&quot;
</code></pre>
<p>However, explicit links (when a <a href="dref-manual.html#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="locative">locative</a> was specified or
found near the <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>) are never suppressed. In the following, in
both docstrings, both occurrences <code>foo</code> produce links.</p>
<pre><code>&quot;`FOO` is safe. [`FOO`][macro] is great.&quot;
&quot;`FOO` is safe. Macro `FOO` is great.&quot;
</code></pre>
<p>As an exception, links with <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">specified</a>
and <a href="#MGL-PAX:@UNAMBIGUOUS-UNSPECIFICED-LOCATIVE%20MGL-PAX:SECTION" title="Unambiguous Unspecified Locative">unambiguous</a>
locatives to <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>s and <a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a>s always produce a link to
allow their titles to be displayed properly.</p>
<p>Finally, <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a> to <code>t</code> or
<code>nil</code> is suppressed (see <a href="#MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC* VARIABLE"><code>*document-link-to-hyperspec*</code></a>).</p>
<p><a id="x-28MGL-PAX-3A-40LOCAL-REFERENCES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION" title="Suppressed Links">&#8592;</a> <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">&#8593;</a> <a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">&#8594;</a> <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2418">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION">8.6.7 Local References</a></h4>
<p>To declutter the generated output by reducing the number of
links, the so-called local references (e.g. references to the very
definition for which documentation is being generated) are treated
specially. In the following example, there are local references to
the function <code>foo</code> and its arguments, so none of them get turned into
links:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren2">(<span class="code">arg1 arg2</span>)</span>
  <span class="string">"FOO takes two arguments: ARG1 and ARG2."</span>
  t</span>)</span></span></code></pre>
<p>If linking was desired, one could use a <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">Specified Locative</a> (e.g.
<code>[FOO][function]</code> or <code>FOO function</code>), which results in a single
link. An explicit link with an unspecified locative like <code>[foo][]</code>
generates links to all references involving the <code>foo</code> symbol except
the local ones.</p>
<p>The exact rules for local references are as follows:</p>
<ul>
<li><p>Unless a locative is <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">specified</a>, no
<a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a> is performed for
<a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>s for which there are local references. For example, <code>foo</code> does
not get any links if there is <em>any</em> local reference with the same
<a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>.</p></li>
<li><p>With a locative specified (e.g. in the explicit link
<code>[FOO][function]</code> or in the text <code>the FOO function</code>), a single link
is made irrespective of any local references.</p></li>
<li><p>Explicit links with an unspecified locative (e.g. <code>[foo][]</code>) are
linked to all non-local references.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40LINKING-TO-THE-HYPERSPEC-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">&#8594;</a> <a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L494">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION">8.7 Linking to the Hyperspec</a></h3>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-LINK-TO-HYPERSPEC-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L498">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-LINK-TO-HYPERSPEC*%20VARIABLE" >*document-link-to-hyperspec*</a></span></span> <span class="locative-args">t</span></span></p>

<p>If true, link symbols found in code to the Common Lisp Hyperspec
unless there is a definition in the running Lisp that is being
<a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>ed.</p>

<p>Locatives work as expected (see <a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-CODE* VARIABLE"><code>*document-link-code*</code></a>): <code>find-if</code>
links to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_.htm" title="FIND-IF (MGL-PAX:CLHS FUNCTION)"><code>find-if</code></a>, <code>function</code> links to <code>function</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION (MGL-PAX:CLHS CLASS)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/s_fn.htm" title="FUNCTION (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>1</code></a>), and
<code>[FUNCTION][type]</code> links to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION (MGL-PAX:CLHS CLASS)"><code>function</code></a>.</p>

<p><a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">Autolinking</a> to <code>t</code> and <code>nil</code> is
<a href="#MGL-PAX:@SUPPRESSED-LINKS%20MGL-PAX:SECTION" title="Suppressed Links">suppressed</a>. If desired, use <code>[t][]</code> (that
links to <code>t</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_t.htm" title="T (MGL-PAX:CLHS CLASS)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_t.htm" title="T (MGL-PAX:CLHS MGL-PAX:CONSTANT)"><code>1</code></a>)) or <code>[T][constant]</code> (that links to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_t.htm" title="T (MGL-PAX:CLHS MGL-PAX:CONSTANT)"><code>t</code></a>).</p>

<p>Note that linking explicitly with the <a href="#MGL-PAX:CLHS%20MGL-PAX:LOCATIVE" title="MGL-PAX:CLHS MGL-PAX:LOCATIVE"><code>clhs</code></a> locative is not subject
to the value of this variable.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HYPERSPEC-ROOT-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HYPERSPEC-ROOT*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L514">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HYPERSPEC-ROOT*%20VARIABLE" >*document-hyperspec-root*</a></span></span> <span class="locative-args">&quot;http://www.lispworks.com/documentation/HyperSpec/&quot;</span></span></p>

<p>A URL of the Common Lisp Hyperspec. The default value
is the canonical location. When <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">invoked from Emacs</a>, the Elisp variable
<code>common-lisp-hyperspec-root</code> is in effect.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40LINKING-TO-SECTIONS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LINKING-TO-THE-HYPERSPEC%20MGL-PAX:SECTION" title="Linking to the Hyperspec">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">&#8594;</a> <a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2463">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION">8.8 Linking to Sections</a></h3>
<p>The following variables control how to generate section numbering,
table of contents and navigation links.</p>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-LINK-SECTIONS-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2472">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" >*document-link-sections*</a></span></span> <span class="locative-args">t</span></span></p>

<p>When true, HTML anchors are generated before the headings (e.g. of
sections), which allows the table of contents to contain links and
also code-like references to sections (like <code>@foo-manual</code>) to be
translated to links with the section title being the name of the
link.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-MAX-NUMBERING-LEVEL-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-MAX-NUMBERING-LEVEL*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2479">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-MAX-NUMBERING-LEVEL*%20VARIABLE" >*document-max-numbering-level*</a></span></span> <span class="locative-args">3</span></span></p>

<p>A non-negative integer. In their hierarchy, sections on levels less
than this value get numbered in the format of <code>3.1.2</code>. Setting it to
0 turns numbering off.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-MAX-TABLE-OF-CONTENTS-LEVEL-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-MAX-TABLE-OF-CONTENTS-LEVEL*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2484">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-MAX-TABLE-OF-CONTENTS-LEVEL*%20VARIABLE" >*document-max-table-of-contents-level*</a></span></span> <span class="locative-args">3</span></span></p>

<p>An integer that determines the depth of the table of contents.</p>

<ul>
<li><p>If negative, then no table of contents is generated.</p></li>
<li><p>If non-negative, and there are multiple top-level sections on a
  page, then they are listed at the top of the page.</p></li>
<li><p>If positive, then for each top-level section a table of contents
  is printed after its heading, which includes a nested tree of
  section titles whose depth is limited by this value.</p></li>
</ul>

<p>If <a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-SECTIONS* VARIABLE"><code>*document-link-sections*</code></a> is true, then the tables will link to
the sections.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-TEXT-NAVIGATION-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-TEXT-NAVIGATION*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2499">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-TEXT-NAVIGATION*%20VARIABLE" >*document-text-navigation*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>If true, then before each heading a line is printed with links to
the previous, parent and next section. Needs
<a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-SECTIONS* VARIABLE"><code>*document-link-sections*</code></a> to be on to work.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-FANCY-HTML-NAVIGATION-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-FANCY-HTML-NAVIGATION*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2504">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-FANCY-HTML-NAVIGATION*%20VARIABLE" >*document-fancy-html-navigation*</a></span></span> <span class="locative-args">t</span></span></p>

<p>If true and the output format is HTML, then headings get a
navigation component that consists of links to the previous, parent,
next section, a self-link, and a link to the definition in the
source code if available (see <code>:source-uri-fn</code> in <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>). This
component is normally hidden, it is visible only when the mouse is
over the heading. Needs <a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-SECTIONS* VARIABLE"><code>*document-link-sections*</code></a> to be on to work.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8594;</a> <a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2681">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION">8.9 Miscellaneous Variables</a></h3>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-URL-VERSIONS-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-URL-VERSIONS*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2688">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-URL-VERSIONS*%20VARIABLE" >*document-url-versions*</a></span></span> <span class="locative-args">(2 1)</span></span></p>

<p>A list of versions of PAX URL formats to support in the
generated documentation. The first in the list is used to generate
links.</p>

<p>PAX emits HTML anchors before the documentation of <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>s
(see <a href="#MGL-PAX:@LINKING-TO-SECTIONS%20MGL-PAX:SECTION" title="Linking to Sections">Linking to Sections</a>) and other things (see <a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>).
For the function <code>foo</code>, in the current version (version 2), the
anchor is <code>&lt;a id=&quot;MGL-PAX:FOO%20FUNCTION&quot;&gt;</code>, and its URL will end
with <code>#MGL-PAX:FOO%20FUNCTION</code>.</p>

<p><em>Note that to make the URL independent of whether a symbol is
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_s.htm" title="FIND-SYMBOL (MGL-PAX:CLHS FUNCTION)">internal or external</a> to their <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_symb_3.htm" title="SYMBOL-PACKAGE (MGL-PAX:CLHS FUNCTION)"><code>symbol-package</code></a>, single
colon is printed where a double colon would be expected. Package and
symbol names are both printed verbatim except for escaping colons
and spaces with a backslash. For exported symbols with no funny
characters, this coincides with how <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_pr.htm" title="PRIN1 (MGL-PAX:CLHS FUNCTION)"><code>prin1</code></a> would print the symbol,
while having the benefit of making the URL independent of the Lisp
printer's escaping strategy and producing human-readable output for
mixed-case symbols. No such promises are made for non-ASCII
characters, and their URLs may change in future versions. Locatives
are printed with <code>prin1</code>.</em></p>

<p>Version 1 is based on the more strict HTML4 standard and the id of
<code>foo</code> is <code>&quot;x-28MGL-PAX-3A-3AFOO-20FUNCTION-29&quot;</code>. This is supported
by Github-flavoured Markdown. Version 2 has minimal clutter and is
obviously preferred. However, in order not to break external links,
by default, both anchors are generated.</p>

<p>Let's understand the generated Markdown.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren2">(<span class="code">x</span>)</span></span>)</span>

<span class="paren1">(<span class="code">document #'foo <span class="keyword">:format</span> <span class="keyword">:markdown</span></span>)</span>
=&gt; <span class="paren1">(<span class="code"><span class="string">"&lt;a id=</span><span class="string">\"</span><span class="string">x-28MGL-PAX-3AFOO-20FUNCTION-29</span><span class="string">\"</span><span class="string">&gt;&lt;/a&gt;
&lt;a id=</span><span class="string">\"</span><span class="string">MGL-PAX:FOO%20FUNCTION</span><span class="string">\"</span><span class="string">&gt;&lt;/a&gt;

- [function] **FOO** *X*
"</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="special">*document-url-versions*</span> '<span class="paren4">(<span class="code">1</span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">document #'foo <span class="keyword">:format</span> <span class="keyword">:markdown</span></span>)</span></span>)</span>
=&gt; <span class="paren1">(<span class="code"><span class="string">"&lt;a id=</span><span class="string">\"</span><span class="string">x-28MGL-PAX-3AFOO-20FUNCTION-29</span><span class="string">\"</span><span class="string">&gt;&lt;/a&gt;

- [function] **FOO** *X*
"</span></span>)</span></span></code></pre></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-MIN-LINK-HASH-LENGTH-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-MIN-LINK-HASH-LENGTH*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2817">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-MIN-LINK-HASH-LENGTH*%20VARIABLE" >*document-min-link-hash-length*</a></span></span> <span class="locative-args">4</span></span></p>

<p>Recall that markdown reference style links (like <code>[label][id]</code>) are
used for linking to sections and code. It is desirable to have ids
that are short to maintain legibility of the generated markdown, but
also stable to reduce the spurious diffs in the generated
documentation, which can be a pain in a version control system.</p>

<p>Clearly, there is a tradeoff here. This variable controls how many
characters of the MD5 sum of the full link id (the reference as a
string) are retained. If collisions are found due to the low number
of characters, then the length of the hash of the colliding
reference is increased.</p>

<p>This variable has no effect on the HTML generated from markdown, but
it can make markdown output more readable.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-MARK-UP-SIGNATURES-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2855">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES*%20VARIABLE" >*document-mark-up-signatures*</a></span></span> <span class="locative-args">t</span></span></p>

<p>When true, some things such as function names and arglists are
rendered as bold and italic. In <code>:html</code> output, locative types become
links to sources (if <code>:source-uri-fn</code> is provided, see <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>), and
the symbol becomes a self-link for your permalinking pleasure.</p>

<p>For example, a reference is rendered in markdown roughly as:</p>

<pre><code>- [function] foo x y
</code></pre>

<p>With this option on, the above becomes:</p>

<pre><code>- [function] **foo** *x y*
</code></pre>

<p>Also, in HTML <code>**foo**</code> will be a link to that very entry and
<code>[function]</code> may turn into a link to sources.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-BASE-URL-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-BASE-URL*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L3101">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-BASE-URL*%20VARIABLE" >*document-base-url*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>When <code>*document-base-url*</code> is non-<code>nil</code>, this is prepended to all
Markdown relative <code>url</code>s. It must be a valid <code>url</code> without no query and
fragment parts (that is, &quot;http://lisp.org/doc/&quot; but not
&quot;http://lisp.org/doc?a=1&quot; or &quot;http://lisp.org/doc#fragment&quot;).
Note that intra-page links using only <code>url</code> fragments (e.g. and
explicit HTML links (e.g. <code>&lt;a href=&quot;...&quot;&gt;</code>) in Markdown are not
affected.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40DOCUMENTATION-UTILITIES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@MISCELLANEOUS-DOCUMENTATION-PRINTER-VARIABLES%20MGL-PAX:SECTION" title="Miscellaneous Variables">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@HTML-OUTPUT%20MGL-PAX:SECTION" title="HTML Output">&#8594;</a> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L5">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION">8.10 Utilities for Generating Documentation</a></h3>
<p>Two convenience functions are provided to serve the common case of
having an ASDF system with some readmes and a directory with for the
HTML documentation and the default CSS stylesheet.</p>
<p><a id="x-28MGL-PAX-3AUPDATE-ASDF-SYSTEM-READMES-20FUNCTION-29"></a>
<a id="MGL-PAX:UPDATE-ASDF-SYSTEM-READMES%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L20">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:UPDATE-ASDF-SYSTEM-READMES%20FUNCTION" >update-asdf-system-readmes</a></span></span> <span class="locative-args">object asdf-system &amp;key (url-versions '(1)) (formats '(:markdown))</span></span></p>

<p>Convenience function to generate up to two readme files in the
directory holding the <code>asdf-system</code> definition. <code>object</code> is passed on to
<a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>.</p>

<p>If <code>:markdown</code> is in <code>formats</code>, then <code>README.md</code> is generated with
anchors, links, inline code, and other markup added. Not necessarily
the easiest on the eye in an editor but looks good on github.</p>

<p>If <code>:plain</code> is in <code>formats</code>, then <code>README</code> is generated, which is
optimized for reading in text format. It has less cluttery markup
and no <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a>.</p>

<p>Example usage:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">update-asdf-system-readmes @pax-manual <span class="keyword">:mgl-pax</span>
                            <span class="keyword">:formats</span> '<span class="paren2">(<span class="code"><span class="keyword">:markdown</span> <span class="keyword">:plain</span></span>)</span></span>)</span></span></code></pre>

<p>Note that <a href="#MGL-PAX:*DOCUMENT-URL-VERSIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-URL-VERSIONS* VARIABLE"><code>*document-url-versions*</code></a> is bound to <code>url-versions</code>, which
defaults to using the uglier, version 1 style of <code>url</code> for the sake of
github.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40HTML-OUTPUT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@HTML-OUTPUT%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8592;</a> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION" title="Github Workflow">&#8594;</a> <a href="#MGL-PAX:@HTML-OUTPUT%20MGL-PAX:SECTION" title="HTML Output">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L70">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@HTML-OUTPUT%20MGL-PAX:SECTION">8.10.1 HTML Output</a></h4>
<p><a id="x-28MGL-PAX-3AUPDATE-ASDF-SYSTEM-HTML-DOCS-20FUNCTION-29"></a>
<a id="MGL-PAX:UPDATE-ASDF-SYSTEM-HTML-DOCS%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L79">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:UPDATE-ASDF-SYSTEM-HTML-DOCS%20FUNCTION" >update-asdf-system-html-docs</a></span></span> <span class="locative-args">sections asdf-system &amp;key pages (target-dir (asdf/system:system-relative-pathname asdf-system &quot;doc/&quot;)) (update-css-p t)</span></span></p>

<p>Generate pretty HTML documentation for a single ASDF system,
possibly linking to github. If <code>update-css-p</code>, copy the CSS style
sheet to <code>target-dir</code> as well. Example usage:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">update-asdf-system-html-docs @pax-manual <span class="keyword">:mgl-pax</span></span>)</span></span></code></pre>

<p>The same, linking to the sources on github:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">update-asdf-system-html-docs
  @pax-manual <span class="keyword">:mgl-pax</span>
  <span class="keyword">:pages</span>
  `<span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="keyword">:objects</span> <span class="paren4">(<span class="code">,mgl-pax::@pax-manual</span>)</span>
     <span class="keyword">:source-uri-fn</span> ,<span class="paren4">(<span class="code">make-git-source-uri-fn
                      <span class="keyword">:mgl-pax</span>
                      <span class="string">"https://github.com/melisgl/mgl-pax"</span></span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre></li>
</ul>
<p>See the following variables, which control HTML generation.</p>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HTML-MAX-NAVIGATION-TABLE-OF-CONTENTS-LEVEL-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HTML-MAX-NAVIGATION-TABLE-OF-CONTENTS-LEVEL*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L340">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HTML-MAX-NAVIGATION-TABLE-OF-CONTENTS-LEVEL*%20VARIABLE" >*document-html-max-navigation-table-of-contents-level*</a></span></span> <span class="locative-args">nil</span></span></p>

<p><code>nil</code> or a non-negative integer. If non-<code>nil</code>, it overrides
<a href="#MGL-PAX:*DOCUMENT-MAX-NUMBERING-LEVEL*%20VARIABLE" title="MGL-PAX:*DOCUMENT-MAX-NUMBERING-LEVEL* VARIABLE"><code>*document-max-numbering-level*</code></a> in the dynamic HTML table of contents
on the left of the page.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HTML-HEAD-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HTML-HEAD*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L177">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HTML-HEAD*%20VARIABLE" >*document-html-head*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>Stuff to be included in the <code>&lt;head&gt;</code> of the generated HTML.</p>

<ul>
<li><p>If <code>nil</code>, nothing is included.</p></li>
<li><p>If a <code>string</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_string.htm" title="STRING (MGL-PAX:CLHS CLASS)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_string.htm" title="STRING (MGL-PAX:CLHS FUNCTION)"><code>1</code></a>), then it is written to the HTML output as is without
  any escaping.</p></li>
<li><p>If a function designator, then it is called with a single
  argument, the HTML stream, where it must write the output.</p></li>
</ul></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HTML-SIDEBAR-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HTML-SIDEBAR*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L188">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HTML-SIDEBAR*%20VARIABLE" >*document-html-sidebar*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>Stuff to be included in the HTML sidebar.</p>

<ul>
<li><p>If <code>nil</code>, a default sidebar is generated, with
  <a href="#MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS* VARIABLE"><code>*document-html-top-blocks-of-links*</code></a>, followed by the dynamic table
  of contents, and <a href="#MGL-PAX:*DOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS* VARIABLE"><code>*document-html-bottom-blocks-of-links*</code></a>.</p></li>
<li><p>If a <code>string</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_string.htm" title="STRING (MGL-PAX:CLHS CLASS)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_string.htm" title="STRING (MGL-PAX:CLHS FUNCTION)"><code>1</code></a>), then it is written to the HTML output as is without
  any escaping.</p></li>
<li><p>If a function designator, then it is called with a single
  argument, the HTML stream, where it must write the output.</p></li>
</ul></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HTML-TOP-BLOCKS-OF-LINKS-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L201">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS*%20VARIABLE" >*document-html-top-blocks-of-links*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>A list of blocks of links to be displayed on the sidebar on the left,
above the table of contents. A block is of the form <code>(&amp;key title id
links)</code>, where <code>title</code> will be displayed at the top of the block in a
HTML <code>div</code> with <code>id</code> followed by the links. <code>links</code> is a list of <code>(uri
label)</code> elements, where <code>uri</code> maybe a string or an object being
<a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>ed or a <code>reference</code> thereof.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ADOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*DOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L209">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*DOCUMENT-HTML-BOTTOM-BLOCKS-OF-LINKS*%20VARIABLE" >*document-html-bottom-blocks-of-links*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>Like <a href="#MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-HTML-TOP-BLOCKS-OF-LINKS* VARIABLE"><code>*document-html-top-blocks-of-links*</code></a>, only it is displayed
below the table of contents.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40GITHUB-WORKFLOW-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@HTML-OUTPUT%20MGL-PAX:SECTION" title="HTML Output">&#8592;</a> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">&#8594;</a> <a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION" title="Github Workflow">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/document-early.lisp#L223">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION">8.10.2 Github Workflow</a></h4>
<p>It is generally recommended to commit generated readmes (see
<a href="#MGL-PAX:UPDATE-ASDF-SYSTEM-READMES%20FUNCTION" title="MGL-PAX:UPDATE-ASDF-SYSTEM-READMES FUNCTION"><code>update-asdf-system-readmes</code></a>), so that users have something to read
without reading the code and sites like github can display them.</p>
<p>HTML documentation can also be committed, but there is an issue with
that: when linking to the sources (see <a href="#MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION" title="MGL-PAX:MAKE-GIT-SOURCE-URI-FN FUNCTION"><code>make-git-source-uri-fn</code></a>), the
commit id is in the link. This means that code changes need to be
committed first, and only then can HTML documentation be regenerated
and committed in a followup commit.</p>
<p>The second issue is that github is not very good at serving HTML
files from the repository itself (and
<a href="http://htmlpreview.github.io" >http://htmlpreview.github.io</a> chokes
on links to the sources).</p>
<p>The recommended workflow is to use
<a href="https://pages.github.com/" >gh-pages</a>, which can be made relatively
painless with the <code>git worktree</code> command. The gist of it is to make
the <code>doc/</code> directory a checkout of the branch named <code>gh-pages</code>.
There is a <a href="http://sangsoonam.github.io/2019/02/08/using-git-worktree-to-deploy-github-pages.html" >good
description</a>
of this general process. Two commits are needed still, but it is
somewhat less painful.</p>
<p>This way the HTML documentation will be available at</p>
<pre><code>http://&lt;username&gt;.github.io/&lt;repo-name&gt;
</code></pre>
<p>It is probably a good idea to add sections like the <a href="#MGL-PAX:@LINKS%20MGL-PAX:SECTION" title="Links and Systems">Links and Systems</a> section
to allow jumping between the repository and the gh-pages site.</p>
<p><a id="x-28MGL-PAX-3AMAKE-GITHUB-SOURCE-URI-FN-20FUNCTION-29"></a>
<a id="MGL-PAX:MAKE-GITHUB-SOURCE-URI-FN%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/document-early.lisp#L257">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:MAKE-GITHUB-SOURCE-URI-FN%20FUNCTION" >make-github-source-uri-fn</a></span></span> <span class="locative-args">asdf-system github-uri &amp;key git-version</span></span></p>

<p>This function is a backward-compatibility wrapper around
<a href="#MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION" title="MGL-PAX:MAKE-GIT-SOURCE-URI-FN FUNCTION"><code>make-git-source-uri-fn</code></a>, which supersedes <code>make-github-source-uri-fn</code>.
All arguments are passed on to <code>make-git-source-uri-fn</code>, leaving
<code>uri-format-string</code> at its default, which is suitable for github.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AMAKE-GIT-SOURCE-URI-FN-20FUNCTION-29"></a>
<a id="MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/document-early.lisp#L264">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:MAKE-GIT-SOURCE-URI-FN%20FUNCTION" >make-git-source-uri-fn</a></span></span> <span class="locative-args">asdf-system git-forge-uri &amp;key git-version (uri-format-string &quot;~A/blob/~A/~A#L~S&quot;)</span></span></p>

<p>Return a function suitable as <code>:source-uri-fn</code> of a page spec (see
the <code>pages</code> argument of <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>). The function looks at the source
location of the object passed to it, and if the location is found,
the path is made relative to the toplevel directory of the git
checkout containing the file of the <code>asdf-system</code> and finally an URI
pointing to your git forge (such as github) is returned. A warning
is signalled whenever the source location lookup fails or if the
source location points to a directory not below the directory of
<code>asdf-system</code>.</p>

<p>If <code>git-forge-uri</code> is <code>&quot;https://github.com/melisgl/mgl-pax/&quot;</code> and
<code>git-version</code> is <code>&quot;master&quot;</code>, then the returned URI may look like this:</p>

<pre><code>https://github.com/melisgl/mgl-pax/blob/master/src/pax-early.lisp#L12
</code></pre>

<p>If <code>git-version</code> is <code>nil</code>, then an attempt is made to determine to
current commit id from the <code>.git</code> in the directory holding
<code>asdf-system</code>. If no <code>.git</code> directory is found, then no links to
the git forge will be generated.</p>

<p><code>uri-format-string</code> is a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_format.htm" title="FORMAT (MGL-PAX:CLHS FUNCTION)"><code>cl:format</code></a> control string for four arguments:</p>

<ul>
<li><p><code>git-forge-uri</code>,</p></li>
<li><p><code>git-version</code>,</p></li>
<li><p>the relative path to the file of the source location of the reference,</p></li>
<li><p>and the line number.</p></li>
</ul>

<p>The default value of <code>uri-format-string</code> is for github. If using a
non-standard git forge, such as Sourcehut or Gitlab, simply pass a
suitable <code>uri-format-string</code> matching the URI scheme of your forge.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40PAX-WORLD-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@GITHUB-WORKFLOW%20MGL-PAX:SECTION" title="Github Workflow">&#8592;</a> <a href="#MGL-PAX:@DOCUMENTATION-UTILITIES%20MGL-PAX:SECTION" title="Utilities for Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION" title="Overview of Escaping">&#8594;</a> <a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/pax-world.lisp#L3">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION">8.10.3 PAX World</a></h4>
<p>PAX World is a registry of documents, which can generate
cross-linked HTML documentation pages for all the registered
documents. There is an official <a href="https://melisgl.github.io/mgl-pax-world/" >PAX
World</a>.</p>
<p><a id="x-28MGL-PAX-3AREGISTER-DOC-IN-PAX-WORLD-20FUNCTION-29"></a>
<a id="MGL-PAX:REGISTER-DOC-IN-PAX-WORLD%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/pax-world.lisp#L24">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:REGISTER-DOC-IN-PAX-WORLD%20FUNCTION" >register-doc-in-pax-world</a></span></span> <span class="locative-args">name sections page-specs</span></span></p>

<p>Register <code>sections</code> and <code>page-specs</code> under <code>name</code> (a symbol) in PAX
World. By default, <a href="#MGL-PAX:UPDATE-PAX-WORLD%20FUNCTION" title="MGL-PAX:UPDATE-PAX-WORLD FUNCTION"><code>update-pax-world</code></a> generates documentation for all
of these. <code>sections</code> and <code>page-specs</code> must be lists of <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>s and
<code>page-spec</code>s (SEE <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>) or designators of function of no arguments
that return such lists.</p></li>
</ul>
<p>For example, this is how PAX registers itself:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> pax-sections <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code">list @pax-manual</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> pax-pages <span class="paren2">(<span class="code"></span>)</span>
  `<span class="paren2">(<span class="code"><span class="paren3">(<span class="code"><span class="keyword">:objects</span> ,<span class="paren4">(<span class="code">pax-sections</span>)</span>
     <span class="keyword">:source-uri-fn</span> ,<span class="paren4">(<span class="code">make-git-source-uri-fn
                      <span class="keyword">:mgl-pax</span>
                      <span class="string">"https://github.com/melisgl/mgl-pax"</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">register-doc-in-pax-world <span class="keyword">:pax</span> 'pax-sections 'pax-pages</span>)</span>
</span></code></pre>
<p><a id="x-28MGL-PAX-3AUPDATE-PAX-WORLD-20FUNCTION-29"></a>
<a id="MGL-PAX:UPDATE-PAX-WORLD%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-util.lisp#L355">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:UPDATE-PAX-WORLD%20FUNCTION" >update-pax-world</a></span></span> <span class="locative-args">&amp;key (docs *registered-pax-world-docs*) dir</span></span></p>

<p>Generate HTML documentation for all <code>docs</code>. Files are created in
<code>dir</code> (<code>(asdf:system-relative-pathname :mgl-pax &quot;world/&quot;)</code> by
default if <code>dir</code> is <code>nil</code>). <code>docs</code> is a list of entries of the form (<code>name</code>
<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>sections</code></a> <code>page-specs</code>). The default for <code>docs</code> is all the sections and
pages registered with <a href="#MGL-PAX:REGISTER-DOC-IN-PAX-WORLD%20FUNCTION" title="MGL-PAX:REGISTER-DOC-IN-PAX-WORLD FUNCTION"><code>register-doc-in-pax-world</code></a>.</p>

<p>In the absence of <code>:header-fn</code> <code>:footer-fn</code>, <code>:output</code>, every spec in
<code>page-specs</code> is augmented with HTML headers, footers and output
location specifications (based on the name of the section).</p>

<p>If necessary a default page spec is created for every section.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40OVERVIEW-OF-ESCAPING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@PAX-WORLD%20MGL-PAX:SECTION" title="PAX World">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@OUTPUT-DETAILS%20MGL-PAX:SECTION" title="Output Details">&#8594;</a> <a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION" title="Overview of Escaping">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L3134">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION">8.11 Overview of Escaping</a></h3>
<p>Let's recap how escaping <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a>,
<a href="#MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE* VARIABLE">downcasing</a>, and
<a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a> works.</p>
<ul>
<li><p>One backslash in front of a <a href="#MGL-PAX:@WORD%20MGL-PAX:GLOSSARY-TERM" title="word">word</a> turns codification off. Use this
  to prevent codification words such as DOCUMENT, which is all
  uppercase hence <a href="#MGL-PAX:@CODIFIABLE%20MGL-PAX:GLOSSARY-TERM" title="codifiable">codifiable</a>, and it names an exported symbol hence
  it is <a href="#MGL-PAX:@INTERESTING%20MGL-PAX:GLOSSARY-TERM" title="interesting">interesting</a>.</p></li>
<li><p>One backslash right after an opening backtick turns autolinking
  off.</p></li>
<li><p>Two backslashes right after an opening backtick turns autolinking
  and downcasing off. Use this for things that are not Lisp code but
  which need to be in a monospace font.</p></li>
</ul>
<p>In the following examples capital C/D/A letters mark the presence,
and a/b/c the absence of codification, downcasing, and autolinking
assuming all these features are enabled by
<a href="#MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-UPPERCASE-IS-CODE* VARIABLE"><code>*document-uppercase-is-code*</code></a>, <a href="#MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE* VARIABLE"><code>*document-downcase-uppercase-code*</code></a>,
and <a href="#MGL-PAX:*DOCUMENT-LINK-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-CODE* VARIABLE"><code>*document-link-code*</code></a>.</p>
<pre><code>DOCUMENT                =&gt; [`document`][1234]    (CDA)
\DOCUMENT               =&gt; DOCUMENT              (cda)
`\DOCUMENT`             =&gt; `document`            (CDa)
`\\DOCUMENT`            =&gt; `DOCUMENT`            (CdA)
[DOCUMENT][]            =&gt; [`document`][1234]    (CDA)
[\DOCUMENT][]           =&gt; [DOCUMENT][1234]      (cdA)
[`\DOCUMENT`][]         =&gt; [`document`][1234]    (CDA) *
[`\\DOCUMENT`][]        =&gt; [`DOCUMENT`][1234]    (CdA)
[DOCUMENT][dislocated]  =&gt; `document`            (CDa)
</code></pre>
<p>Note that in the example marked with <code>*</code>, the single backslash,
that would normally turn autolinking off, is ignored because it is
in an explicit link.</p>
<p><a id="x-28MGL-PAX-3A-40OUTPUT-DETAILS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@OUTPUT-DETAILS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@OVERVIEW-OF-ESCAPING%20MGL-PAX:SECTION" title="Overview of Escaping">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION" title="Documentation Generation Implementation Notes">&#8594;</a> <a href="#MGL-PAX:@OUTPUT-DETAILS%20MGL-PAX:SECTION" title="Output Details">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document-object.lisp#L7">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@OUTPUT-DETAILS%20MGL-PAX:SECTION">8.12 Output Details</a></h3>
<p>By default, <a href="dref-manual.html#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s are documented in the following format.</p>
<pre><code><span class="code">- [&lt;locative-type&gt;] &lt;name&gt; &lt;arglist&gt;

    &lt;docstring&gt;</span></code></pre>
<p>The line with the bullet is printed with <a href="#MGL-PAX:DOCUMENTING-REFERENCE%20MGL-PAX:MACRO" title="MGL-PAX:DOCUMENTING-REFERENCE MGL-PAX:MACRO"><code>documenting-reference</code></a>. The
docstring is processed with <a href="#MGL-PAX:DOCUMENT-DOCSTRING%20FUNCTION" title="MGL-PAX:DOCUMENT-DOCSTRING FUNCTION"><code>document-docstring</code></a> while
<a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">Local References</a> established with <a href="#MGL-PAX:WITH-DISLOCATED-NAMES%20MGL-PAX:MACRO" title="MGL-PAX:WITH-DISLOCATED-NAMES MGL-PAX:MACRO"><code>with-dislocated-names</code></a> are in
effect for all variables locally bound in a definition with <a href="dref-manual.html#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a>,
and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pkg.htm" title="*PACKAGE* (MGL-PAX:CLHS VARIABLE)"><code>*package*</code></a> is bound to the second return value of <a href="dref-manual.html#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a>.</p>
<p>With this default format, PAX supports all locative types, but for
some <a href="dref-manual.html#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">Locative Types</a> defined in DRef and the <a href="#MGL-PAX:@PAX-LOCATIVES%20MGL-PAX:SECTION" title="PAX Locatives">PAX Locatives</a>,
special provisions have been made.</p>
<ul>
<li>For definitions with a <a href="dref-manual.html#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> or <a href="dref-manual.html#MGL-PAX:CONSTANT%20MGL-PAX:LOCATIVE" title="MGL-PAX:CONSTANT MGL-PAX:LOCATIVE"><code>constant</code></a> locative, their
initform is printed as their arglist. The initform is the <code>initform</code>
argument of the locative if provided, or the global symbol value of
their name. If no <code>initform</code> is provided, and the symbol is globally
unbound, then no arglist is printed.</li>
</ul>
<p>When the printed initform is too long, it is truncated.</p>
<ul>
<li><p>Depending of what the <a href="dref-manual.html#SETF%20MGL-PAX:LOCATIVE" title="SETF MGL-PAX:LOCATIVE"><code>setf</code></a> locative refers to, the <code>arglist</code> of the
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_s.htm#setf_expander" title="&quot;setf expander&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">setf expander</a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_s.htm#setf_function" title="&quot;setf function&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">setf function</a>, or the method
signature is printed as with the <a href="dref-manual.html#METHOD%20MGL-PAX:LOCATIVE" title="METHOD MGL-PAX:LOCATIVE"><code>method</code></a> locative.</p></li>
<li><p>For definitions with a <a href="dref-manual.html#METHOD%20MGL-PAX:LOCATIVE" title="METHOD MGL-PAX:LOCATIVE"><code>method</code></a> locative, the arglist printed is
the method signature, which consists of the locative's <code>qualifiers</code>
and <code>specializers</code> appended.</p></li>
<li><p>For definitions with an <a href="dref-manual.html#MGL-PAX:ACCESSOR%20MGL-PAX:LOCATIVE" title="MGL-PAX:ACCESSOR MGL-PAX:LOCATIVE"><code>accessor</code></a>, <a href="dref-manual.html#MGL-PAX:READER%20MGL-PAX:LOCATIVE" title="MGL-PAX:READER MGL-PAX:LOCATIVE"><code>reader</code></a> or <a href="dref-manual.html#MGL-PAX:WRITER%20MGL-PAX:LOCATIVE" title="MGL-PAX:WRITER MGL-PAX:LOCATIVE"><code>writer</code></a> locative, the
class on which they are specialized is printed as their arglist.</p></li>
<li><p>For definitions with a <a href="dref-manual.html#MGL-PAX:STRUCTURE-ACCESSOR%20MGL-PAX:LOCATIVE" title="MGL-PAX:STRUCTURE-ACCESSOR MGL-PAX:LOCATIVE"><code>structure-accessor</code></a> locative, the arglist
printed is the locative's <code>class-name</code> argument if provided.</p></li>
<li><p>For definitions with a <a href="dref-manual.html#CLASS%20MGL-PAX:LOCATIVE" title="CLASS MGL-PAX:LOCATIVE"><code>class</code></a> locative, the arglist printed is the
list of immediate superclasses with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_std_ob.htm" title="STANDARD-OBJECT (MGL-PAX:CLHS CLASS)"><code>standard-object</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_cnd.htm" title="CONDITION (MGL-PAX:CLHS CONDITION)"><code>condition</code></a> and
non-exported symbols omitted.</p></li>
<li><p>For definitions with a <a href="dref-manual.html#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a> locative, their most
important slots are printed as an unnumbered list.</p></li>
<li><p>When a definition with the <a href="#MGL-PAX:SECTION%20MGL-PAX:LOCATIVE" title="MGL-PAX:SECTION MGL-PAX:LOCATIVE"><code>section</code></a> locative is being documented,
a new (sub)section is opened (see <a href="#MGL-PAX:WITH-HEADING%20MGL-PAX:MACRO" title="MGL-PAX:WITH-HEADING MGL-PAX:MACRO"><code>with-heading</code></a>), within which
documentation for its each of its <a href="#MGL-PAX:SECTION-ENTRIES%20FUNCTION" title="MGL-PAX:SECTION-ENTRIES FUNCTION"><code>section-entries</code></a> is generated. A
fresh line is printed after all entries except the last.</p></li>
<li><p>For definitions with a <a href="#MGL-PAX:GLOSSARY-TERM%20MGL-PAX:LOCATIVE" title="MGL-PAX:GLOSSARY-TERM MGL-PAX:LOCATIVE"><code>glossary-term</code></a> locative, no arglist is
printed, and if non-<code>nil</code>, <a href="#MGL-PAX:GLOSSARY-TERM-TITLE%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29" title="MGL-PAX:GLOSSARY-TERM-TITLE (MGL-PAX:READER MGL-PAX:GLOSSARY-TERM)"><code>glossary-term-title</code></a> is printed as name.</p></li>
<li><p>For definitions with a <a href="#GO%20MGL-PAX:LOCATIVE" title="GO MGL-PAX:LOCATIVE"><code>go</code></a> locative, its <a href="dref-manual.html#DREF-EXT:LOCATIVE-ARGS%20FUNCTION" title="DREF-EXT:LOCATIVE-ARGS FUNCTION"><code>locative-args</code></a> are printed
as its arglist, along with a redirection message.</p></li>
<li><p>See the <a href="#MGL-PAX:INCLUDE%20MGL-PAX:LOCATIVE" title="MGL-PAX:INCLUDE MGL-PAX:LOCATIVE"><code>include</code></a> locative.</p></li>
<li><p>For definitions with a <a href="#MGL-PAX:CLHS%20MGL-PAX:LOCATIVE" title="MGL-PAX:CLHS MGL-PAX:LOCATIVE"><code>clhs</code></a> locative, the <code>locative-args</code> are printed
as the arglist. There is no docstring.</p></li>
<li><p>For definitions with an <a href="dref-manual.html#MGL-PAX:UNKNOWN%20MGL-PAX:LOCATIVE" title="MGL-PAX:UNKNOWN MGL-PAX:LOCATIVE"><code>unknown</code></a> locative, the <code>locative-args</code> are
printed as the arglist. There is no docstring.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40DOCUMENT-IMPLEMENTATION-NOTES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@OUTPUT-DETAILS%20MGL-PAX:SECTION" title="Output Details">&#8592;</a> <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8594;</a> <a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION" title="Documentation Generation Implementation Notes">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L3171">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION">8.13 Documentation Generation Implementation Notes</a></h3>
<p>Documentation Generation is supported on ABCL, AllegroCL, CLISP,
CCL, CMUCL, ECL and SBCL, but their outputs may differ due to the
lack of some introspective capability. SBCL generates complete
output. see <a href="dref-manual.html#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a>, <a href="dref-manual.html#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a> and <a href="dref-manual.html#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> for
implementation notes.</p>
<p>In addition, CLISP does not support the ambiguous case of <a href="#MGL-PAX:@PAX-URLS%20MGL-PAX:SECTION" title="PAX URLs">PAX URLs</a>
for <a href="#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" title="Browsing Live Documentation">Browsing Live Documentation</a> because the current implementation
relies on Swank to list definitions of symbols (as <a href="dref-manual.html#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a>,
<a href="dref-manual.html#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a>, etc), and that simply doesn't work.</p>
<p><a id="x-28MGL-PAX-3A-40TRANSCRIPTS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@DOCUMENT-IMPLEMENTATION-NOTES%20MGL-PAX:SECTION" title="Documentation Generation Implementation Notes">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/transcribe&quot; ASDF/SYSTEM:SYSTEM">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L121">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION">9 Transcripts</a></h2>
<p>What are transcripts for? When writing a tutorial, one often wants
to include a REPL session with maybe a few defuns and a couple of
forms whose output or return values are shown. Also, in a function's
docstring an example call with concrete arguments and return values
speaks volumes. A transcript is a text that looks like a REPL
session, but which has a light markup for printed output and return
values, while no markup (i.e. prompt) for Lisp forms. PAX
transcripts may include output and return values of all forms, or
only selected ones. In either case, the transcript itself can be
easily generated from the source code.</p>
<p>The main worry associated with including examples in the
documentation is that they tend to get out-of-sync with the code.
This is solved by being able to parse back and update transcripts.
In fact, this is exactly what happens during documentation
generation with PAX. Code sections tagged <code>cl-transcript</code> are
retranscribed and checked for inconsistency (that is, any difference
in output or return values). If the consistency check fails, an
error is signalled that includes a reference to the object being
documented.</p>
<p>Going beyond documentation, transcript consistency checks can be
used for writing simple tests in a very readable form. For example:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code">+ 1 2</span>)</span>
=&gt; 3

<span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ <span class="keyword">:hello</span></span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span>
.. HELLO
=&gt; :HELLO
=&gt; <span class="paren1">(<span class="code">1 2</span>)</span></span></code></pre>
<p>All in all, transcripts are a handy tool especially when combined
with the Emacs support to regenerate them and with
PYTHONIC-STRING-READER's triple-quoted strings, that allow one to
work with nested strings with less noise. The triple-quote syntax
can be enabled with:</p>
<pre><code>(in-readtable pythonic-string-syntax)
</code></pre>
<p><a id="x-28-22mgl-pax-2Ftranscribe-22-20ASDF-2FSYSTEM-3ASYSTEM-29"></a>
<a id="%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION" title="Transcribing with Emacs">&#8594;</a> <a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/transcribe&quot; ASDF/SYSTEM:SYSTEM">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/mgl-pax.asd#L1">&#955;</a></span></span></p>
<h3><a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM">9.1 The mgl-pax/transcribe ASDF System</a></h3>
<ul>
<li>Description: Transcription support for MGL-PAX.</li>
<li>Long Description: Do not declare a dependency on this system.
  It is autoloaded by <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>mgl-pax:transcribe</code></a> and by the Emacs
  integration (see <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">Transcripts</a>).</li>
<li>Licence: MIT, see COPYING.</li>
<li>Author: Gábor Melis</li>
<li>Mailto: <a href="mailto:mega@retes.hu" >mega@retes.hu</a></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40TRANSCRIBING-WITH-EMACS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#%22mgl-pax%2Ftranscribe%22%20ASDF%2FSYSTEM:SYSTEM" title="&quot;mgl-pax/transcribe&quot; ASDF/SYSTEM:SYSTEM">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION" title="Transcript API">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION" title="Transcribing with Emacs">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1172">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION">9.2 Transcribing with Emacs</a></h3>
<p>Typical transcript usage from within Emacs is simple: add a lisp
form to a docstring or comment at any indentation level. Move the
cursor right after the end of the form as if you were to evaluate it
with <code>C-x C-e</code>. The cursor is marked by <code>#\^</code>:</p>
<pre><code>This is part of a docstring.

```cl-transcript
(values (princ :hello) (list 1 2))^
```
</code></pre>
<p>Note that the use of fenced code blocks with the language tag
<code>cl-transcript</code> is only to tell PAX to perform consistency checks at
documentation generation time.</p>
<p>Now invoke the elisp function <code>mgl-pax-transcribe</code> where the cursor
is and the fenced code block from the docstring becomes:</p>
<pre><code>(values (princ :hello) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1 2)
^
</code></pre>
<p>Then you change the printed message and add a comment to the second
return value:</p>
<pre><code>(values (princ :hello-world) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1
    ;; This value is arbitrary.
    2)
</code></pre>
<p>When generating the documentation you get a
<a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR CONDITION"><code>transcription-consistency-error</code></a> because the printed output and the
first return value changed so you regenerate the documentation by
marking the region of bounded by <code>#\|</code> and the cursor at <code>#\^</code> in
the example:</p>
<pre><code>|(values (princ :hello-world) (list 1 2))
.. HELLO
=&gt; :HELLO
=&gt; (1
    ;; This value is arbitrary.
    2)
^
</code></pre>
<p>then invoke the elisp function <code>mgl-pax-retranscribe-region</code> to get:</p>
<pre><code>(values (princ :hello-world) (list 1 2))
.. HELLO-WORLD
=&gt; :HELLO-WORLD
=&gt; (1
    ;; This value is arbitrary.
    2)
^
</code></pre>
<p>Note how the indentation and the comment of <code>(1 2)</code> was left alone
but the output and the first return value got updated.</p>
<p>Alternatively, <code>C-u 1 mgl-pax-transcribe</code> will emit commented markup:</p>
<pre><code>(values (princ :hello) (list 1 2))
;.. HELLO
;=&gt; :HELLO
;=&gt; (1 2)
</code></pre>
<p><code>C-u 0 mgl-pax-retranscribe-region</code> will turn commented into
non-commented markup. In general, the numeric prefix argument is the
index of the syntax to be used in <a href="#MGL-PAX:*TRANSCRIBE-SYNTAXES*%20VARIABLE" title="MGL-PAX:*TRANSCRIBE-SYNTAXES* VARIABLE"><code>*transcribe-syntaxes*</code></a>. Without a
prefix argument <code>mgl-pax-retranscribe-region</code> will not change the
markup style.</p>
<p>Finally, not only do both functions work at any indentation level,
but in comments too:</p>
<pre><code>;;;; (values (princ :hello) (list 1 2))
;;;; .. HELLO
;;;; =&gt; :HELLO
;;;; =&gt; (1 2)
</code></pre>
<p>The dynamic environment of the transcription is determined by the
<code>:dynenv</code> argument of the enclosing cl-transcript code block (see
<a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">Controlling the Dynamic Environment</a>).</p>
<p>Transcription support in Emacs can be enabled by loading
<code>src/mgl-pax.el</code>. See <a href="#MGL-PAX:@EMACS-SETUP%20MGL-PAX:SECTION" title="Emacs Setup">Emacs Setup</a>.</p>
<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-API-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIBING-WITH-EMACS%20MGL-PAX:SECTION" title="Transcribing with Emacs">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION" title="Transcript API">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L169">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION">9.3 Transcript API</a></h3>
<p><a id="x-28MGL-PAX-3ATRANSCRIBE-20FUNCTION-29"></a>
<a id="MGL-PAX:TRANSCRIBE%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L234">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" >transcribe</a></span></span> <span class="locative-args">input output &amp;key update-only (include-no-output update-only) (include-no-value update-only) (echo t) (check-consistency *transcribe-check-consistency*) default-syntax (input-syntaxes *transcribe-syntaxes*) (output-syntaxes *transcribe-syntaxes*) dynenv</span></span></p>

<p>Read forms from <code>input</code> and write them (iff <code>echo</code>) to <code>output</code>
followed by any output and return values produced by calling <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_eval.htm" title="EVAL (MGL-PAX:CLHS FUNCTION)"><code>eval</code></a> on
the form. <code>input</code> can be a stream or a string, while <code>output</code> can be a
stream or <code>nil</code> in which case transcription goes into a string. The
return value is the <code>output</code> stream or the string that was
constructed. Since <code>transcribe</code> <code>eval</code>uates arbitrary code anyway, forms
are read with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_rd_eva.htm" title="*READ-EVAL* (MGL-PAX:CLHS VARIABLE)"><code>*read-eval*</code></a> <code>t</code>.</p>

<p>A simple example is this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">transcribe <span class="string">"(princ 42) "</span> nil</span>)</span>
=&gt; "<span class="paren1">(<span class="code">princ 42</span>)</span>
.. 42
=&gt; 42
"</span></code></pre>

<p>However, the above may be a bit confusing since this documentation
uses <code>transcribe</code> markup syntax in this very example, so let's do it
differently. If we have a file with these contents:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ 42</span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span></span></code></pre>

<p>it is transcribed to:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ 42</span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span>
.. 42
=&gt; 42
=&gt; <span class="paren1">(<span class="code">1 2</span>)</span></span></code></pre>

<p>Output to all standard streams is captured and printed with
the <code>:output</code> prefix (<code>&quot;..&quot;</code>). The return values above are printed
with the <code>:readable</code> prefix (<code>&quot;=&gt;&quot;</code>). Note how these prefixes are
always printed on a new line to facilitate parsing.</p>

<p><strong>Updating</strong></p>

<p><code>transcribe</code> is able to parse its own output. If we transcribe the
previous output above, we get it back exactly. However, if we remove
all output markers, leave only a placeholder value marker and
pass <code>:update-only</code> <code>t</code> with source:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ 42</span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span>
=&gt;</span></code></pre>

<p>we get this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ 42</span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span>
=&gt; 42
=&gt; <span class="paren1">(<span class="code">1 2</span>)</span></span></code></pre>

<p>With <code>update-only</code>, the printed output of a form is only transcribed
if there were output markers in the source. Similarly, with
<code>update-only</code>, return values are only transcribed if there were value
markers in the source.</p>

<p><strong>No Output/Values</strong></p>

<p>If the form produces no output or returns no values, then whether or
not output and values are transcribed is controlled by
<code>include-no-output</code> and <code>include-no-value</code>, respectively. By default,
neither is on so:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values</span>)</span>
..
=&gt;</span></code></pre>

<p>is transcribed to</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values</span>)</span></span></code></pre>

<p>With <code>update-only</code> true, we probably wouldn't like to lose those
markers since they were put there for a reason. Hence, with
<code>update-only</code>, <code>include-no-output</code> and <code>include-no-value</code> default to true.
So with <code>update-only</code> the above example is transcribed to:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values</span>)</span>
..
=&gt; <span class="comment">; No value</span></span></code></pre>

<p>where the last line is the <code>:no-value</code> prefix.</p>

<p><strong>Consistency Checks</strong></p>

<p>If <code>check-consistency</code> is true, then <code>transcribe</code> signals a continuable
<a href="#MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR CONDITION"><code>transcription-output-consistency-error</code></a> whenever a form's output as a
string is different from what was in <code>input</code>, provided that <code>input</code>
contained the output. Similarly, for values, a continuable
<a href="#MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR CONDITION"><code>transcription-values-consistency-error</code></a> is signalled if a value read
from the source does not print as the as the value returned by <code>eval</code>.
This allows readable values to be hand-indented without failing
consistency checks:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">list 1 2</span>)</span>
=&gt; <span class="comment">;; This is commented, too.
</span>   <span class="paren1">(<span class="code">1
      <span class="comment">;; Funny indent.
</span>      2</span>)</span></span></code></pre>

<p>See <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">Transcript Consistency Checking</a> for the full picture.</p>

<p><strong>Unreadable Values</strong></p>

<p>The above scheme involves <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_rd_rd.htm" title="READ (MGL-PAX:CLHS FUNCTION)"><code>read</code></a>, so consistency of unreadable values
cannot be treated the same. In fact, unreadable values must even be
printed differently for transcribe to be able to read them back:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> some-class <span class="paren2">(<span class="code"></span>)</span> <span class="paren2">(<span class="code"></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> print-object <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">obj some-class</span>)</span> stream</span>)</span>
  <span class="paren2">(<span class="code">print-unreadable-object <span class="paren3">(<span class="code">obj stream <span class="keyword">:type</span> t</span>)</span>
    <span class="paren3">(<span class="code">format stream \"~%~%end\"</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">make-instance 'some-class</span>)</span>
==&gt; #&lt;SOME-CLASS 
--&gt;
--&gt; end&gt;</span></code></pre>

<p>where <code>&quot;==&gt;&quot;</code> is the <code>:unreadable</code> prefix and <code>&quot;--&gt;&quot;</code> is the
<code>:unreadable-continuation</code> prefix. As with outputs, a consistency
check between an unreadable value from the source and the value from
<code>eval</code> is performed with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_stgeq_.htm" title="STRING= (MGL-PAX:CLHS FUNCTION)"><code>string=</code></a> by default. That is, the value from
<code>eval</code> is printed to a string and compared to the source value. Hence,
any change to unreadable values will break consistency checks. This
is most troublesome with instances of classes with the default
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_pr_obj.htm" title="PRINT-OBJECT (MGL-PAX:CLHS GENERIC-FUNCTION)"><code>print-object</code></a> method printing the memory address. See
<a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION" title="Finer-Grained Consistency Checks">Finer-Grained Consistency Checks</a>.</p>

<p><strong>Errors</strong></p>

<p>If an <a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_error.htm" title="ERROR (MGL-PAX:CLHS CONDITION)"><code>error</code></a> condition is signalled, the error is printed to the
output and no values are returned.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">progn</span></i>
  <span class="paren2">(<span class="code">print <span class="string">"hello"</span></span>)</span>
  <span class="paren2">(<span class="code">error <span class="string">"no greeting"</span></span>)</span></span>)</span>
..
.. "hello" 
.. debugger invoked on SIMPLE-ERROR:
..   no greeting</span></code></pre>

<p>To keep the textual representation somewhat likely to be portable,
the printing is done with <code>(format t &quot;#&lt;~S ~S&gt;&quot; (type-of
error) (princ-to-string error))</code>. <a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_smp_cn.htm" title="SIMPLE-CONDITION (MGL-PAX:CLHS CONDITION)"><code>simple-condition</code></a>s are formatted to
strings with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_smp_cn.htm" title="SIMPLE-CONDITION-FORMAT-CONTROL (MGL-PAX:CLHS FUNCTION)"><code>simple-condition-format-control</code></a> and
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_smp_cn.htm" title="SIMPLE-CONDITION-FORMAT-ARGUMENTS (MGL-PAX:CLHS FUNCTION)"><code>simple-condition-format-arguments</code></a>.</p>

<p><strong>Syntaxes</strong></p>

<p>Finally, a transcript may employ different syntaxes for the output
and values of different forms. When <code>input</code> is read, the syntax for
each form is determined by trying to match all prefixes from all
syntaxes in <code>input-syntaxes</code> against a line. If there are no output or
values for a form in <code>input</code>, then the syntax remains undetermined.</p>

<p>When <code>output</code> is written, the prefixes to be used are looked up in
<code>default-syntax</code> of <code>output-syntaxes</code>, if <code>default-syntax</code> is not <code>nil</code>. If
<code>default-syntax</code> is <code>nil</code>, then the syntax used by the same form in the
<code>input</code> is used or (if that could not be determined) the syntax of the
previous form. If there was no previous form, then the first syntax
if <code>output-syntaxes</code> is used.</p>

<p>To produce a transcript that's executable Lisp code,
use <code>:default-syntax</code> <code>:commented-1:</code></p>

<pre><code><span class="code"><span class="paren1">(<span class="code">make-instance 'some-class</span>)</span>
<span class="comment">;==&gt; #&lt;SOME-CLASS
</span><span class="comment">;--&gt;
</span><span class="comment">;--&gt; end&gt;
</span>
<span class="paren1">(<span class="code">list 1 2</span>)</span>
<span class="comment">;=&gt; (1
</span><span class="comment">;-&gt;    2)</span></span></code></pre>

<p>To translate the above to uncommented syntax,
use <code>:default-syntax</code> <code>:default</code>. If <code>default-syntax</code> is <code>nil</code> (the
default), the same syntax will be used in the output as in the input
as much as possible.</p>

<p><strong>Dynamic Environment</strong></p>

<p>If <code>dynenv</code> is non-<code>nil</code>, then it must be a function that establishes
the dynamic environment in which transcription shall take place. It
is called with a single argument: a thunk (a function of no
arguments). See <a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">Controlling the Dynamic Environment</a> for an example.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ATRANSCRIBE-CHECK-CONSISTENCY-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*TRANSCRIBE-CHECK-CONSISTENCY*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L231">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*TRANSCRIBE-CHECK-CONSISTENCY*%20VARIABLE" >*transcribe-check-consistency*</a></span></span> <span class="locative-args">nil</span></span></p>

<p>The default value of <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a>'s <code>check-consistency</code> argument.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-2ATRANSCRIBE-SYNTAXES-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*TRANSCRIBE-SYNTAXES*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L178">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*TRANSCRIBE-SYNTAXES*%20VARIABLE" >*transcribe-syntaxes*</a></span></span> <span class="locative-args">((:default (:output &quot;..&quot;) (:no-value &quot;=&gt; ; No value&quot;) (:readable &quot;=&gt;&quot;)
  (:unreadable &quot;==&gt;&quot;) (:unreadable-continuation &quot;--&gt;&quot;))
 (:commented-1 (:output &quot;;..&quot;) (:no-value &quot;;=&gt; ; No value&quot;) (:readable &quot;;=&gt;&quot;)
  (:readable-continuation &quot;;-&gt;&quot;) (:unreadable &quot;;==&gt;&quot;)
  (:unreadable-continuation &quot;;--&gt;&quot;))
 (:commented-2 (:output &quot;;;..&quot;) (:no-value &quot;;;=&gt; ; No value&quot;)
  (:readable &quot;;;=&gt;&quot;) (:readable-continuation &quot;;;-&gt;&quot;) (:unreadable &quot;;;==&gt;&quot;)
  (:unreadable-continuation &quot;;;--&gt;&quot;)))</span></span></p>

<p>The default syntaxes used by <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> for reading and writing
lines containing output and values of an evaluated form.</p>

<p>A syntax is a list of of the form <code>(syntax-id &amp;rest prefixes)</code> where
<code>prefixes</code> is a list of <code>(prefix-id prefix-string)</code> elements. For
example the syntax <code>:commented-1</code> looks like this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><span class="keyword">:commented-1</span>
 <span class="paren2">(<span class="code"><span class="keyword">:output</span> <span class="string">";.."</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:no-value</span> <span class="string">";=&gt;  No value"</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:readable</span> <span class="string">";=&gt;"</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:readable-continuation</span> <span class="string">";-&gt;"</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:unreadable</span> <span class="string">";==&gt;"</span></span>)</span>
 <span class="paren2">(<span class="code"><span class="keyword">:unreadable-continuation</span> <span class="string">";--&gt;"</span></span>)</span></span>)</span></span></code></pre>

<p>All of the above prefixes must be defined for every syntax except
for <code>:readable-continuation</code>. If that's missing (as in the <code>:default</code>
syntax), then the following value is read with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_rd_rd.htm" title="READ (MGL-PAX:CLHS FUNCTION)"><code>read</code></a> and printed with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_pr.htm" title="PRIN1 (MGL-PAX:CLHS FUNCTION)"><code>prin1</code></a> (hence no need to mark up the following lines).</p>

<p>When writing, an extra space is added automatically if the line to
be prefixed is not empty. Similarly, the first space following the
prefix is discarded when reading.</p>

<p>See <code>transcribe</code> for how the actual syntax to be used is selected.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ATRANSCRIPTION-ERROR-20CONDITION-29"></a>
<a id="MGL-PAX:TRANSCRIPTION-ERROR%20CONDITION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1097">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIPTION-ERROR%20CONDITION" >transcription-error</a></span></span> <span class="locative-args"><a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_error.htm" title="ERROR (MGL-PAX:CLHS CONDITION)">error</a></span></span></p>

<p>Represents syntactic errors in the <code>source</code> argument
of <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> and also serves as the superclass of
<a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR CONDITION"><code>transcription-consistency-error</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ATRANSCRIPTION-CONSISTENCY-ERROR-20CONDITION-29"></a>
<a id="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1143">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" >transcription-consistency-error</a></span></span> <span class="locative-args"><a href="#MGL-PAX:TRANSCRIPTION-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-ERROR CONDITION">transcription-error</a></span></span></p>

<p>A common superclass for
<a href="#MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR CONDITION"><code>transcription-output-consistency-error</code></a> and
<a href="#MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR CONDITION"><code>transcription-values-consistency-error</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ATRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR-20CONDITION-29"></a>
<a id="MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR%20CONDITION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1149">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIPTION-OUTPUT-CONSISTENCY-ERROR%20CONDITION" >transcription-output-consistency-error</a></span></span> <span class="locative-args"><a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR CONDITION">transcription-consistency-error</a></span></span></p>

<p>Signalled (with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_cerror.htm" title="CERROR (MGL-PAX:CLHS FUNCTION)"><code>cerror</code></a>) by <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> when invoked
with <code>:check-consistency</code> and the output of a form is not the same as
what was parsed.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ATRANSCRIPTION-VALUES-CONSISTENCY-ERROR-20CONDITION-29"></a>
<a id="MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR%20CONDITION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1156">[condition]</a></span> <span class="reference-object"><a href="#MGL-PAX:TRANSCRIPTION-VALUES-CONSISTENCY-ERROR%20CONDITION" >transcription-values-consistency-error</a></span></span> <span class="locative-args"><a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR CONDITION">transcription-consistency-error</a></span></span></p>

<p>Signalled (with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_cerror.htm" title="CERROR (MGL-PAX:CLHS FUNCTION)"><code>cerror</code></a>) by <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> when invoked
with <code>:check-consistency</code> and the values of a form are inconsistent
with their parsed representation.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-CONISTENCY-CHECKING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-API%20MGL-PAX:SECTION" title="Transcript API">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPTS%20MGL-PAX:SECTION" title="Transcripts">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION" title="Finer-Grained Consistency Checks">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1292">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION">9.4 Transcript Consistency Checking</a></h3>
<p>The main use case for consistency checking is detecting
out-of-date examples in documentation, although using it for writing
tests is also a possibility. Here, we focus on the former.</p>
<p>When a markdown code block tagged <code>cl-transcript</code> is processed
during <a href="#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" title="Generating Documentation">Generating Documentation</a>, the code in it is replaced with
the output of with <code>(transcribe &lt;code&gt; nil :update-only t
:check-consistency t)</code>. Suppose we have the following example of the
function <code>greet</code>, that prints <code>hello</code> and returns 7.</p>
<pre><code>```cl-transcript
(greet)
.. hello
=&gt; 7
```
</code></pre>
<p>Now, if we change <code>greet</code> to print or return something else, a
<a href="#MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR%20CONDITION" title="MGL-PAX:TRANSCRIPTION-CONSISTENCY-ERROR CONDITION"><code>transcription-consistency-error</code></a> will be signalled during
documentation generation. Then we may fix the documentation or
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/r_contin.htm" title="CONTINUE (MGL-PAX:CLHS RESTART)"><code>continue</code></a> from the error.</p>
<p>By default, comparisons of previous to current output, readable and
unreadable return values are performed with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_stgeq_.htm" title="STRING= (MGL-PAX:CLHS FUNCTION)"><code>string=</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_equal.htm" title="EQUAL (MGL-PAX:CLHS FUNCTION)"><code>equal</code></a>, and
<code>string=</code>, respectively, which is great in the simple case.
Non-determinism aside, exact matching becomes brittle as soon as the
notoriously unportable pretty printer is used or when unreadable
objects are printed with their <code>#&lt;&gt;</code> syntax, especially when
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_pr_unr.htm" title="PRINT-UNREADABLE-OBJECT (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>print-unreadable-object</code></a> is used with <code>:identity t</code>.</p>
<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION" title="Finer-Grained Consistency Checks">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1327">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION">9.4.1 Finer-Grained Consistency Checks</a></h4>
<p>To get around this problem, consistency checking of output,
readable and unreadable values can be customized individually by
supplying <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> with a <code>check-consistency</code> argument
like <code>((:output &lt;output-check&gt;) (:readable
&lt;readable-check&gt;) (:unreadable &lt;unreadable-check&gt;))</code>. In this case,
<code>&lt;output-check&gt;</code> may be <code>nil</code>, <code>t</code>, or a function designator.</p>
<ul>
<li><p>If it's <code>nil</code> or there is no <code>:output</code> entry in the list, then the
  output is not checked for consistency.</p></li>
<li><p>If it's <code>t</code>, then the outputs are compared with the default,
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_stgeq_.htm" title="STRING= (MGL-PAX:CLHS FUNCTION)"><code>string=</code></a>.</p></li>
<li><p>If it's a function designator, then it's called with two strings
  and must return whether they are consistent with each other.</p></li>
</ul>
<p>The case of <code>&lt;readable-check&gt;</code> and <code>&lt;unreadable-check&gt;</code> is similar.</p>
<p>Code blocks tagged <code>cl-transcript</code> can take arguments, which they
pass on to <code>transcribe</code>. The following shows how to check only the
output.</p>
<pre><code>```cl-transcript (:check-consistency ((:output t)))
(error &quot;Oh, no.&quot;)
.. debugger invoked on SIMPLE-ERROR:
..   Oh, no.

(make-condition 'simple-error)
==&gt; #&lt;SIMPLE-ERROR {1008A81533}&gt;
</code></pre>
<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-DYNENV-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-FINER-GRAINED-CONSISTENCY-CHECKS%20MGL-PAX:SECTION" title="Finer-Grained Consistency Checks">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8593;</a> <a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION" title="Utilities for Consistency Checking">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1358">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION">9.4.2 Controlling the Dynamic Environment</a></h4>
<p>The dynamic environment in which forms in the transcript are
evaluated can be controlled via the <code>:dynenv</code> argument of
<code>cl-transcript</code>.</p>
<pre><code>```cl-transcript (:dynenv my-transcript)
...
```
</code></pre>
<p>In this case, instead of calling <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a> directly, the call will
be wrapped in a function of no arguments and passed to the function
<code>my-transcript</code>, which establishes the desired dynamic environment
and calls its argument. The following definition of <code>my-transcript</code>
simply packages up oft-used settings to <code>transcribe</code>.</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> my-transcript <span class="paren2">(<span class="code">fn</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code"><span class="special">*transcribe-check-consistency*</span>
          '<span class="paren5">(<span class="code"><span class="paren6">(<span class="code"><span class="keyword">:output</span> my-transcript-output=</span>)</span>
            <span class="paren6">(<span class="code"><span class="keyword">:readable</span> equal</span>)</span>
            <span class="paren6">(<span class="code"><span class="keyword">:unreadable</span> nil</span>)</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">funcall fn</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> my-transcript-output= <span class="paren2">(<span class="code">string1 string2</span>)</span>
  <span class="paren2">(<span class="code">string= <span class="paren3">(<span class="code">my-transcript-normalize-output string1</span>)</span>
           <span class="paren3">(<span class="code">my-transcript-normalize-output string2</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> my-transcript-normalize-output <span class="paren2">(<span class="code">string</span>)</span>
  <span class="paren2">(<span class="code">squeeze-whitespace <span class="paren3">(<span class="code">delete-trailing-whitespace <span class="paren4">(<span class="code">delete-comments string</span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre>
<p>A more involved solution could rebind global variables set in
transcripts, unintern symbols created or even create a temporary
package for evaluation.</p>
<p><a id="x-28MGL-PAX-3A-40TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-DYNENV%20MGL-PAX:SECTION" title="Controlling the Dynamic Environment">&#8592;</a> <a href="#MGL-PAX:@TRANSCRIPT-CONISTENCY-CHECKING%20MGL-PAX:SECTION" title="Transcript Consistency Checking">&#8593;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8594;</a> <a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION" title="Utilities for Consistency Checking">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1396">&#955;</a></span></span></p>
<h4><a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION">9.4.3 Utilities for Consistency Checking</a></h4>
<p><a id="x-28MGL-PAX-3ASQUEEZE-WHITESPACE-20FUNCTION-29"></a>
<a id="MGL-PAX:SQUEEZE-WHITESPACE%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1402">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:SQUEEZE-WHITESPACE%20FUNCTION" >squeeze-whitespace</a></span></span> <span class="locative-args">string</span></span></p>

<p>Replace consecutive whitespace characters with a single space in
<code>string</code>. This is useful to do undo the effects of pretty printing
when building comparison functions for <a href="#MGL-PAX:TRANSCRIBE%20FUNCTION" title="MGL-PAX:TRANSCRIBE FUNCTION"><code>transcribe</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ADELETE-TRAILING-WHITESPACE-20FUNCTION-29"></a>
<a id="MGL-PAX:DELETE-TRAILING-WHITESPACE%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1417">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DELETE-TRAILING-WHITESPACE%20FUNCTION" >delete-trailing-whitespace</a></span></span> <span class="locative-args">string</span></span></p>

<p>Delete whitespace characters after the last non-whitespace
character in each line in <code>string</code>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ADELETE-COMMENTS-20FUNCTION-29"></a>
<a id="MGL-PAX:DELETE-COMMENTS%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/transcribe/transcribe.lisp#L1428">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DELETE-COMMENTS%20FUNCTION" >delete-comments</a></span></span> <span class="locative-args">string &amp;key (pattern &quot;;&quot;)</span></span></p>

<p>For each line in <code>string</code> delete the rest of the line after and
including the first occurrence of <code>pattern</code>. On changed lines, delete
trailing whitespace too. Let's define a comparison function:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> string=/no-comments <span class="paren2">(<span class="code">string1 string2</span>)</span>
  <span class="paren2">(<span class="code">string= <span class="paren3">(<span class="code">delete-comments string1</span>)</span> <span class="paren3">(<span class="code">delete-comments string2</span>)</span></span>)</span></span>)</span></span></code></pre>

<p>And use it to check consistency of output:</p>

<pre><code>```cl-transcript (:check-consistency ((:output string=/no-comments)))
(format t &quot;hello~%world&quot;)
.. hello     ; This is the first line.
.. world     ; This is the second line.
```
</code></pre>

<p>Just to make sure the above example works, here it is without the being
quoted.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">format t <span class="string">"hello~%world"</span></span>)</span>
.. hello     <span class="comment">; This is the first line.
</span>.. world     <span class="comment">; This is the second line.</span></span></code></pre></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40EXTENSION-API-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@TRANSCRIPT-UTILITIES-FOR-CONSISTENCY-CHECKING%20MGL-PAX:SECTION" title="Utilities for Consistency Checking">&#8592;</a> <a href="pax-manual.html" title="PAX Manual">&#8593;</a> <a href="#MGL-PAX:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">&#8594;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/extension-api.lisp#L5">&#955;</a></span></span></p>
<h2><a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION">10 Writing Extensions</a></h2>
<p><a id="x-28MGL-PAX-3A-40ADDING-NEW-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@LOCATIVE-ALIASES%20MGL-PAX:SECTION" title="Locative Aliases">&#8594;</a> <a href="#MGL-PAX:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/extension-api.lisp#L13">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION">10.1 Adding New Locatives</a></h3>
<p>Once everything in <a href="dref-manual.html#DREF-EXT:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">Adding New Locatives</a> has been done,
there are only a couple of PAX generic functions left to extend.</p>
<p><a id="x-28MGL-PAX-3ADOCUMENT-OBJECT-2A-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:DOCUMENT-OBJECT*%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/extension-api.lisp#L27">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENT-OBJECT*%20GENERIC-FUNCTION" >document-object*</a></span></span> <span class="locative-args">object stream</span></span></p>

<p>Write <code>object</code> in <a href="#MGL-PAX:*FORMAT*%20VARIABLE" title="MGL-PAX:*FORMAT* VARIABLE"><code>*format*</code></a> to <code>stream</code>.
Specialize this on a subclass of <a href="dref-manual.html#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> if that subclass is
not <a href="dref-manual.html#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>able, else on the type of object it resolves to. This
function is for extension only. Don't call it directly.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AEXPORTABLE-REFERENCE-P-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L168">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION" >exportable-reference-p</a></span></span> <span class="locative-args">package symbol locative-type locative-args</span></span></p>

<p>Return true iff <code>symbol</code> is to be exported from
<code>package</code> when it occurs in a <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> in a reference with
<code>locative-type</code> and <code>locative-args</code>. <code>symbol</code> is <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_s.htm" title="FIND-SYMBOL (MGL-PAX:CLHS FUNCTION)">accessible</a>
in <code>package</code>.</p>

<p>The default method calls <a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a> with
<code>locative-type</code> and ignores the other arguments.</p>

<p>By default, <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>s and <a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a>s are not exported although
they are <code>exportable-locative-type-p</code>. To export symbols naming
sections from MGL-PAX, the following method could be added:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> exportable-reference-p <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">package <span class="paren4">(<span class="code">eql <span class="paren5">(<span class="code">find-package 'mgl-pax</span>)</span></span>)</span></span>)</span>
                                   symbol <span class="paren3">(<span class="code">locative-type <span class="paren4">(<span class="code">eql 'section</span>)</span></span>)</span>
                                   locative-args</span>)</span>
  t</span>)</span></span></code></pre></li>
</ul>
<p><a id="x-28MGL-PAX-3AEXPORTABLE-LOCATIVE-TYPE-P-20GENERIC-FUNCTION-29"></a>
<a id="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L203">[generic-function]</a></span> <span class="reference-object"><a href="#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" >exportable-locative-type-p</a></span></span> <span class="locative-args">locative-type</span></span></p>

<p>Return true iff symbols in references with
<code>locative-type</code> are to be exported by default when they occur in a
<a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>. The default method returns <code>t</code>, while the methods for
<a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>, <a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE (MGL-PAX:CLHS CLASS)"><code>package</code></a>, <a href="dref-manual.html#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_method.htm" title="METHOD (MGL-PAX:CLHS CLASS)"><code>method</code></a> and <a href="#MGL-PAX:INCLUDE%20MGL-PAX:LOCATIVE" title="MGL-PAX:INCLUDE MGL-PAX:LOCATIVE"><code>include</code></a>
return <code>nil</code>.</p>

<p>This function is called by the default method of
<a href="#MGL-PAX:EXPORTABLE-REFERENCE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-REFERENCE-P GENERIC-FUNCTION"><code>exportable-reference-p</code></a> to decide what symbols <code>defsection</code> shall
export when its <code>export</code> argument is true.</p></li>
</ul>
<p>Also note that due to the <a href="#MGL-PAX:@HOME-SECTION%20MGL-PAX:SECTION" title="Home Section">Home Section</a> logic, especially for
locative types with string names, <a href="dref-manual.html#DREF-EXT:DOCSTRING*%20GENERIC-FUNCTION" title="DREF-EXT:DOCSTRING* GENERIC-FUNCTION"><code>dref-ext:docstring*</code></a> should
probably return a non-<code>nil</code> package.</p>
<p><a id="x-28MGL-PAX-3A-40LOCATIVE-ALIASES-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@LOCATIVE-ALIASES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION" title="Extending `document`">&#8594;</a> <a href="#MGL-PAX:@LOCATIVE-ALIASES%20MGL-PAX:SECTION" title="Locative Aliases">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/extension-api.lisp#L38">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@LOCATIVE-ALIASES%20MGL-PAX:SECTION">10.2 Locative Aliases</a></h3>
<p><a href="dref-manual.html#DREF-EXT:DEFINE-LOCATIVE-ALIAS%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-ALIAS MGL-PAX:MACRO"><code>define-locative-alias</code></a> can be used to help <a href="#MGL-PAX:@NAVIGATING-IN-EMACS%20MGL-PAX:SECTION" title="Navigating Sources in Emacs"><code>M-.</code></a> and <a href="#MGL-PAX:@EXPLICIT-AND-AUTOLINKING%20MGL-PAX:SECTION" title="Explicit and Autolinking">autolinking</a>
disambiguate references based on the context of a <a href="#MGL-PAX:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> as described
on <a href="#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">Parsing</a> and also in <a href="#MGL-PAX:@SPECIFIED-LOCATIVE%20MGL-PAX:SECTION" title="Specified Locative">Specified Locative</a>.</p>
<p>The following example shows how to make docstrings read
more naturally by defining an alias.</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> my-string <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code"></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defgeneric</span></i> my-string <span class="paren2">(<span class="code">obj</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:documentation</span> <span class="string">"Convert OBJ to MY-STRING."</span></span>)</span></span>)</span>

<span class="comment">;;; This version of FOO has a harder to read docstring because
</span><span class="comment">;;; it needs to disambiguate the MY-STRING reference.
</span><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren2">(<span class="code">x</span>)</span>
  <span class="string">"FOO takes and argument X, a [MY-STRING][class] object."</span></span>)</span>

<span class="comment">;;; Define OBJECT as an alias for the CLASS locative.
</span><span class="paren1">(<span class="code"><i><span class="symbol">define-locative-alias</span></i> object class</span>)</span>

<span class="comment">;;; Note how no explicit link is needed anymore.
</span><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> foo <span class="paren2">(<span class="code">x</span>)</span>
  <span class="string">"FOO takes an argument X, a MY-CLASS object."</span></span>)</span></span></code></pre>
<p>Similary, defining the indefinite articles as aliases of the <a href="dref-manual.html#CLASS%20MGL-PAX:LOCATIVE" title="CLASS MGL-PAX:LOCATIVE"><code>class</code></a>
locative can reduce the need for explicit linking.</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-locative-alias</span></i> a class</span>)</span>
<span class="paren1">(<span class="code"><i><span class="symbol">define-locative-alias</span></i> an class</span>)</span></span></code></pre>
<p>Since these are unlikely to be universally helpful, make sure not to
export the symbols <code>a</code> and <code>an</code>.</p>
<p><a id="x-28MGL-PAX-3A-40EXTENDING-DOCUMENT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@LOCATIVE-ALIASES%20MGL-PAX:SECTION" title="Locative Aliases">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION" title="Sections">&#8594;</a> <a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION" title="Extending `document`">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/document-early.lisp#L87">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION">10.3 Extending <code>document</code></a></h3>
<p>For all definitions that it encounters, <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> calls
<a href="#MGL-PAX:DOCUMENT-OBJECT*%20GENERIC-FUNCTION" title="MGL-PAX:DOCUMENT-OBJECT* GENERIC-FUNCTION"><code>document-object*</code></a> to generate documentation. The following utilities
are for writing new <code>document-object*</code> methods, which emit markdown.</p>
<p><a id="x-28MGL-PAX-3A-2AFORMAT-2A-20VARIABLE-29"></a>
<a id="MGL-PAX:*FORMAT*%20VARIABLE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/document-early.lisp#L99">[variable]</a></span> <span class="reference-object"><a href="#MGL-PAX:*FORMAT*%20VARIABLE" >*format*</a></span></span></span></p>

<p>Bound by <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> to its <code>format</code> argument, this allows markdown
output to depend on the output format.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AWITH-HEADING-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:WITH-HEADING%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/document-early.lisp#L105">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:WITH-HEADING%20MGL-PAX:MACRO" >with-heading</a></span></span> <span class="locative-args">(stream object title &amp;key link-title-to) &amp;body body</span></span></p>

<p>Write a markdown heading with <code>title</code> to <code>stream</code>. Nested <code>with-heading</code>s
produce nested headings. If <a href="#MGL-PAX:*DOCUMENT-LINK-SECTIONS*%20VARIABLE" title="MGL-PAX:*DOCUMENT-LINK-SECTIONS* VARIABLE"><code>*document-link-sections*</code></a>, generate
anchors based on the <a href="dref-manual.html#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION">definition of</a> <code>object</code>. <code>link-title-to</code>
behaves like the <code>link-title-to</code> argument of <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ADOCUMENTING-REFERENCE-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:DOCUMENTING-REFERENCE%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/document-early.lisp#L117">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENTING-REFERENCE%20MGL-PAX:MACRO" >documenting-reference</a></span></span> <span class="locative-args">(stream &amp;key reference name package readtable arglist) &amp;body body</span></span></p>

<p>Write <code>reference</code> to <code>stream</code> as described in
<a href="#MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES*%20VARIABLE" title="MGL-PAX:*DOCUMENT-MARK-UP-SIGNATURES* VARIABLE"><code>*document-mark-up-signatures*</code></a>, and establish <code>reference</code> as a <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">local
reference</a> for the processing of <code>body</code>.</p>

<ul>
<li><p><code>reference</code> defaults to the reference being <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a>ed.</p></li>
<li><p><code>name</code> defaults to <code>(xref-name reference)</code> and is printed after the
  <a href="dref-manual.html#DREF-EXT:LOCATIVE-TYPE%20FUNCTION" title="DREF-EXT:LOCATIVE-TYPE FUNCTION"><code>locative-type</code></a>.</p></li>
<li><p><a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pkg.htm" title="*PACKAGE* (MGL-PAX:CLHS VARIABLE)"><code>*package*</code></a> and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_rdtabl.htm" title="*READTABLE* (MGL-PAX:CLHS VARIABLE)"><code>*readtable*</code></a> are bound to <code>package</code> and <code>readtable</code> for
  the duration of printing the <code>arglist</code> and the processing of <code>body</code>.
  If either is <code>nil</code>, then a default value is computed as described in
  <a href="#MGL-PAX:@PACKAGE-AND-READTABLE%20MGL-PAX:SECTION" title="Package and Readtable">Package and Readtable</a>.</p></li>
<li><p>If <code>arglist</code> is <code>nil</code>, then it is not printed.</p></li>
<li><p>If <code>arglist</code> is a list, then it is must be a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_l.htm#lambda_list" title="&quot;lambda list&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">lambda list</a> and
  is printed without the outermost parens and with the package names
  removed from the argument names.</p></li>
<li><p>If <code>arglist</code> is a string, then it must be valid markdown.</p></li>
<li><p>It is not allowed to have <a href="#MGL-PAX:WITH-HEADING%20MGL-PAX:MACRO" title="MGL-PAX:WITH-HEADING MGL-PAX:MACRO"><code>with-heading</code></a> within the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#dynamic_extent" title="&quot;dynamic extent&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">dynamic
  extent</a> of <code>body</code>.</p></li>
</ul></li>
</ul>
<p><a id="x-28MGL-PAX-3AWITH-DISLOCATED-NAMES-20MGL-PAX-3AMACRO-29"></a>
<a id="MGL-PAX:WITH-DISLOCATED-NAMES%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/document-early.lisp#L199">[macro]</a></span> <span class="reference-object"><a href="#MGL-PAX:WITH-DISLOCATED-NAMES%20MGL-PAX:MACRO" >with-dislocated-names</a></span></span> <span class="locative-args">names &amp;body body</span></span></p>

<p>For each name in <code>names</code>, establish a <a href="#MGL-PAX:@LOCAL-REFERENCES%20MGL-PAX:SECTION" title="Local References">local
reference</a> with the <a href="#MGL-PAX:DISLOCATED%20MGL-PAX:LOCATIVE" title="MGL-PAX:DISLOCATED MGL-PAX:LOCATIVE"><code>dislocated</code></a> locative, which
<a href="#MGL-PAX:@PREVENTING-AUTOLINKING%20MGL-PAX:SECTION" title="Preventing Autolinking">prevents autolinking</a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ADOCUMENT-DOCSTRING-20FUNCTION-29"></a>
<a id="MGL-PAX:DOCUMENT-DOCSTRING%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L1298">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCUMENT-DOCSTRING%20FUNCTION" >document-docstring</a></span></span> <span class="locative-args">docstring stream &amp;key (indentation &quot;    &quot;) exclude-first-line-p (paragraphp t)</span></span></p>

<p>Write <code>docstring</code> to <code>stream</code>, <a href="#MGL-PAX:@MARKDOWN-IN-DOCSTRINGS%20MGL-PAX:SECTION" title="Markdown in Docstrings">sanitizing the markdown</a> from it, performing <a href="#MGL-PAX:@CODIFICATION%20MGL-PAX:SECTION" title="Codification">Codification</a> and
<a href="#MGL-PAX:@LINKING-TO-CODE%20MGL-PAX:SECTION" title="Linking to Code">Linking to Code</a>, finally prefixing each line with <code>indentation</code>. The
prefix is not added to the first line if <code>exclude-first-line-p</code>. If
<code>paragraphp</code>, then add a newline before and after the output.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AESCAPE-MARKDOWN-20FUNCTION-29"></a>
<a id="MGL-PAX:ESCAPE-MARKDOWN%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/markdown.lisp#L77">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:ESCAPE-MARKDOWN%20FUNCTION" >escape-markdown</a></span></span> <span class="locative-args">string &amp;key (escape-inline t) (escape-html t) (escape-block t)</span></span></p>

<p>Backslash escape markdown constructs in <code>string</code>.</p>

<ul>
<li><p>If <code>escape-inline</code>, then escape <code>*_`[]</code> characters.</p></li>
<li><p>If <code>escape-html</code>, then escape <code>&lt;&amp;</code> characters.</p></li>
<li><p>If <code>escape-block</code>, then escape whatever is necessary to avoid
  starting a new markdown block (e.g. a paragraph, heading, etc).</p></li>
</ul></li>
</ul>
<p><a id="x-28MGL-PAX-3APRIN1-TO-MARKDOWN-20FUNCTION-29"></a>
<a id="MGL-PAX:PRIN1-TO-MARKDOWN%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/document/document.lisp#L2955">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:PRIN1-TO-MARKDOWN%20FUNCTION" >prin1-to-markdown</a></span></span> <span class="locative-args">object &amp;key (escape-inline t) (escape-html t) (escape-block t)</span></span></p>

<p>Like <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_to_.htm" title="PRIN1-TO-STRING (MGL-PAX:CLHS FUNCTION)"><code>prin1-to-string</code></a>, but bind <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pr_cas.htm" title="*PRINT-CASE* (MGL-PAX:CLHS VARIABLE)"><code>*print-case*</code></a> depending on
<a href="#MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE*%20VARIABLE" title="MGL-PAX:*DOCUMENT-DOWNCASE-UPPERCASE-CODE* VARIABLE"><code>*document-downcase-uppercase-code*</code></a> and <a href="#MGL-PAX:*FORMAT*%20VARIABLE" title="MGL-PAX:*FORMAT* VARIABLE"><code>*format*</code></a>, and
<a href="#MGL-PAX:ESCAPE-MARKDOWN%20FUNCTION" title="MGL-PAX:ESCAPE-MARKDOWN FUNCTION"><code>escape-markdown</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40SECTIONS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@SECTIONS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@EXTENDING-DOCUMENT%20MGL-PAX:SECTION" title="Extending `document`">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION" title="Glossary Terms">&#8594;</a> <a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION" title="Sections">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/extension-api.lisp#L79">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION">10.4 Sections</a></h3>
<p><a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a> objects rarely need to be dissected since
<a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> and <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> cover most needs. However, it is plausible
that one wants to subclass them and maybe redefine how they are
presented.</p>
<p><a id="x-28MGL-PAX-3ASECTION-20CLASS-29"></a>
<a id="MGL-PAX:SECTION%20CLASS"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L87">[class]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION%20CLASS" >section</a></span></span></span></p>

<p><a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> stores its <code>name</code>, <code>title</code>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE (MGL-PAX:CLHS CLASS)"><code>package</code></a>,
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_rdtabl.htm" title="READTABLE (MGL-PAX:CLHS CLASS)"><code>readtable</code></a> and <code>entries</code> arguments in <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a>
objects.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ASECTION-NAME-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-NAME%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L88">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-NAME%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-name</a></span></span> <span class="locative-args">section (:name)</span></span></p>

<p>The name of the global variable whose value is
this <a href="#MGL-PAX:SECTION%20CLASS" title="MGL-PAX:SECTION CLASS"><code>section</code></a> object.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ASECTION-PACKAGE-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-PACKAGE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L92">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-PACKAGE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-package</a></span></span> <span class="locative-args">section (:package)</span></span></p>

<p><a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pkg.htm" title="*PACKAGE* (MGL-PAX:CLHS VARIABLE)"><code>*package*</code></a> will be bound to this package when
generating documentation for this section.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ASECTION-READTABLE-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-READTABLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L96">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-READTABLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-readtable</a></span></span> <span class="locative-args">section (:readtable)</span></span></p>

<p><a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_rdtabl.htm" title="*READTABLE* (MGL-PAX:CLHS VARIABLE)"><code>*readtable*</code></a> will be bound to this when generating
documentation for this section.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ASECTION-TITLE-20-28MGL-PAX-3AREADER-20MGL-PAX-3ASECTION-29-29"></a>
<a id="MGL-PAX:SECTION-TITLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L100">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-TITLE%20%28MGL-PAX:READER%20MGL-PAX:SECTION%29" >section-title</a></span></span> <span class="locative-args">section (:title)</span></span></p>

<p>A markdown string or <code>nil</code>. Used in generated
documentation.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ASECTION-LINK-TITLE-TO-20FUNCTION-29"></a>
<a id="MGL-PAX:SECTION-LINK-TITLE-TO%20FUNCTION"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/pax.lisp#L35">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-LINK-TITLE-TO%20FUNCTION" >section-link-title-to</a></span></span> <span class="locative-args">section</span></span></li>
</ul>
<p><a id="x-28MGL-PAX-3ASECTION-ENTRIES-20FUNCTION-29"></a>
<a id="MGL-PAX:SECTION-ENTRIES%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/pax.lisp#L19">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:SECTION-ENTRIES%20FUNCTION" >section-entries</a></span></span> <span class="locative-args">section</span></span></p>

<p>A list of markdown docstrings and <a href="dref-manual.html#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>s in the order they
occurred in <a href="#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3A-40GLOSSARY-TERMS-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#MGL-PAX:@SECTIONS%20MGL-PAX:SECTION" title="Sections">&#8592;</a> <a href="#MGL-PAX:@EXTENSION-API%20MGL-PAX:SECTION" title="Writing Extensions">&#8593;</a> <a href="#MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION" title="Glossary Terms">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/base/extension-api.lisp#L93">&#955;</a></span></span></p>
<h3><a href="#MGL-PAX:@GLOSSARY-TERMS%20MGL-PAX:SECTION">10.5 Glossary Terms</a></h3>
<p><a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a> objects rarely need to be dissected since
<a href="#MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-GLOSSARY-TERM MGL-PAX:MACRO"><code>define-glossary-term</code></a> and <a href="#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>document</code></a> cover most needs. However, it is
plausible that one wants to subclass them and maybe redefine how
they are presented.</p>
<p><a id="x-28MGL-PAX-3AGLOSSARY-TERM-20CLASS-29"></a>
<a id="MGL-PAX:GLOSSARY-TERM%20CLASS"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L233">[class]</a></span> <span class="reference-object"><a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" >glossary-term</a></span></span></span></p>

<p>See <a href="#MGL-PAX:DEFINE-GLOSSARY-TERM%20MGL-PAX:MACRO" title="MGL-PAX:DEFINE-GLOSSARY-TERM MGL-PAX:MACRO"><code>define-glossary-term</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AGLOSSARY-TERM-NAME-20-28MGL-PAX-3AREADER-20MGL-PAX-3AGLOSSARY-TERM-29-29"></a>
<a id="MGL-PAX:GLOSSARY-TERM-NAME%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L234">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:GLOSSARY-TERM-NAME%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29" >glossary-term-name</a></span></span> <span class="locative-args">glossary-term (:name)</span></span></p>

<p>The name of the global variable whose value is
this <a href="#MGL-PAX:GLOSSARY-TERM%20CLASS" title="MGL-PAX:GLOSSARY-TERM CLASS"><code>glossary-term</code></a> object.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AGLOSSARY-TERM-TITLE-20-28MGL-PAX-3AREADER-20MGL-PAX-3AGLOSSARY-TERM-29-29"></a>
<a id="MGL-PAX:GLOSSARY-TERM-TITLE%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L238">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:GLOSSARY-TERM-TITLE%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29" >glossary-term-title</a></span></span> <span class="locative-args">glossary-term (:title)</span></span></p>

<p>A markdown string or <code>nil</code>. Used in generated
documentation (see <a href="#MGL-PAX:@OUTPUT-DETAILS%20MGL-PAX:SECTION" title="Output Details">Output Details</a>).</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AGLOSSARY-TERM-URL-20-28MGL-PAX-3AREADER-20MGL-PAX-3AGLOSSARY-TERM-29-29"></a>
<a id="MGL-PAX:GLOSSARY-TERM-URL%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/f6fc39c620fd4fa9d48f9624ead17808f7eb5f12/src/bootstrap/basics.lisp#L242">[reader]</a></span> <span class="reference-object"><a href="#MGL-PAX:GLOSSARY-TERM-URL%20%28MGL-PAX:READER%20MGL-PAX:GLOSSARY-TERM%29" >glossary-term-url</a></span></span> <span class="locative-args">glossary-term (:url)</span></span></p>

<p>A string or <code>nil</code>.</p></li>
</ul>
  </div>
</div>
<script>$('#page-toc').toc({'selectors': 'h1,h2,h3,h4'});</script>
</body>
</html>
