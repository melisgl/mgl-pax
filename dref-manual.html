<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<title>DRef Manual
</title>
<link type='text/css' href='style.css' rel='stylesheet'>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width">
   <script src="jquery.min.js"></script>
<script src="toc.min.js"></script>
<script type="text/x-mathjax-config">
     MathJax.Hub.Config({
       tex2jax: {
         inlineMath: [['$','$']],
         processEscapes: true
       }
     });
   </script>
   <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
   </script>
   
</head>
<body>
<div id="content-container">
<div id="toc">
<div id="page-toc">
</div>
<div id="toc-footer"><ul><li><a href="https://github.com/melisgl/mgl-pax">[generated by MGL-PAX]</a></li></ul></div>
</div>
<div id="content">
<p><a id="x-28DREF-3A-40DREF-MANUAL-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@DREF-MANUAL%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">&#8594;</a> <a href="dref-manual.html" title="DRef Manual">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L5">&#955;</a></span></span></p>
<h1><a href="dref-manual.html">DRef Manual</a></h1>
<h2>Table of Contents</h2>
<ul>
<li><a href="#DREF:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">1 Introduction</a></li>
<li><a href="#DREF:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">2 Locatives and References</a></li>
<li><a href="#DREF:@LISTING-DEFINITIONS%20MGL-PAX:SECTION" title="Listing Definitions">3 Listing Definitions</a></li>
<li><a href="#DREF:@OPERATIONS%20MGL-PAX:SECTION" title="Operations">4 Operations</a></li>
<li><a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">5 Locative Types</a>

<ul>
<li><a href="#DREF:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Variables">5.1 Locatives for Variables</a></li>
<li><a href="#DREF:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Macros">5.2 Locatives for Macros</a></li>
<li><a href="#DREF:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Functions">5.3 Locatives for Functions</a></li>
<li><a href="#DREF:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Types and Declarations">5.4 Locatives for Types and Declarations</a></li>
<li><a href="#DREF:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for the Condition System">5.5 Locatives for the Condition System</a></li>
<li><a href="#DREF:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Packages and Readtables">5.6 Locatives for Packages and Readtables</a></li>
<li><a href="#DREF:@DREF-LOCATIVES%20MGL-PAX:SECTION" title="DRef Locatives">5.7 DRef Locatives</a></li>
</ul></li>
<li><a href="#DREF:@GLOSSARY%20MGL-PAX:SECTION" title="Glossary">6 Glossary</a></li>
<li><a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">7 Extending DRef</a>

<ul>
<li><a href="#DREF-EXT:@REFERENCES%20MGL-PAX:SECTION" title="References">7.1 References</a></li>
<li><a href="#DREF-EXT:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">7.2 Adding New Locatives</a></li>
<li><a href="#DREF-EXT:@SYMBOL-LOCATIVES%20MGL-PAX:SECTION" title="Symbol Locatives">7.3 Symbol Locatives</a></li>
<li><a href="#DREF-EXT:@DREF-SUBCLASSES%20MGL-PAX:SECTION" title="`dref` Subclasses">7.4 <code>dref</code> Subclasses</a></li>
<li><a href="#DREF-EXT:@SOURCE-LOCATIONS%20MGL-PAX:SECTION" title="Source Locations">7.5 Source Locations</a></li>
</ul></li>
</ul>
<h6>[in package DREF]</h6>
<p><a id="x-28DREF-3A-40INTRODUCTION-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@INTRODUCTION%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="dref-manual.html" title="DRef Manual">&#8592;</a> <a href="dref-manual.html" title="DRef Manual">&#8593;</a> <a href="#DREF:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">&#8594;</a> <a href="#DREF:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L14">&#955;</a></span></span></p>
<h2><a href="#DREF:@INTRODUCTION%20MGL-PAX:SECTION">1 Introduction</a></h2>
<p><em>What if definitions were first-class objects?</em></p>
<p>Some <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#defining_form" title="&quot;defining form&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">defining forms</a> do not create first-class
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_o.htm#object" title="&quot;object&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">objects</a>. For example, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defun.htm" title="DEFUN (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defun</code></a> creates
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION (MGL-PAX:CLHS CLASS)"><code>function</code></a> objects, but <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpar.htm" title="DEFVAR (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defvar</code></a> does not create variable
objects as no such thing exists. The main purpose of this library is
to fill this gap with the introduction of <a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a> objects:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code">xref '<span class="special">*my-var*</span> 'variable</span>)</span>
==&gt; #&lt;XREF *MY-VAR* VARIABLE&gt;</span></code></pre>
<p><code>xref</code>s just package up a <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> (<code>*my-var*</code>) and a
<a href="#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="locative">locative</a> (<a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a>). They need not denote existing definitions
until we actually want to use them:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code">docstring <span class="paren2">(<span class="code">xref '<span class="special">*my-var*</span> 'variable</span>)</span></span>)</span>
.. debugger invoked on LOCATE-ERROR:
..   Could not locate *MY-VAR* VARIABLE.</span></code></pre>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defvar</span></i> <span class="special">*my-var*</span> nil
  <span class="string">"This is my var."</span></span>)</span>

<span class="paren1">(<span class="code">docstring <span class="paren2">(<span class="code">xref '<span class="special">*my-var*</span> 'variable</span>)</span></span>)</span>
=&gt; "This is my var."</span></code></pre>
<p>Behind the scenes, the <a href="#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a> function <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>s the definition
corresponding to its <code>xref</code> argument, turning it into a <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code">locate <span class="paren2">(<span class="code">xref '<span class="special">*my-var*</span> 'variable</span>)</span></span>)</span>
==&gt; #&lt;DREF *MY-VAR* VARIABLE&gt;</span></code></pre>
<p>Within DRef, the <a href="#DREF-EXT:@DREF-SUBCLASSES%20MGL-PAX:SECTION" title="`dref` Subclasses"><code>dref</code> Subclasses</a> form the basis of
extending <code>docstring</code>, <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> and <a href="#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a>. Outside DRef,
<a href="pax-manual.html" title="PAX Manual"><code>pax</code></a> makes <a href="pax-manual.html#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>pax:document</code></a> extensible through
<a href="pax-manual.html#MGL-PAX:DOCUMENT-OBJECT*%20GENERIC-FUNCTION" title="MGL-PAX:DOCUMENT-OBJECT* GENERIC-FUNCTION"><code>pax:document-object*</code></a>, which has methods specialized on <code>dref</code>s.</p>
<p>Finally, existing definitions can be queried with <a href="#DREF:DEFINITIONS%20FUNCTION" title="DREF:DEFINITIONS FUNCTION"><code>definitions</code></a> and
<a href="#DREF:DREF-APROPOS%20FUNCTION" title="DREF:DREF-APROPOS FUNCTION"><code>dref-apropos</code></a>:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">definitions</span></i> 'dref-ext:locate*</span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF LOCATE* GENERIC-FUNCTION&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">GLOSSARY-TERM</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">SECTION</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">READTABLE</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">PACKAGE</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">ASDF/SYSTEM:SYSTEM</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">CLASS</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">METHOD</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">GENERIC-FUNCTION</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code"><i><span class="symbol">FUNCTION</span></i></span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD <span class="paren3">(<span class="code"><span class="keyword">:AROUND</span></span>)</span> <span class="paren3">(<span class="code">T</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">T</span>)</span></span>)</span>&gt; #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">XREF</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF LOCATE* <span class="paren2">(<span class="code">METHOD NIL <span class="paren3">(<span class="code">DREF</span>)</span></span>)</span>&gt;</span>)</span></span></code></pre>
<pre><code><span class="code"><span class="paren1">(<span class="code">dref-apropos 'locate-error <span class="keyword">:package</span> <span class="keyword">:dref</span> <span class="keyword">:external-only</span> t</span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF LOCATE-ERROR CONDITION&gt; #&lt;DREF LOCATE-ERROR FUNCTION&gt;</span>)</span>

<span class="paren1">(<span class="code">dref-apropos <span class="string">"ate-err"</span> <span class="keyword">:package</span> <span class="keyword">:dref</span> <span class="keyword">:external-only</span> t</span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF LOCATE-ERROR CONDITION&gt; #&lt;DREF LOCATE-ERROR FUNCTION&gt;</span>)</span></span></code></pre>
<p><a id="x-28DREF-3A-40LOCATIVES-AND-REFERENCES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">&#8592;</a> <a href="dref-manual.html" title="DRef Manual">&#8593;</a> <a href="#DREF:@LISTING-DEFINITIONS%20MGL-PAX:SECTION" title="Listing Definitions">&#8594;</a> <a href="#DREF:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L138">&#955;</a></span></span></p>
<h2><a href="#DREF:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION">2 Locatives and References</a></h2>
<p>After the <a href="#DREF:@INTRODUCTION%20MGL-PAX:SECTION" title="Introduction">Introduction</a>, here we get into the details. Of special
interest are:</p>
<ul>
<li><p>The <a href="#DREF:XREF%20FUNCTION" title="DREF:XREF FUNCTION"><code>xref</code></a> function to construct an arbitrary <a href="#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="reference">reference</a> without any
  checking of validity.</p></li>
<li><p><a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a> and <a href="#DREF:DREF%20FUNCTION" title="DREF:DREF FUNCTION"><code>dref</code></a> to construct a syntactically valid
  reference (matching the <code>lambda-list</code> in the locative type's
  <a href="#DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO">definition</a>) that refers to an exisiting
  definition.</p></li>
<li><p><a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a> to find the first-class (non-<a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>) object the
  definition refers to, if any.</p></li>
</ul>
<p><a href="#DREF:@OPERATIONS%20MGL-PAX:SECTION" title="Operations">Operations</a> (<a href="#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a>, <a href="#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a>, <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a>) know how to deal
with references (discussed in the <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">Extending DRef</a>).</p>
<p><a id="x-28DREF-3AXREF-20CLASS-29"></a>
<a id="DREF:XREF%20CLASS"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L165">[class]</a></span> <span class="reference-object"><a href="#DREF:XREF%20CLASS" >xref</a></span></span></span></p>

<p>An <code>xref</code> (cross-reference) may represent some
kind of definition of its <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> in the context given by its
<a href="#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="locative">locative</a>. The definition may not exist and the locative may be
<a href="#DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO">malformed</a>. The subclass <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>
represents definitions that exist.</p></li>
</ul>
<p><a id="x-28DREF-3ADREF-20CLASS-29"></a>
<a id="DREF:DREF%20CLASS"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L188">[class]</a></span> <span class="reference-object"><a href="#DREF:DREF%20CLASS" >dref</a></span></span> <span class="locative-args"><a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS">xref</a></span></span></p>

<p><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s can be thought of as referring to
definitions that actually exist, although changes in the system can
invalidate them (for example, a <code>dref</code> to a function definition can be
invalidated by <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_fmakun.htm" title="FMAKUNBOUND (MGL-PAX:CLHS FUNCTION)"><code>fmakunbound</code></a>).</p>

<p><code>dref</code>s must be created with <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>, and their purpose is to allow
easy specialization of other generic functions (see
<a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">Extending DRef</a>) and to confine locative validation to
<code>locate</code>.</p></li>
</ul>
<p><a id="x-28DREF-3AXREF-20FUNCTION-29"></a>
<a id="DREF:XREF%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L260">[function]</a></span> <span class="reference-object"><a href="#DREF:XREF%20FUNCTION" >xref</a></span></span> <span class="locative-args">name locative</span></span></p>

<p>A shorthand for <code>(make-instance 'xref :name name :locative locative)</code>.
It does no error checking: the <a href="#DREF-EXT:LOCATIVE-TYPE%20FUNCTION" title="DREF-EXT:LOCATIVE-TYPE FUNCTION"><code>locative-type</code></a> of <code>locative-type</code> need
not be defined, and the <a href="#DREF-EXT:LOCATIVE-ARGS%20FUNCTION" title="DREF-EXT:LOCATIVE-ARGS FUNCTION"><code>locative-args</code></a> need not be valid. Use <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>
or the <a href="#DREF:DREF%20FUNCTION" title="DREF:DREF FUNCTION"><code>dref</code></a> function to create <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> objects.</p></li>
</ul>
<p><a id="x-28DREF-3AXREF-3D-20FUNCTION-29"></a>
<a id="DREF:XREF%3D%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L268">[function]</a></span> <span class="reference-object"><a href="#DREF:XREF%3D%20FUNCTION" >xref=</a></span></span> <span class="locative-args">xref1 xref2</span></span></p>

<p>See if <code>xref1</code> and <code>xref2</code> have the same <a href="#DREF-EXT:XREF-NAME%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-NAME (MGL-PAX:READER DREF:XREF)"><code>xref-name</code></a> and <a href="#DREF-EXT:XREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-LOCATIVE (MGL-PAX:READER DREF:XREF)"><code>xref-locative</code></a>
under <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_equal.htm" title="EQUAL (MGL-PAX:CLHS FUNCTION)"><code>equal</code></a>. Comparing like this makes most sense for
<a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s. However, two <a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>s different under <code>xref=</code>
may denote the same <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s.</p></li>
</ul>
<p><a id="x-28DREF-3ALOCATE-20FUNCTION-29"></a>
<a id="DREF:LOCATE%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L350">[function]</a></span> <span class="reference-object"><a href="#DREF:LOCATE%20FUNCTION" >locate</a></span></span> <span class="locative-args">object &amp;optional (errorp t)</span></span></p>

<p>Return a <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> representing the definition given by the arguments.
In the same <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#dynamic_environment" title="&quot;dynamic environment&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">dynamic environment</a>, two <code>dref</code>s denote the same
thing if and only if they are <a href="#DREF:XREF%3D%20FUNCTION" title="DREF:XREF= FUNCTION"><code>xref=</code></a>.</p>

<p><code>object</code> must be a supported first-class object, a <code>dref</code>, or an
<a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">locate #'print</span>)</span>
==&gt; #&lt;DREF PRINT FUNCTION&gt;</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">locate <span class="paren2">(<span class="code">locate #'print</span>)</span></span>)</span>
==&gt; #&lt;DREF PRINT FUNCTION&gt;</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">locate <span class="paren2">(<span class="code">xref 'print '<i><span class="symbol">function</span></i></span>)</span></span>)</span>
==&gt; #&lt;DREF PRINT FUNCTION&gt;</span></code></pre>

<p><code>locate-error</code>(<a href="#DREF-EXT:LOCATE-ERROR%20CONDITION" title="DREF-EXT:LOCATE-ERROR CONDITION"><code>0</code></a> <a href="#DREF-EXT:LOCATE-ERROR%20FUNCTION" title="DREF-EXT:LOCATE-ERROR FUNCTION"><code>1</code></a>) is signalled if <code>object</code> is an <code>xref</code> with malformed
<a href="#DREF-EXT:LOCATIVE-ARGS%20FUNCTION" title="DREF-EXT:LOCATIVE-ARGS FUNCTION"><code>locative-args</code></a>, or if no corresponding definition is found. If <code>errorp</code>
is <code>nil</code>, then <code>nil</code> and the <a href="#DREF-EXT:LOCATE-ERROR%20CONDITION" title="DREF-EXT:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition are returned
instead.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">locate <span class="paren2">(<span class="code">xref 'no-such-function '<i><span class="symbol">function</span></i></span>)</span></span>)</span>
.. debugger invoked on LOCATE-ERROR:
..   Could not locate NO-SUCH-FUNCTION FUNCTION.
..   NO-SUCH-FUNCTION is not a symbol naming a function.</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">locate <span class="paren2">(<span class="code">xref 'print '<span class="paren3">(<span class="code"><i><span class="symbol">function</span></i> xxx</span>)</span></span>)</span></span>)</span>
.. debugger invoked on LOCATE-ERROR:
..   Could not locate PRINT #'XXX.
..   Bad arguments <span class="paren1">(<span class="code">XXX</span>)</span> for locative FUNCTION with lambda list NIL.</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">locate <span class="string">"xxx"</span></span>)</span>
.. debugger invoked on LOCATE-ERROR:
..   Could not locate "xxx".</span></code></pre>

<p>Use the low-level <code>xref</code> to construct an <code>xref</code> without error
checking.</p>

<p>Can be extended via <a href="#DREF-EXT:LOCATE*%20GENERIC-FUNCTION" title="DREF-EXT:LOCATE* GENERIC-FUNCTION"><code>locate*</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3ADREF-20FUNCTION-29"></a>
<a id="DREF:DREF%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L408">[function]</a></span> <span class="reference-object"><a href="#DREF:DREF%20FUNCTION" >dref</a></span></span> <span class="locative-args">name locative &amp;optional (errorp t)</span></span></p>

<p>Shorthand for <code>(locate (xref name locative) errorp)</code>.</p></li>
</ul>
<p><a id="x-28DREF-3ARESOLVE-20FUNCTION-29"></a>
<a id="DREF:RESOLVE%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L426">[function]</a></span> <span class="reference-object"><a href="#DREF:RESOLVE%20FUNCTION" >resolve</a></span></span> <span class="locative-args">object &amp;optional (errorp t)</span></span></p>

<p>If <code>object</code> is an <a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>, then return the first-class object
associated with its definition if any. Return <code>object</code> if it's not an
<code>xref</code>. Thus, the value returned is never an <code>xref</code>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">resolve <span class="paren2">(<span class="code">dref 'print '<i><span class="symbol">function</span></i></span>)</span></span>)</span>
==&gt; #&lt;FUNCTION PRINT&gt;</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">resolve #'print</span>)</span>
==&gt; #&lt;FUNCTION PRINT&gt;</span></code></pre>

<p>If <code>object</code> is an <code>xref</code>, and the definition for it cannot be <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>d,
then signal a <a href="#DREF-EXT:LOCATE-ERROR%20CONDITION" title="DREF-EXT:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">resolve <span class="paren2">(<span class="code">xref 'undefined 'variable</span>)</span></span>)</span>
.. debugger invoked on LOCATE-ERROR:
..   Could not locate UNDEFINED VARIABLE.</span></code></pre>

<p>If there is a definition, but there is no first-class object
corresponding to it, then signal a <a href="#DREF:RESOLVE-ERROR%20CONDITION" title="DREF:RESOLVE-ERROR CONDITION"><code>resolve-error</code></a> condition or return
<code>nil</code> depending on <code>errorp</code>:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">resolve <span class="paren2">(<span class="code">dref '<span class="special">*print-length*</span> 'variable</span>)</span></span>)</span>
.. debugger invoked on RESOLVE-ERROR:
..   Could not resolve *PRINT-LENGTH* VARIABLE.</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">resolve <span class="paren2">(<span class="code">dref '<span class="special">*print-length*</span> 'variable</span>)</span> nil</span>)</span>
=&gt; NIL</span></code></pre>

<p><code>resolve</code> is a partial inverse of <code>locate</code>: if a <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> is
<code>resolve</code>able, then <code>locate</code>ing the object it resolves to recovers the
<code>dref</code> equivalent to the original (<a href="#DREF:XREF%3D%20FUNCTION" title="DREF:XREF= FUNCTION"><code>xref=</code></a> and of the same type but not
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_eq.htm" title="EQ (MGL-PAX:CLHS FUNCTION)"><code>eq</code></a>).</p>

<p>Can be extended via <a href="#DREF-EXT:RESOLVE*%20GENERIC-FUNCTION" title="DREF-EXT:RESOLVE* GENERIC-FUNCTION"><code>resolve*</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ALOCATE-ERROR-20CONDITION-29"></a>
<a id="DREF-EXT:LOCATE-ERROR%20CONDITION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L321">[condition]</a></span> <span class="reference-object"><a href="#DREF-EXT:LOCATE-ERROR%20CONDITION" >locate-error</a></span></span> <span class="locative-args"><a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_error.htm" title="ERROR (MGL-PAX:CLHS CONDITION)">error</a></span></span></p>

<p>Signalled by <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a> when the definition cannot be
found, and <code>errorp</code> is true.</p></li>
</ul>
<p><a id="x-28DREF-3ARESOLVE-ERROR-20CONDITION-29"></a>
<a id="DREF:RESOLVE-ERROR%20CONDITION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L412">[condition]</a></span> <span class="reference-object"><a href="#DREF:RESOLVE-ERROR%20CONDITION" >resolve-error</a></span></span> <span class="locative-args"><a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_error.htm" title="ERROR (MGL-PAX:CLHS CONDITION)">error</a></span></span></p>

<p>Signalled by <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a> when the object defined cannot
be returned, and <code>errorp</code> is true.</p></li>
</ul>
<p><a id="x-28DREF-3A-40LISTING-DEFINITIONS-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@LISTING-DEFINITIONS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@LOCATIVES-AND-REFERENCES%20MGL-PAX:SECTION" title="Locatives and References">&#8592;</a> <a href="dref-manual.html" title="DRef Manual">&#8593;</a> <a href="#DREF:@OPERATIONS%20MGL-PAX:SECTION" title="Operations">&#8594;</a> <a href="#DREF:@LISTING-DEFINITIONS%20MGL-PAX:SECTION" title="Listing Definitions">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L481">&#955;</a></span></span></p>
<h2><a href="#DREF:@LISTING-DEFINITIONS%20MGL-PAX:SECTION">3 Listing Definitions</a></h2>
<p><a id="x-28DREF-3ADEFINITIONS-20FUNCTION-29"></a>
<a id="DREF:DEFINITIONS%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/late.lisp#L5">[function]</a></span> <span class="reference-object"><a href="#DREF:DEFINITIONS%20FUNCTION" >definitions</a></span></span> <span class="locative-args">name &amp;key (locative-types (lisp-locative-types))</span></span></p>

<p>Return all definitions of <code>name</code> that match <code>locative-types</code>
as a list of <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s.</p>

<p>The <a href="#DREF-EXT:DREF-NAME%20%28MGL-PAX:READER%20DREF:DREF%29" title="DREF-EXT:DREF-NAME (MGL-PAX:READER DREF:DREF)"><code>dref-name</code></a>s may not be the same as <code>name</code>, for example, when <code>name</code>
is a package nickname:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">definitions</span></i> 'pax</span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF <span class="string">"MGL-PAX"</span> PACKAGE&gt;</span>)</span></span></code></pre>

<p>Can be extended via <a href="#DREF:MAP-DEFINITIONS%20GENERIC-FUNCTION" title="DREF:MAP-DEFINITIONS GENERIC-FUNCTION"><code>map-definitions</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3ADREF-APROPOS-20FUNCTION-29"></a>
<a id="DREF:DREF-APROPOS%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/late.lisp#L30">[function]</a></span> <span class="reference-object"><a href="#DREF:DREF-APROPOS%20FUNCTION" >dref-apropos</a></span></span> <span class="locative-args">name &amp;key package external-only case-sensitive (locative-types '(:lisp))</span></span></p>

<p>Return a list of <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s corresponding to existing
definitions that match the various arguments. First, <code>(dref-apropos
nil :locative-types nil)</code> lists all definitions in the system.
Arguments with non-<code>nil</code> values filter the list of definitions.</p>

<p>Roughly speaking, when <code>name</code> or <code>package</code> is a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL (MGL-PAX:CLHS CLASS)"><code>symbol</code></a>, they must match
the whole <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> of the definition:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref-apropos 'method <span class="keyword">:package</span> <span class="keyword">:dref</span> <span class="keyword">:external-only</span> t</span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF METHOD CLASS&gt; #&lt;DREF METHOD LOCATIVE&gt;</span>)</span></span></code></pre>

<p>On the other hand, when <code>name</code> or <code>package</code> is a <code>string</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_string.htm" title="STRING (MGL-PAX:CLHS CLASS)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_string.htm" title="STRING (MGL-PAX:CLHS FUNCTION)"><code>1</code></a>), they are
matched as substrings:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref-apropos <span class="string">"method"</span> <span class="keyword">:package</span> <span class="keyword">:dref</span> <span class="keyword">:external-only</span> t</span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF METHOD CLASS&gt; #&lt;DREF METHOD LOCATIVE&gt;
--&gt;  #&lt;DREF METHOD-COMBINATION CLASS&gt; #&lt;DREF METHOD-COMBINATION LOCATIVE&gt;</span>)</span></span></code></pre>

<p>The list of <code>locative-types</code>, if non-<code>nil</code>, filters out definitions
whose locative types are not listed:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref-apropos <span class="string">"method"</span> <span class="keyword">:package</span> <span class="keyword">:dref</span> <span class="keyword">:external-only</span> t
              <span class="keyword">:locative-types</span> '<span class="paren2">(<span class="code">class</span>)</span></span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF METHOD CLASS&gt; #&lt;DREF METHOD-COMBINATION CLASS&gt;</span>)</span></span></code></pre>

<p>In the list, the special keywords <code>:all</code>, <code>:lisp</code>, <code>:pseudo</code> match all
<code>locative-types</code>, <a href="#DREF:LISP-LOCATIVE-TYPES%20FUNCTION" title="DREF:LISP-LOCATIVE-TYPES FUNCTION"><code>lisp-locative-types</code></a> and <a href="#DREF:PSEUDO-LOCATIVE-TYPES%20FUNCTION" title="DREF:PSEUDO-LOCATIVE-TYPES FUNCTION"><code>pseudo-locative-types</code></a>,
respectively.</p>

<p>When <code>package</code> is <code>:none</code>, only non-symbol <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>s are matched:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref-apropos <span class="string">"dref"</span> <span class="keyword">:package</span> <span class="keyword">:none</span></span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF <span class="string">"DREF"</span> PACKAGE&gt; #&lt;DREF <span class="string">"DREF-EXT"</span> PACKAGE&gt;
--&gt;  #&lt;DREF <span class="string">"DREF-TEST"</span> PACKAGE&gt; #&lt;DREF <span class="string">"dref"</span> ASDF/SYSTEM:SYSTEM&gt;
--&gt;  #&lt;DREF <span class="string">"dref/full"</span> ASDF/SYSTEM:SYSTEM&gt;
--&gt;  #&lt;DREF <span class="string">"dref/test"</span> ASDF/SYSTEM:SYSTEM&gt;
--&gt;  #&lt;DREF <span class="string">"dref/test-autoload"</span> ASDF/SYSTEM:SYSTEM&gt;</span>)</span></span></code></pre>

<p>The exact rules of filtering are as follows. Let <code>c</code> be the <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> of
the candidate definition from the list of all definitions that we
are matching against the arguments and denote its string
representation <code>(princ-to-string c)</code> with <code>p</code>. Note that
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_to_.htm" title="PRINC-TO-STRING (MGL-PAX:CLHS FUNCTION)"><code>princ-to-string</code></a> does not print the package of symbols. We say that
two strings <em>match</em> if <code>case-sensitive</code> is <code>nil</code> and they are <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_equalp.htm" title="EQUALP (MGL-PAX:CLHS FUNCTION)"><code>equalp</code></a>, or
<code>case-sensitive</code> is true and they are <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_equal.htm" title="EQUAL (MGL-PAX:CLHS FUNCTION)"><code>equal</code></a>. <code>case-sensitive</code> affects
<em>substring</em> comparisons too.</p>

<ul>
<li><p>If <code>name</code> is a <code>symbol</code>, then its <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_symb_2.htm" title="SYMBOL-NAME (MGL-PAX:CLHS FUNCTION)"><code>symbol-name</code></a> must <em>match</em> <code>p</code>.</p></li>
<li><p>If <code>name</code> is a <code>string</code>, then it must be a <em>substring</em> of <code>p</code>.</p></li>
<li><p>If <code>package</code> is <code>:none</code>, then <code>c</code> must <em>not</em> be a <code>symbol</code>.</p></li>
<li><p>If <code>package</code> is not <code>nil</code> or <code>:none</code>, then <code>c</code> must be a symbol.</p></li>
<li><p>If <code>package</code> is a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE (MGL-PAX:CLHS CLASS)"><code>package</code></a>, it must be <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_eq.htm" title="EQ (MGL-PAX:CLHS FUNCTION)"><code>eq</code></a> to the
  <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_symb_3.htm" title="SYMBOL-PACKAGE (MGL-PAX:CLHS FUNCTION)"><code>symbol-package</code></a> of <code>c</code>.</p></li>
<li><p>If <code>package</code> is a <code>symbol</code> other than <code>:none</code>, then its <code>symbol-name</code> must
  <em>match</em> the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_pkg_na.htm" title="PACKAGE-NAME (MGL-PAX:CLHS FUNCTION)"><code>package-name</code></a> or one of the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_pkg_ni.htm" title="PACKAGE-NICKNAMES (MGL-PAX:CLHS FUNCTION)"><code>package-nicknames</code></a> of
  <code>symbol-package</code> of <code>c</code>.</p></li>
<li><p>If <code>package</code> is a <code>string</code>, then it must be a <em>substring</em> of the
  <code>package-name</code> of <code>symbol-package</code> of <code>c</code>.</p></li>
<li><p>If <code>external-only</code> and <code>c</code> is a symbol, then <code>c</code> must be external in
  a matching package.</p></li>
<li><p>If <code>locative-types</code> is <code>nil</code>, then it matches everything.</p></li>
<li><p>If <a href="#DREF-EXT:LOCATIVE-TYPE%20FUNCTION" title="DREF-EXT:LOCATIVE-TYPE FUNCTION"><code>locative-type</code></a>s is non-<code>nil</code>, then the <code>locative-type</code> of the
  candidate definition must be in it (handling <code>:all</code>,
  <code>:lisp</code>, and <code>:pseudo</code> as described above).</p></li>
</ul>

<p>Can be extended via <a href="#DREF:MAP-NAMES%20GENERIC-FUNCTION" title="DREF:MAP-NAMES GENERIC-FUNCTION"><code>map-names</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3ALOCATIVE-TYPES-20FUNCTION-29"></a>
<a id="DREF:LOCATIVE-TYPES%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L515">[function]</a></span> <span class="reference-object"><a href="#DREF:LOCATIVE-TYPES%20FUNCTION" >locative-types</a></span></span></span></p>

<p>Return a list of non-<a href="#DREF:LOCATIVE-ALIASES%20FUNCTION" title="DREF:LOCATIVE-ALIASES FUNCTION">alias</a> locative types.
This is the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_unionc.htm" title="UNION (MGL-PAX:CLHS FUNCTION)"><code>union</code></a> of <a href="#DREF:LISP-LOCATIVE-TYPES%20FUNCTION" title="DREF:LISP-LOCATIVE-TYPES FUNCTION"><code>lisp-locative-types</code></a> and <a href="#DREF:PSEUDO-LOCATIVE-TYPES%20FUNCTION" title="DREF:PSEUDO-LOCATIVE-TYPES FUNCTION"><code>pseudo-locative-types</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3ALISP-LOCATIVE-TYPES-20FUNCTION-29"></a>
<a id="DREF:LISP-LOCATIVE-TYPES%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L520">[function]</a></span> <span class="reference-object"><a href="#DREF:LISP-LOCATIVE-TYPES%20FUNCTION" >lisp-locative-types</a></span></span></span></p>

<p>Return the locative types that correspond to Lisp definitions
except <a href="#MGL-PAX:UNKNOWN%20MGL-PAX:LOCATIVE" title="MGL-PAX:UNKNOWN MGL-PAX:LOCATIVE"><code>unknown</code></a>. These are the ones defined with
<a href="#DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-locative-type</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3APSEUDO-LOCATIVE-TYPES-20FUNCTION-29"></a>
<a id="DREF:PSEUDO-LOCATIVE-TYPES%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L526">[function]</a></span> <span class="reference-object"><a href="#DREF:PSEUDO-LOCATIVE-TYPES%20FUNCTION" >pseudo-locative-types</a></span></span></span></p>

<p>Return the locative types that correspond to non-Lisp definitions
plus <a href="#MGL-PAX:UNKNOWN%20MGL-PAX:LOCATIVE" title="MGL-PAX:UNKNOWN MGL-PAX:LOCATIVE"><code>unknown</code></a>. These are the ones defined with
<a href="#DREF-EXT:DEFINE-PSEUDO-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-PSEUDO-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-pseudo-locative-type</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3ALOCATIVE-ALIASES-20FUNCTION-29"></a>
<a id="DREF:LOCATIVE-ALIASES%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L532">[function]</a></span> <span class="reference-object"><a href="#DREF:LOCATIVE-ALIASES%20FUNCTION" >locative-aliases</a></span></span></span></p>

<p>Return the list of locatives aliases, defined with <a href="#DREF-EXT:DEFINE-LOCATIVE-ALIAS%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-ALIAS MGL-PAX:MACRO"><code>define-locative-alias</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3A-40OPERATIONS-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@OPERATIONS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@LISTING-DEFINITIONS%20MGL-PAX:SECTION" title="Listing Definitions">&#8592;</a> <a href="dref-manual.html" title="DRef Manual">&#8593;</a> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8594;</a> <a href="#DREF:@OPERATIONS%20MGL-PAX:SECTION" title="Operations">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L537">&#955;</a></span></span></p>
<h2><a href="#DREF:@OPERATIONS%20MGL-PAX:SECTION">4 Operations</a></h2>
<p>The following functions take a single object definition as their argument.
They may try to <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a> the definition of the object, which may
signal a <a href="#DREF-EXT:LOCATE-ERROR%20CONDITION" title="DREF-EXT:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition.</p>
<p><a id="x-28DREF-3AARGLIST-20FUNCTION-29"></a>
<a id="DREF:ARGLIST%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L551">[function]</a></span> <span class="reference-object"><a href="#DREF:ARGLIST%20FUNCTION" >arglist</a></span></span> <span class="locative-args">object</span></span></p>

<p>Return the arglist of the definition of <code>object</code> or <code>nil</code> if the
arglist cannot be determined.</p>

<p>The second return value indicates whether the arglist has been
found. Furthermore, <code>:ordinary</code> indicates an <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_o.htm#ordinary_lambda_list" title="&quot;ordinary lambda list&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">ordinary lambda
list</a>, <code>:macro</code> a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_m.htm#macro_lambda_list" title="&quot;macro lambda list&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">macro lambda list</a>, <code>:deftype</code> a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#deftype_lambda_list" title="&quot;deftype lambda list&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">deftype
lambda list</a>, and <code>:destructuring</code> a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#destructuring_lambda_list" title="&quot;destructuring lambda list&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">destructuring lambda
list</a>. Other non-<code>nil</code> values are also allowed.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">arglist #'arglist</span>)</span>
=&gt; <span class="paren1">(<span class="code">OBJECT</span>)</span>
=&gt; :ORDINARY</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">arglist <span class="paren2">(<span class="code">dref '<i><span class="symbol">define-locative-type</span></i> 'macro</span>)</span></span>)</span>
=&gt; <span class="paren1">(<span class="code">LOCATIVE-TYPE LAMBDA-LIST &amp;BODY DOCSTRING</span>)</span>
=&gt; :MACRO</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">arglist <span class="paren2">(<span class="code">dref 'method 'locative</span>)</span></span>)</span>
=&gt; <span class="paren1">(<span class="code">METHOD-QUALIFIERS METHOD-SPECIALIZERS</span>)</span>
=&gt; :DESTRUCTURING</span></code></pre>

<p>This function supports <a href="#MGL-PAX:MACRO%20MGL-PAX:LOCATIVE" title="MGL-PAX:MACRO MGL-PAX:LOCATIVE"><code>macro</code></a>s, <a href="#COMPILER-MACRO%20MGL-PAX:LOCATIVE" title="COMPILER-MACRO MGL-PAX:LOCATIVE"><code>compiler-macro</code></a>s, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_setf_.htm" title="SETF (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>setf</code></a> functions,
<code>function</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION (MGL-PAX:CLHS CLASS)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/s_fn.htm" title="FUNCTION (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>1</code></a>)s, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_generi.htm" title="GENERIC-FUNCTION (MGL-PAX:CLHS CLASS)"><code>generic-function</code></a>s, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_method.htm" title="METHOD (MGL-PAX:CLHS CLASS)"><code>method</code></a>s, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/d_type.htm" title="TYPE (MGL-PAX:CLHS DECLARATION)"><code>type</code></a>s, <a href="#MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE" title="MGL-PAX:LOCATIVE MGL-PAX:LOCATIVE"><code>locative</code></a>s. Note that
<code>arglist</code> depends on the quality of <code>swank-backend:arglist</code>. With the
exception of SBCL, which has perfect support, all Lisp
implementations have minor omissions:</p>

<ul>
<li><p><a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_deftp.htm" title="DEFTYPE (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>deftype</code></a> lambda lists on ABCL, AllegroCL, CLISP, CCL, CMUCL, ECL;</p></li>
<li><p>default values in <code>macro</code> lambda lists on AllegroCL; various edge</p></li>
<li><p>cases involving traced functions.</p></li>
</ul>

<p>Can be extended via <a href="#DREF-EXT:ARGLIST*%20GENERIC-FUNCTION" title="DREF-EXT:ARGLIST* GENERIC-FUNCTION"><code>arglist*</code></a></p></li>
</ul>
<p><a id="x-28MGL-PAX-3ADOCSTRING-20FUNCTION-29"></a>
<a id="MGL-PAX:DOCSTRING%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L593">[function]</a></span> <span class="reference-object"><a href="#MGL-PAX:DOCSTRING%20FUNCTION" >docstring</a></span></span> <span class="locative-args">object</span></span></p>

<p>Return the docstring from the definition of <code>object</code>.
As the second value, return the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_pkg.htm" title="*PACKAGE* (MGL-PAX:CLHS VARIABLE)"><code>*package*</code></a> that was in effect when
the docstring was installed or <code>nil</code> if it cannot be determined (this
is used by <a href="pax-manual.html#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>pax:document</code></a> when <a href="pax-manual.html#MGL-PAX:@PARSING%20MGL-PAX:SECTION" title="Parsing">Parsing</a> the docstring). This
function is similar in purpose to <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_docume.htm" title="DOCUMENTATION (MGL-PAX:CLHS GENERIC-FUNCTION)"><code>cl:documentation</code></a>.</p>

<p>Note that some locative types such as <a href="#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" title="ASDF/SYSTEM:SYSTEM MGL-PAX:LOCATIVE"><code>asdf:system</code></a>s and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/d_declar.htm" title="DECLARATION (MGL-PAX:CLHS DECLARATION)"><code>declaration</code></a>s
have no docstrings, and some Lisp implementations do not record all
docstrings. The following are known to be missing:</p>

<ul>
<li><p><a href="#COMPILER-MACRO%20MGL-PAX:LOCATIVE" title="COMPILER-MACRO MGL-PAX:LOCATIVE"><code>compiler-macro</code></a> docstrings on ABCL, AllegroCL, CCL, ECL;</p></li>
<li><p><a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_meth_1.htm" title="METHOD-COMBINATION (MGL-PAX:CLHS CLASS)"><code>method-combination</code></a> docstrings on ABCL, AllegroCL.</p></li>
</ul>

<p>Can be extended via <a href="#DREF-EXT:DOCSTRING*%20GENERIC-FUNCTION" title="DREF-EXT:DOCSTRING* GENERIC-FUNCTION"><code>docstring*</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3ASOURCE-LOCATION-20FUNCTION-29"></a>
<a id="DREF:SOURCE-LOCATION%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L614">[function]</a></span> <span class="reference-object"><a href="#DREF:SOURCE-LOCATION%20FUNCTION" >source-location</a></span></span> <span class="locative-args">object &amp;key errorp</span></span></p>

<p>Return the Swank source location for the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#defining_form" title="&quot;defining form&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">defining form</a>
of <code>object</code>. If no source location was found, then either an <a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_error.htm" title="ERROR (MGL-PAX:CLHS CONDITION)"><code>error</code></a>
condition is signalled if <code>errorp</code> else the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_error.htm" title="ERROR (MGL-PAX:CLHS CONDITION)"><code>error</code></a> is
returned as the second value (with the first being <code>nil</code>). The
returned Swank location object is to be accessed only through the
<a href="#DREF-EXT:@SOURCE-LOCATIONS%20MGL-PAX:SECTION" title="Source Locations">Source Locations</a> API or to be passed to e.g Slime's
<code>slime-goto-source-location</code>.</p>

<p>Note that the availability of source location information varies
greatly across Lisp implementations.</p>

<p>Can be extended via <a href="#DREF-EXT:SOURCE-LOCATION*%20GENERIC-FUNCTION" title="DREF-EXT:SOURCE-LOCATION* GENERIC-FUNCTION"><code>source-location*</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3A-40LOCATIVE-TYPES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@OPERATIONS%20MGL-PAX:SECTION" title="Operations">&#8592;</a> <a href="dref-manual.html" title="DRef Manual">&#8593;</a> <a href="#DREF:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Variables">&#8594;</a> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L176">&#955;</a></span></span></p>
<h2><a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION">5 Locative Types</a></h2>
<p>The following are the <a href="#DREF:@LOCATIVE-TYPE%20MGL-PAX:GLOSSARY-TERM" title="locative type">locative type</a>s supported out of the
box. As all locative types, they are named by symbols. When there is
a CL type corresponding to the reference's locative type, the
references can be <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>d to a unique object as is the case in</p>
<pre><code><span class="code"><span class="paren1">(<span class="code">resolve <span class="paren2">(<span class="code">dref 'print '<i><span class="symbol">function</span></i></span>)</span></span>)</span>
==&gt; #&lt;FUNCTION PRINT&gt;</span></code></pre>
<p>Even if there is no such CL type, the <a href="#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a>, the <a href="#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a>, and
the <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> of the defining form is usually recorded unless
otherwise noted.</p>
<p><a id="x-28DREF-3A-40VARIABLELIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8592;</a> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#DREF:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Macros">&#8594;</a> <a href="#DREF:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Variables">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L198">&#955;</a></span></span></p>
<h3><a href="#DREF:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION">5.1 Locatives for Variables</a></h3>
<p><a id="x-28VARIABLE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="VARIABLE%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L7">[locative]</a></span> <span class="reference-object"><a href="#VARIABLE%20MGL-PAX:LOCATIVE" >variable</a></span></span> <span class="locative-args">&amp;optional initform</span></span></p>

<p>Refers to a global special variable.
<code>initform</code>, or if not specified, the global value of the variable is
to be used for <a href="#DREF:@PRESENTATION%20MGL-PAX:GLOSSARY-TERM" title="presentation">presentation</a>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref '<span class="special">*print-length*</span> 'variable</span>)</span>
==&gt; #&lt;DREF *PRINT-LENGTH* VARIABLE&gt;</span></code></pre>

<p><code>variable</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ACONSTANT-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:CONSTANT%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L45">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:CONSTANT%20MGL-PAX:LOCATIVE" >constant</a></span></span> <span class="locative-args">&amp;optional initform</span></span></p>

<p>Refers to a constant variable defined with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defcon.htm" title="DEFCONSTANT (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defconstant</code></a>. <code>initform</code>,
or if not specified, the value of the constant is included in the
documentation. The <a href="#MGL-PAX:CONSTANT%20MGL-PAX:LOCATIVE" title="MGL-PAX:CONSTANT MGL-PAX:LOCATIVE"><code>constant</code></a> locative is like the <a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> locative,
but it also checks that its object is <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_consta.htm" title="CONSTANTP (MGL-PAX:CLHS FUNCTION)"><code>constantp</code></a>.</p>

<p><code>constant</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3A-40MACROLIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@VARIABLELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Variables">&#8592;</a> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#DREF:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Functions">&#8594;</a> <a href="#DREF:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Macros">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L202">&#955;</a></span></span></p>
<h3><a href="#DREF:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION">5.2 Locatives for Macros</a></h3>
<p><a id="x-28MGL-PAX-3AMACRO-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:MACRO%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L84">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:MACRO%20MGL-PAX:LOCATIVE" >macro</a></span></span></span></p>

<p>Refers to a global macro, typically defined with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defmac.htm" title="DEFMACRO (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defmacro</code></a>, or to a
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_specia.htm" title="SPECIAL-OPERATOR-P (MGL-PAX:CLHS FUNCTION)">special operator</a>.</p>

<p><code>macro</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ASYMBOL-MACRO-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:SYMBOL-MACRO%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L115">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:SYMBOL-MACRO%20MGL-PAX:LOCATIVE" >symbol-macro</a></span></span></span></p>

<p>Refers to a global symbol macro, defined with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defi_1.htm" title="DEFINE-SYMBOL-MACRO (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>define-symbol-macro</code></a>.
Note that since <code>define-symbol-macro</code> does not support docstrings, <code>pax</code>
defines methods on the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_docume.htm" title="DOCUMENTATION (MGL-PAX:CLHS GENERIC-FUNCTION)"><code>documentation</code></a> generic function specialized on
<code>(doc-type (eql 'symbol-macro))</code>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-symbol-macro</span></i> my-mac 42</span>)</span>
<span class="paren1">(<span class="code">setf <span class="paren2">(<span class="code">documentation 'my-mac 'symbol-macro</span>)</span>
      <span class="string">"This is MY-MAC."</span></span>)</span>
<span class="paren1">(<span class="code">documentation 'my-mac 'symbol-macro</span>)</span>
=&gt; "This is MY-MAC."</span></code></pre>

<p><code>symbol-macro</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28COMPILER-MACRO-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="COMPILER-MACRO%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L167">[locative]</a></span> <span class="reference-object"><a href="#COMPILER-MACRO%20MGL-PAX:LOCATIVE" >compiler-macro</a></span></span></span></p>

<p>Refers to a compiler macro, typically defined with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_define.htm" title="DEFINE-COMPILER-MACRO (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>define-compiler-macro</code></a>.</p>

<p><code>compiler-macro</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28SETF-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="SETF%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L196">[locative]</a></span> <span class="reference-object"><a href="#SETF%20MGL-PAX:LOCATIVE" >setf</a></span></span> <span class="locative-args">&amp;optional method</span></span></p>

<p>Refers to a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_s.htm#setf_expander" title="&quot;setf expander&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">setf expander</a> (see <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defset.htm" title="DEFSETF (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defsetf</code></a> and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defi_3.htm" title="DEFINE-SETF-EXPANDER (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>define-setf-expander</code></a>)
or a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_s.htm#setf_function" title="&quot;setf function&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">setf function</a> (e.g. <code>(defun (setf name) ...)</code> or the
same with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defgen.htm" title="DEFGENERIC (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defgeneric</code></a>). The format in <a href="pax-manual.html#MGL-PAX:DEFSECTION%20MGL-PAX:MACRO" title="MGL-PAX:DEFSECTION MGL-PAX:MACRO"><code>defsection</code></a> is <code>(&lt;name&gt; setf)</code>
in all these cases.</p>

<p>To refer to methods of a setf generic function, use a <a href="#METHOD%20MGL-PAX:LOCATIVE" title="METHOD MGL-PAX:LOCATIVE"><code>method</code></a>
locative inside <code>setf</code> like this:</p>

<pre><code>(dref 'documentation '(setf (method () (t symbol (eql function))))
</code></pre>

<p>References to setf functions <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a> to the function object. Setf
expander references do not <code>resolve</code>.</p></li>
</ul>
<p><a id="x-28DREF-3A-40FUNCTIONLIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@MACROLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Macros">&#8592;</a> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#DREF:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Types and Declarations">&#8594;</a> <a href="#DREF:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Functions">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L208">&#955;</a></span></span></p>
<h3><a href="#DREF:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION">5.3 Locatives for Functions</a></h3>
<p><a id="x-28FUNCTION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="FUNCTION%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L280">[locative]</a></span> <span class="reference-object"><a href="#FUNCTION%20MGL-PAX:LOCATIVE" >function</a></span></span></span></p>

<p>Refers to a global function, typically defined with <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defun.htm" title="DEFUN (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defun</code></a>. The
<a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> must be a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL (MGL-PAX:CLHS CLASS)"><code>symbol</code></a> (see the <a href="#SETF%20MGL-PAX:LOCATIVE" title="SETF MGL-PAX:LOCATIVE"><code>setf</code></a> locative for how to reference
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_s.htm#setf_function" title="&quot;setf function&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">setf functions</a>). It is also allowed to reference
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_generi.htm" title="GENERIC-FUNCTION (MGL-PAX:CLHS CLASS)"><code>generic-function</code></a>s as <code>function</code>s:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref 'docstring '<i><span class="symbol">function</span></i></span>)</span>
==&gt; #&lt;DREF DOCSTRING FUNCTION&gt;</span></code></pre></li>
</ul>
<p><a id="x-28GENERIC-FUNCTION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="GENERIC-FUNCTION%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L341">[locative]</a></span> <span class="reference-object"><a href="#GENERIC-FUNCTION%20MGL-PAX:LOCATIVE" >generic-function</a></span></span></span></p>

<p>Refers to a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_generi.htm" title="GENERIC-FUNCTION (MGL-PAX:CLHS CLASS)"><code>generic-function</code></a>, typically defined with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defgen.htm" title="DEFGENERIC (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defgeneric</code></a>. The <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> must be a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL (MGL-PAX:CLHS CLASS)"><code>symbol</code></a> (see the <a href="#SETF%20MGL-PAX:LOCATIVE" title="SETF MGL-PAX:LOCATIVE"><code>setf</code></a> locative for
how to reference <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_s.htm#setf_function" title="&quot;setf function&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">setf functions</a>).</p></li>
</ul>
<p><a id="x-28METHOD-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="METHOD%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L382">[locative]</a></span> <span class="reference-object"><a href="#METHOD%20MGL-PAX:LOCATIVE" >method</a></span></span> <span class="locative-args">method-qualifiers method-specializers</span></span></p>

<p>Refers to <code>method</code>s named by <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL (MGL-PAX:CLHS CLASS)"><code>symbol</code></a>s (for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_setf_.htm" title="SETF (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>setf</code></a> methods,
see the <code>setf</code> locative). <code>method-qualifiers</code> and <code>method-specializers</code>
are similar to the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_m.htm" title="FIND-METHOD (MGL-PAX:CLHS GENERIC-FUNCTION)"><code>cl:find-method</code></a>'s arguments of the same names. For
example, the method</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defgeneric</span></i> foo-gf <span class="paren2">(<span class="code">x y z</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:method</span> <span class="keyword">:around</span> <span class="paren3">(<span class="code">x <span class="paren4">(<span class="code">y <span class="paren5">(<span class="code">eql 'xxx</span>)</span></span>)</span> <span class="paren4">(<span class="code">z string</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">values x y z</span>)</span></span>)</span></span>)</span></span></code></pre>

<p>can be referred to as</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref 'foo-gf '<span class="paren2">(<span class="code">method <span class="paren3">(<span class="code"><span class="keyword">:around</span></span>)</span> <span class="paren3">(<span class="code">t <span class="paren4">(<span class="code">eql xxx</span>)</span> string</span>)</span></span>)</span></span>)</span>
==&gt; #&lt;DREF FOO-GF <span class="paren1">(<span class="code">METHOD <span class="paren2">(<span class="code"><span class="keyword">:AROUND</span></span>)</span> <span class="paren2">(<span class="code">T <span class="paren3">(<span class="code">EQL XXX</span>)</span> STRING</span>)</span></span>)</span>&gt;</span></code></pre>

<p><code>method</code> is not <a href="pax-manual.html#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>.</p></li>
</ul>
<p><a id="x-28METHOD-COMBINATION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="METHOD-COMBINATION%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L503">[locative]</a></span> <span class="reference-object"><a href="#METHOD-COMBINATION%20MGL-PAX:LOCATIVE" >method-combination</a></span></span></span></p>

<p>Refers to a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_meth_1.htm" title="METHOD-COMBINATION (MGL-PAX:CLHS CLASS)"><code>method-combination</code></a>, defined with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defi_4.htm" title="DEFINE-METHOD-COMBINATION (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>define-method-combination</code></a>.</p>

<p><code>method-combination</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AACCESSOR-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:ACCESSOR%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L533">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:ACCESSOR%20MGL-PAX:LOCATIVE" >accessor</a></span></span> <span class="locative-args">class-name</span></span></p>

<p>Refers to an <code>:accessor</code> in a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defcla.htm" title="DEFCLASS (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defclass</code></a>:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> foo <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">xxx <span class="keyword">:accessor</span> foo-xxx</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">dref 'foo-xxx '<span class="paren2">(<span class="code">accessor foo</span>)</span></span>)</span>
==&gt; #&lt;DREF FOO-XXX <span class="paren1">(<span class="code">ACCESSOR FOO</span>)</span>&gt;</span></code></pre>

<p>An <code>:accessor</code> in <code>defclass</code> creates a reader and a writer method.
Somewhat arbitrarily, <code>accessor</code> references <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a> to the writer
method but can be <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>d with either.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AREADER-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:READER%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L548">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:READER%20MGL-PAX:LOCATIVE" >reader</a></span></span> <span class="locative-args">class-name</span></span></p>

<p>Like <a href="#MGL-PAX:ACCESSOR%20MGL-PAX:LOCATIVE" title="MGL-PAX:ACCESSOR MGL-PAX:LOCATIVE"><code>accessor</code></a>, but refers to a <code>:reader</code> method in a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defcla.htm" title="DEFCLASS (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defclass</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3AWRITER-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:WRITER%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L551">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:WRITER%20MGL-PAX:LOCATIVE" >writer</a></span></span> <span class="locative-args">class-name</span></span></p>

<p>Like <a href="#MGL-PAX:ACCESSOR%20MGL-PAX:LOCATIVE" title="MGL-PAX:ACCESSOR MGL-PAX:LOCATIVE"><code>accessor</code></a>, but refers to a <code>:writer</code> method in a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defcla.htm" title="DEFCLASS (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defclass</code></a>.</p></li>
</ul>
<p><a id="x-28MGL-PAX-3ASTRUCTURE-ACCESSOR-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:STRUCTURE-ACCESSOR%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L692">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:STRUCTURE-ACCESSOR%20MGL-PAX:LOCATIVE" >structure-accessor</a></span></span> <span class="locative-args">&amp;optional structure-class-name</span></span></p>

<p>Refers to an accessor function generated by <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defstr.htm" title="DEFSTRUCT (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defstruct</code></a>.
A <a href="#DREF-EXT:LOCATE-ERROR%20CONDITION" title="DREF-EXT:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition is signalled if the wrong
<code>structure-class-name</code> is provided.</p>

<p>Note that there is no portable way to detect structure accessors,
and on some platforms, <code>(locate #'my-accessor)</code>, <a href="#DREF:DEFINITIONS%20FUNCTION" title="DREF:DEFINITIONS FUNCTION"><code>definitions</code></a> and
<a href="#DREF:DREF-APROPOS%20FUNCTION" title="DREF:DREF-APROPOS FUNCTION"><code>dref-apropos</code></a> will return <code>function</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_fn.htm" title="FUNCTION (MGL-PAX:CLHS CLASS)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/s_fn.htm" title="FUNCTION (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>1</code></a>) references instead. On such
platforms, <code>structure-accessor</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3A-40TYPELIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@FUNCTIONLIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Functions">&#8592;</a> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#DREF:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for the Condition System">&#8594;</a> <a href="#DREF:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Types and Declarations">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L218">&#955;</a></span></span></p>
<h3><a href="#DREF:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION">5.4 Locatives for Types and Declarations</a></h3>
<p><a id="x-28TYPE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="TYPE%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L761">[locative]</a></span> <span class="reference-object"><a href="#TYPE%20MGL-PAX:LOCATIVE" >type</a></span></span></span></p>

<p>This locative can refer to any Lisp type and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_c.htm#compound_type_specifier" title="&quot;compound type specifier&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">compound type
specifiers</a> such as <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_and.htm" title="AND (MGL-PAX:CLHS TYPE)"><code>and</code></a>. For types defined with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_deftp.htm" title="DEFTYPE (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>deftype</code></a>, their <a href="#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a> is available. <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS (MGL-PAX:CLHS CLASS)"><code>class</code>es</a> and
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_cnd.htm" title="CONDITION (MGL-PAX:CLHS CONDITION)"><code>condition</code>s</a> may be referred to as <code>type</code>s:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref 'xref 'type</span>)</span>
==&gt; #&lt;DREF XREF CLASS&gt;</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref 'locate-error 'type</span>)</span>
==&gt; #&lt;DREF LOCATE-ERROR CONDITION&gt;</span></code></pre>

<p><code>type</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p></li>
</ul>
<p><a id="x-28CLASS-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="CLASS%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L819">[locative]</a></span> <span class="reference-object"><a href="#CLASS%20MGL-PAX:LOCATIVE" >class</a></span></span></span></p>

<p>Naturally, <code>class</code> is the locative type for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS (MGL-PAX:CLHS CLASS)"><code>class</code></a>es.
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_cnd.htm" title="CONDITION (MGL-PAX:CLHS CONDITION)"><code>condition</code>s</a> may be referred to as <code>class</code>es:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref 'locate-error 'class</span>)</span>
==&gt; #&lt;DREF LOCATE-ERROR CONDITION&gt;</span></code></pre></li>
</ul>
<p><a id="x-28DECLARATION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="DECLARATION%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L886">[locative]</a></span> <span class="reference-object"><a href="#DECLARATION%20MGL-PAX:LOCATIVE" >declaration</a></span></span></span></p>

<p>Refers to a declaration, used in <a href="http://www.lispworks.com/documentation/HyperSpec/Body/s_declar.htm" title="DECLARE (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>declare</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_declai.htm" title="DECLAIM (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>declaim</code></a> and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_procla.htm" title="PROCLAIM (MGL-PAX:CLHS FUNCTION)"><code>proclaim</code></a>.</p>

<p>User code may also define new declarations with CLTL2 functionality,
but there is currently no way to provide a docstring, and their
<a href="#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a> is always <code>nil</code>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">cl-environments:define-declaration</span></i> my-decl <span class="paren2">(<span class="code">&amp;rest things</span>)</span>
  <span class="paren2">(<span class="code">values <span class="keyword">:declare</span> <span class="paren3">(<span class="code">cons 'foo things</span>)</span></span>)</span></span>)</span></span></code></pre>

<p><code>declaration</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>.</p>

<p>Also, <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> on declarations currently only works on SBCL.</p></li>
</ul>
<p><a id="x-28DREF-3A-40CONDITION-SYSTEM-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@TYPELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Types and Declarations">&#8592;</a> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#DREF:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Packages and Readtables">&#8594;</a> <a href="#DREF:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for the Condition System">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L223">&#955;</a></span></span></p>
<h3><a href="#DREF:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION">5.5 Locatives for the Condition System</a></h3>
<p><a id="x-28CONDITION-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="CONDITION%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L860">[locative]</a></span> <span class="reference-object"><a href="#CONDITION%20MGL-PAX:LOCATIVE" >condition</a></span></span></span></p>

<p><code>condition</code> is the locative type for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/e_cnd.htm" title="CONDITION (MGL-PAX:CLHS CONDITION)"><code>condition</code></a>s.</p></li>
</ul>
<p><a id="x-28RESTART-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="RESTART%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/early.lisp#L5">[locative]</a></span> <span class="reference-object"><a href="#RESTART%20MGL-PAX:LOCATIVE" >restart</a></span></span></span></p>

<p>A locative to refer to the definition of a restart defined by
<a href="#DREF:DEFINE-RESTART%20MGL-PAX:MACRO" title="DREF:DEFINE-RESTART MGL-PAX:MACRO"><code>define-restart</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3ADEFINE-RESTART-20MGL-PAX-3AMACRO-29"></a>
<a id="DREF:DEFINE-RESTART%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/early.lisp#L9">[macro]</a></span> <span class="reference-object"><a href="#DREF:DEFINE-RESTART%20MGL-PAX:MACRO" >define-restart</a></span></span> <span class="locative-args">symbol lambda-list &amp;body docstring</span></span></p>

<p>Associate a definition with the name of a restart, which must be a symbol.
<code>lambda-list</code> should be what calls like <code>(invoke-restart '&lt;symbol&gt;
...)</code> must conform to, but this not enforced.</p>

<p><code>pax</code> &quot;defines&quot; standard CL restarts such as <code>use-value</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_abortc.htm" title="USE-VALUE (MGL-PAX:CLHS FUNCTION)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/r_use_va.htm" title="USE-VALUE (MGL-PAX:CLHS RESTART)"><code>1</code></a>) with
<code>define-restart</code>:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">first-line <span class="paren2">(<span class="code">source-location-snippet
             <span class="paren3">(<span class="code">source-location <span class="paren4">(<span class="code">dref 'use-value 'restart</span>)</span></span>)</span></span>)</span></span>)</span>
=&gt; "<span class="paren1">(<span class="code"><i><span class="symbol">define-restart</span></i> use-value <span class="paren2">(<span class="code">value</span>)</span><span class="string">"</span></span></span></span></code></pre>

<p>Note that while there is a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_rst.htm" title="RESTART (MGL-PAX:CLHS CLASS)"><code>cl:restart</code></a> class, its instances have no
docstring or source location.</p></li>
</ul>
<p><a id="x-28DREF-3A-40PACKAGELIKE-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@CONDITION-SYSTEM-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for the Condition System">&#8592;</a> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#DREF:@DREF-LOCATIVES%20MGL-PAX:SECTION" title="DRef Locatives">&#8594;</a> <a href="#DREF:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Packages and Readtables">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L229">&#955;</a></span></span></p>
<h3><a href="#DREF:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION">5.6 Locatives for Packages and Readtables</a></h3>
<p><a id="x-28ASDF-2FSYSTEM-3ASYSTEM-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L970">[locative]</a></span> <span class="reference-object"><a href="#ASDF%2FSYSTEM:SYSTEM%20MGL-PAX:LOCATIVE" >asdf/system:system</a></span></span></span></p>

<p>Refers to a registered <code>asdf:system</code>.
The <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> may be anything <code>asdf:find-system</code> supports.</p>

<p><code>asdf:system</code> is not <a href="pax-manual.html#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>.</p></li>
</ul>
<p><a id="x-28PACKAGE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="PACKAGE%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1013">[locative]</a></span> <span class="reference-object"><a href="#PACKAGE%20MGL-PAX:LOCATIVE" >package</a></span></span></span></p>

<p>Refers to a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_pkg.htm" title="PACKAGE (MGL-PAX:CLHS CLASS)"><code>package</code></a>, defined by <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpkg.htm" title="DEFPACKAGE (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defpackage</code></a> or <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_mk_pkg.htm" title="MAKE-PACKAGE (MGL-PAX:CLHS FUNCTION)"><code>make-package</code></a>.
The <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> may be anything <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_p.htm" title="FIND-PACKAGE (MGL-PAX:CLHS FUNCTION)"><code>find-package</code></a> supports.</p>

<p><code>package</code> is not <a href="pax-manual.html#MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P%20GENERIC-FUNCTION" title="MGL-PAX:EXPORTABLE-LOCATIVE-TYPE-P GENERIC-FUNCTION"><code>exportable-locative-type-p</code></a>.</p></li>
</ul>
<p><a id="x-28READTABLE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="READTABLE%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1058">[locative]</a></span> <span class="reference-object"><a href="#READTABLE%20MGL-PAX:LOCATIVE" >readtable</a></span></span></span></p>

<p>Refers to a named <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_rdtabl.htm" title="READTABLE (MGL-PAX:CLHS CLASS)"><code>readtable</code></a> defined with
<code>named-readtables:defreadtable</code>, which associates a global name and a
docstring with the readtable object. The <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> may be anything
<code>find-readtable</code> supports. Unfortunately, <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> information
is not available.</p>

<p><code>readtable</code> references <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a> to <code>find-readtable</code> on their <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>.</p></li>
</ul>
<p><a id="x-28DREF-3A-40DREF-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@DREF-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@PACKAGELIKE-LOCATIVES%20MGL-PAX:SECTION" title="Locatives for Packages and Readtables">&#8592;</a> <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">&#8593;</a> <a href="#DREF:@GLOSSARY%20MGL-PAX:SECTION" title="Glossary">&#8594;</a> <a href="#DREF:@DREF-LOCATIVES%20MGL-PAX:SECTION" title="DRef Locatives">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L235">&#955;</a></span></span></p>
<h3><a href="#DREF:@DREF-LOCATIVES%20MGL-PAX:SECTION">5.7 DRef Locatives</a></h3>
<p><a id="x-28MGL-PAX-3ALOCATIVE-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1097">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE" >locative</a></span></span></span></p>

<p>This is the locative for <a href="#DREF:@LOCATIVE-TYPE%20MGL-PAX:GLOSSARY-TERM" title="locative type">locative type</a>s defined with
<a href="#DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-locative-type</code></a>, <a href="#DREF-EXT:DEFINE-PSEUDO-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-PSEUDO-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-pseudo-locative-type</code></a> and
<a href="#DREF-EXT:DEFINE-LOCATIVE-ALIAS%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-ALIAS MGL-PAX:MACRO"><code>define-locative-alias</code></a>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">first-line <span class="paren2">(<span class="code">source-location-snippet
             <span class="paren3">(<span class="code">source-location <span class="paren4">(<span class="code">dref 'macro 'locative</span>)</span></span>)</span></span>)</span></span>)</span>
=&gt; "<span class="paren1">(<span class="code"><i><span class="symbol">define-locative-type</span></i> macro <span class="paren2">(<span class="code"></span>)</span><span class="string">"</span></span></span></span></code></pre></li>
</ul>
<p><a id="x-28MGL-PAX-3AUNKNOWN-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="MGL-PAX:UNKNOWN%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1161">[locative]</a></span> <span class="reference-object"><a href="#MGL-PAX:UNKNOWN%20MGL-PAX:LOCATIVE" >unknown</a></span></span> <span class="locative-args">dspec</span></span></p>

<p>This <a href="#DREF:PSEUDO-LOCATIVE-TYPES%20FUNCTION" title="DREF:PSEUDO-LOCATIVE-TYPES FUNCTION">pseudo locative type</a> is to allow <code>pax</code>
to work in a limited way with locatives it doesn't know. <code>unknown</code>
definitions come from <a href="#DREF:DEFINITIONS%20FUNCTION" title="DREF:DEFINITIONS FUNCTION"><code>definitions</code></a>, which uses
<code>swank/backend:find-definitions</code>. The following examples show <code>pax</code>
stuffing the Swank dspec <code>(:define-alien-type double-float)</code> into an
<a href="#MGL-PAX:UNKNOWN%20MGL-PAX:LOCATIVE" title="MGL-PAX:UNKNOWN MGL-PAX:LOCATIVE"><code>unknown</code></a> locative on SBCL.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">definitions</span></i> 'double-float <span class="keyword">:locative-types</span> <span class="paren2">(<span class="code">locative-types</span>)</span></span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF DOUBLE-FLOAT CLASS&gt; #&lt;DREF DOUBLE-FLOAT <span class="paren2">(<span class="code">CLHS TYPE</span>)</span>&gt;
--&gt;  #&lt;DREF DOUBLE-FLOAT <span class="paren2">(<span class="code">UNKNOWN <span class="paren3">(<span class="code"><span class="keyword">:DEFINE-ALIEN-TYPE</span> DOUBLE-FLOAT</span>)</span></span>)</span>&gt;</span>)</span></span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref 'double-float '<span class="paren2">(<span class="code">unknown <span class="paren3">(<span class="code"><span class="keyword">:define-alien-type</span> double-float</span>)</span></span>)</span></span>)</span>
==&gt; #&lt;DREF DOUBLE-FLOAT <span class="paren1">(<span class="code">UNKNOWN <span class="paren2">(<span class="code"><span class="keyword">:DEFINE-ALIEN-TYPE</span> DOUBLE-FLOAT</span>)</span></span>)</span>&gt;</span></code></pre>

<p><a href="#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a> and <a href="#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a> return <code>nil</code> for <code>unknown</code>s, but <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a>
works.</p></li>
</ul>
<p><a id="x-28LAMBDA-20MGL-PAX-3ALOCATIVE-29"></a>
<a id="LAMBDA%20MGL-PAX:LOCATIVE"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1203">[locative]</a></span> <span class="reference-object"><a href="#LAMBDA%20MGL-PAX:LOCATIVE" >lambda</a></span></span> <span class="locative-args">&amp;key arglist arglist-type docstring docstring-package file file-position snippet &amp;allow-other-keys</span></span></p>

<p>A <a href="#DREF:PSEUDO-LOCATIVE-TYPES%20FUNCTION" title="DREF:PSEUDO-LOCATIVE-TYPES FUNCTION">pseudo locative type</a> that carries its
<code>arglist</code>, <code>docstring</code> and <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> in the locative itself. See
<a href="#DREF-EXT:MAKE-SOURCE-LOCATION%20FUNCTION" title="DREF-EXT:MAKE-SOURCE-LOCATION FUNCTION"><code>make-source-location</code></a> for the description of <code>file</code>, <code>file-position</code>, and
<code>snippet</code>. <code>lambda</code> references do not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>. The <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> must be <code>nil</code>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">arglist <span class="paren2">(<span class="code">dref nil '<span class="paren3">(<span class="code"><i><span class="symbol">lambda</span></i> <span class="keyword">:arglist</span> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">x y</span>)</span> z</span>)</span>
                                   <span class="keyword">:arglist-type</span> <span class="keyword">:macro</span></span>)</span></span>)</span></span>)</span>
=&gt; <span class="paren1">(<span class="code"><span class="paren2">(<span class="code">X Y</span>)</span> Z</span>)</span>
=&gt; :MACRO</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">docstring <span class="paren2">(<span class="code">dref nil '<span class="paren3">(<span class="code"><i><span class="symbol">lambda</span></i> <span class="keyword">:docstring</span> <span class="string">"xxx"</span>
                                     <span class="keyword">:docstring-package</span> <span class="keyword">:dref</span></span>)</span></span>)</span></span>)</span>
=&gt; "xxx"
==&gt; #&lt;PACKAGE "DREF"&gt;</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">source-location-file
 <span class="paren2">(<span class="code">source-location <span class="paren3">(<span class="code">dref nil '<span class="paren4">(<span class="code"><i><span class="symbol">lambda</span></i> <span class="keyword">:file</span> <span class="string">"xxx.el"</span></span>)</span></span>)</span></span>)</span></span>)</span>
=&gt; "xxx.el"</span></code></pre>

<p>See the <a href="pax-manual.html#MGL-PAX:INCLUDE%20MGL-PAX:LOCATIVE" title="MGL-PAX:INCLUDE MGL-PAX:LOCATIVE"><code>pax:include</code></a> locative for an example.</p></li>
</ul>
<p><a id="x-28DREF-3A-40GLOSSARY-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF:@GLOSSARY%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@DREF-LOCATIVES%20MGL-PAX:SECTION" title="DRef Locatives">&#8592;</a> <a href="dref-manual.html" title="DRef Manual">&#8593;</a> <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">&#8594;</a> <a href="#DREF:@GLOSSARY%20MGL-PAX:SECTION" title="Glossary">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L88">&#955;</a></span></span></p>
<h2><a href="#DREF:@GLOSSARY%20MGL-PAX:SECTION">6 Glossary</a></h2>
<p><a id="x-28DREF-3A-40NAME-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="DREF:@NAME%20MGL-PAX:GLOSSARY-TERM"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L95">[glossary-term]</a></span> <span class="reference-object"><a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" >name</a></span></span></span></p>

<p>Names are symbols or strings which name <a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE">functions</a>, <a href="#TYPE%20MGL-PAX:LOCATIVE" title="TYPE MGL-PAX:LOCATIVE">types</a>, <a href="#PACKAGE%20MGL-PAX:LOCATIVE" title="PACKAGE MGL-PAX:LOCATIVE">packages</a>,
etc. Together with <a href="#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="locative">locative</a>s, they form <a href="#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="reference">reference</a>s.</p>

<p>See <a href="#DREF-EXT:XREF-NAME%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-NAME (MGL-PAX:READER DREF:XREF)"><code>xref-name</code></a> and <a href="#DREF-EXT:DREF-NAME%20%28MGL-PAX:READER%20DREF:DREF%29" title="DREF-EXT:DREF-NAME (MGL-PAX:READER DREF:DREF)"><code>dref-name</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3A-40LOCATIVE-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L102">[glossary-term]</a></span> <span class="reference-object"><a href="#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" >locative</a></span></span></span></p>

<p>Locatives specify a <em>type</em> of definition such as
<a href="#FUNCTION%20MGL-PAX:LOCATIVE" title="FUNCTION MGL-PAX:LOCATIVE"><code>function</code></a> or <a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> and together with
<a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>s form <a href="#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="reference">reference</a>s.</p>

<p>A locative can be a symbol or a list whose <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_car_c.htm" title="CAR (MGL-PAX:CLHS FUNCTION)"><code>car</code></a> is a symbol. In
either case, the symbol is called the <a href="#DREF:@LOCATIVE-TYPE%20MGL-PAX:GLOSSARY-TERM" title="locative type">locative type</a>, and the rest
of the elements are the <em>locative arguments</em> (for example, see the
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_method.htm" title="METHOD (MGL-PAX:CLHS CLASS)"><code>method</code></a> locative).</p>

<p>See <a href="#DREF-EXT:XREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-LOCATIVE (MGL-PAX:READER DREF:XREF)"><code>xref-locative</code></a> and <a href="#DREF-EXT:DREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:DREF%29" title="DREF-EXT:DREF-LOCATIVE (MGL-PAX:READER DREF:DREF)"><code>dref-locative</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3A-40LOCATIVE-TYPE-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="DREF:@LOCATIVE-TYPE%20MGL-PAX:GLOSSARY-TERM"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L114">[glossary-term]</a></span> <span class="reference-object"><a href="#DREF:@LOCATIVE-TYPE%20MGL-PAX:GLOSSARY-TERM" >locative type</a></span></span></span></p>

<p>The locative type is the part of a <a href="#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="locative">locative</a> that identifies
what kind definition is being referred to. See <a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">Locative Types</a> for
the list locative types built into DRef.</p>

<p>Locative types are similar to Lisp <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_n.htm#namespace" title="&quot;namespace&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">namespaces</a>.</p>

<p>See <a href="#DREF-EXT:XREF-LOCATIVE-TYPE%20FUNCTION" title="DREF-EXT:XREF-LOCATIVE-TYPE FUNCTION"><code>xref-locative-type</code></a> and <a href="#DREF-EXT:DREF-LOCATIVE-TYPE%20FUNCTION" title="DREF-EXT:DREF-LOCATIVE-TYPE FUNCTION"><code>dref-locative-type</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3A-40REFERENCE-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L123">[glossary-term]</a></span> <span class="reference-object"><a href="#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" >reference</a></span></span></span></p>

<p>A reference is an <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> plus a <a href="#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="locative">locative</a>, and it identifies a
possible definition. References are of class <a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>. When a reference
is a <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>, it may also be called a definition.</p></li>
</ul>
<p><a id="x-28DREF-3A-40PRESENTATION-20MGL-PAX-3AGLOSSARY-TERM-29"></a>
<a id="DREF:@PRESENTATION%20MGL-PAX:GLOSSARY-TERM"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L128">[glossary-term]</a></span> <span class="reference-object"><a href="#DREF:@PRESENTATION%20MGL-PAX:GLOSSARY-TERM" >presentation</a></span></span></span></p>

<p><a href="#DREF:@REFERENCE%20MGL-PAX:GLOSSARY-TERM" title="reference">reference</a>s may have arguments (see
<a href="#DREF-EXT:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">Adding New Locatives</a>) that do not affect the behaviour of
<a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a> and the standard DRef <a href="#DREF:@OPERATIONS%20MGL-PAX:SECTION" title="Operations">Operations</a>, but which may be used for
other, &quot;presentation&quot; purposes. For example, the <a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a>
locative's <code>initform</code> argument is used for presentation by
<a href="pax-manual.html#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>pax:document</code></a>. Presentation arguments are available via
<a href="#DREF-EXT:DREF-ORIGIN%20%28MGL-PAX:READER%20DREF:DREF%29" title="DREF-EXT:DREF-ORIGIN (MGL-PAX:READER DREF:DREF)"><code>dref-ext:dref-origin</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3A-40EXTENDING-DREF-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF:@GLOSSARY%20MGL-PAX:SECTION" title="Glossary">&#8592;</a> <a href="dref-manual.html" title="DRef Manual">&#8593;</a> <a href="#DREF-EXT:@REFERENCES%20MGL-PAX:SECTION" title="References">&#8594;</a> <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L57">&#955;</a></span></span></p>
<h2><a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION">7 Extending DRef</a></h2>
<p><a id="x-28DREF-EXT-3A-40REFERENCES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF-EXT:@REFERENCES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">&#8592;</a> <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">&#8593;</a> <a href="#DREF-EXT:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">&#8594;</a> <a href="#DREF-EXT:@REFERENCES%20MGL-PAX:SECTION" title="References">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L66">&#955;</a></span></span></p>
<h3><a href="#DREF-EXT:@REFERENCES%20MGL-PAX:SECTION">7.1 References</a></h3>
<p><a id="x-28DREF-EXT-3AXREF-NAME-20-28MGL-PAX-3AREADER-20DREF-3AXREF-29-29"></a>
<a id="DREF-EXT:XREF-NAME%20%28MGL-PAX:READER%20DREF:XREF%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L166">[reader]</a></span> <span class="reference-object"><a href="#DREF-EXT:XREF-NAME%20%28MGL-PAX:READER%20DREF:XREF%29" >xref-name</a></span></span> <span class="locative-args">xref (:name)</span></span></p>

<p>The <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a> of the reference.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3AXREF-LOCATIVE-20-28MGL-PAX-3AREADER-20DREF-3AXREF-29-29"></a>
<a id="DREF-EXT:XREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:XREF%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L168">[reader]</a></span> <span class="reference-object"><a href="#DREF-EXT:XREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:XREF%29" >xref-locative</a></span></span> <span class="locative-args">xref (:locative)</span></span></p>

<p>The <a href="#DREF:@LOCATIVE%20MGL-PAX:GLOSSARY-TERM" title="locative">locative</a> of the reference.</p>

<p>The locative is normalized by replacing single-element lists with
 their only element:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">xref 'print '<i><span class="symbol">function</span></i></span>)</span>
==&gt; #&lt;XREF PRINT FUNCTION&gt;</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">xref 'print '<span class="paren2">(<span class="code"><i><span class="symbol">function</span></i></span>)</span></span>)</span>
==&gt; #&lt;XREF PRINT FUNCTION&gt;</span></code></pre></li>
</ul>
<p><a id="x-28DREF-EXT-3ADREF-NAME-20-28MGL-PAX-3AREADER-20DREF-3ADREF-29-29"></a>
<a id="DREF-EXT:DREF-NAME%20%28MGL-PAX:READER%20DREF:DREF%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L189">[reader]</a></span> <span class="reference-object"><a href="#DREF-EXT:DREF-NAME%20%28MGL-PAX:READER%20DREF:DREF%29" >dref-name</a></span></span> <span class="locative-args">dref</span></span></p>

<p>The same as <a href="#DREF-EXT:XREF-NAME%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-NAME (MGL-PAX:READER DREF:XREF)"><code>xref-name</code></a>, but only works on
<a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s. Use it as a statement of intent.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ADREF-LOCATIVE-20-28MGL-PAX-3AREADER-20DREF-3ADREF-29-29"></a>
<a id="DREF-EXT:DREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:DREF%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L193">[reader]</a></span> <span class="reference-object"><a href="#DREF-EXT:DREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:DREF%29" >dref-locative</a></span></span> <span class="locative-args">dref</span></span></p>

<p>The same as <a href="#DREF-EXT:XREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-LOCATIVE (MGL-PAX:READER DREF:XREF)"><code>xref-locative</code></a>, but only works on
<a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s. Use it as a statement of intent.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ADREF-ORIGIN-20-28MGL-PAX-3AREADER-20DREF-3ADREF-29-29"></a>
<a id="DREF-EXT:DREF-ORIGIN%20%28MGL-PAX:READER%20DREF:DREF%29"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L197">[reader]</a></span> <span class="reference-object"><a href="#DREF-EXT:DREF-ORIGIN%20%28MGL-PAX:READER%20DREF:DREF%29" >dref-origin</a></span></span> <span class="locative-args">dref</span></span></p>

<p>The object from which <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a> constructed this
<a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>. This is an <a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a> when the <code>locative</code> argument
to <code>locate</code> was non-<code>nil</code> and the value NAME-OR-OBJECT argument
otherwise. <code>dref-origin</code> may have <a href="#DREF:@PRESENTATION%20MGL-PAX:GLOSSARY-TERM" title="presentation">presentation</a> arguments, which are
not included in <a href="#DREF-EXT:LOCATIVE-ARGS%20FUNCTION" title="DREF-EXT:LOCATIVE-ARGS FUNCTION"><code>locative-args</code></a> as is the case with <code>initform</code>
argument of the <a href="#VARIABLE%20MGL-PAX:LOCATIVE" title="VARIABLE MGL-PAX:LOCATIVE"><code>variable</code></a> locative:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref '<span class="special">*standard-output*</span> '<span class="paren2">(<span class="code">variable <span class="string">"see-below"</span></span>)</span></span>)</span>
==&gt; #&lt;DREF *STANDARD-OUTPUT* VARIABLE&gt;</span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref-origin <span class="paren2">(<span class="code">dref '<span class="special">*standard-output*</span> '<span class="paren3">(<span class="code">variable <span class="string">"see-below"</span></span>)</span></span>)</span></span>)</span>
==&gt; #&lt;XREF *STANDARD-OUTPUT* <span class="paren1">(<span class="code">VARIABLE <span class="string">"see-below"</span></span>)</span>&gt;</span></code></pre>

<p>The <code>initform</code> argument overrides the global binding of
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/v_debug_.htm" title="*STANDARD-OUTPUT* (MGL-PAX:CLHS VARIABLE)"><code>*standard-output*</code></a> when it's <a href="pax-manual.html#MGL-PAX:DOCUMENT%20FUNCTION" title="MGL-PAX:DOCUMENT FUNCTION"><code>pax:document</code></a>ed:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">first-line
 <span class="paren2">(<span class="code">pax:document <span class="paren3">(<span class="code">dref '<span class="special">*standard-output*</span> '<span class="paren4">(<span class="code">variable <span class="string">"see-below"</span></span>)</span></span>)</span>
               <span class="keyword">:stream</span> nil</span>)</span></span>)</span>
=&gt; "- [variable] *STANDARD-OUTPUT* \"see-below\""</span></code></pre></li>
</ul>
<p><a id="x-28DREF-EXT-3ALOCATIVE-TYPE-20FUNCTION-29"></a>
<a id="DREF-EXT:LOCATIVE-TYPE%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L285">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:LOCATIVE-TYPE%20FUNCTION" >locative-type</a></span></span> <span class="locative-args">locative</span></span></p>

<p>Return <a href="#DREF:@LOCATIVE-TYPE%20MGL-PAX:GLOSSARY-TERM" title="locative type">locative type</a> of <code>locative</code> (which may be from
<a href="#DREF-EXT:XREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-LOCATIVE (MGL-PAX:READER DREF:XREF)"><code>xref-locative</code></a>). This is the first element of <code>locative</code> if it's a
list. If it's a symbol, it's that symbol itself.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ALOCATIVE-ARGS-20FUNCTION-29"></a>
<a id="DREF-EXT:LOCATIVE-ARGS%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L293">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:LOCATIVE-ARGS%20FUNCTION" >locative-args</a></span></span> <span class="locative-args">locative</span></span></p>

<p>Return the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_rest.htm" title="REST (MGL-PAX:CLHS FUNCTION)"><code>rest</code></a> of <code>locative</code> (which may be from <a href="#DREF-EXT:XREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-LOCATIVE (MGL-PAX:READER DREF:XREF)"><code>xref-locative</code></a>)
if it's a list. If it's a symbol, then return <code>nil</code>. The locative args
should match the <code>lambda-list</code> of the <a href="#DREF-EXT:LOCATIVE-TYPE%20FUNCTION" title="DREF-EXT:LOCATIVE-TYPE FUNCTION"><code>locative-type</code></a>'s
<a href="#DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO">definition</a>, but this is guaranteed only for
locatives of <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s and is not checked for plain
<a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>s.</p></li>
</ul>
<p>The following convenience functions are compositions of
{<a href="#DREF-EXT:LOCATIVE-TYPE%20FUNCTION" title="DREF-EXT:LOCATIVE-TYPE FUNCTION"><code>locative-type</code></a>, <a href="#DREF-EXT:LOCATIVE-ARGS%20FUNCTION" title="DREF-EXT:LOCATIVE-ARGS FUNCTION"><code>locative-args</code></a>} and {<a href="#DREF-EXT:XREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:XREF%29" title="DREF-EXT:XREF-LOCATIVE (MGL-PAX:READER DREF:XREF)"><code>xref-locative</code></a>,
<a href="#DREF-EXT:DREF-LOCATIVE%20%28MGL-PAX:READER%20DREF:DREF%29" title="DREF-EXT:DREF-LOCATIVE (MGL-PAX:READER DREF:DREF)"><code>dref-locative</code></a>}.</p>
<p><a id="x-28DREF-EXT-3AXREF-LOCATIVE-TYPE-20FUNCTION-29"></a>
<a id="DREF-EXT:XREF-LOCATIVE-TYPE%20FUNCTION"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L305">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:XREF-LOCATIVE-TYPE%20FUNCTION" >xref-locative-type</a></span></span> <span class="locative-args">xref</span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3AXREF-LOCATIVE-ARGS-20FUNCTION-29"></a>
<a id="DREF-EXT:XREF-LOCATIVE-ARGS%20FUNCTION"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L309">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:XREF-LOCATIVE-ARGS%20FUNCTION" >xref-locative-args</a></span></span> <span class="locative-args">xref</span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ADREF-LOCATIVE-TYPE-20FUNCTION-29"></a>
<a id="DREF-EXT:DREF-LOCATIVE-TYPE%20FUNCTION"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L313">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:DREF-LOCATIVE-TYPE%20FUNCTION" >dref-locative-type</a></span></span> <span class="locative-args">dref</span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ADREF-LOCATIVE-ARGS-20FUNCTION-29"></a>
<a id="DREF-EXT:DREF-LOCATIVE-ARGS%20FUNCTION"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/dref.lisp#L317">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:DREF-LOCATIVE-ARGS%20FUNCTION" >dref-locative-args</a></span></span> <span class="locative-args">dref</span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3A-40ADDING-NEW-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF-EXT:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF-EXT:@REFERENCES%20MGL-PAX:SECTION" title="References">&#8592;</a> <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">&#8593;</a> <a href="#DREF-EXT:@SYMBOL-LOCATIVES%20MGL-PAX:SECTION" title="Symbol Locatives">&#8594;</a> <a href="#DREF-EXT:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L5">&#955;</a></span></span></p>
<h3><a href="#DREF-EXT:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION">7.2 Adding New Locatives</a></h3>
<p>Let's see how to tell DRef about new kinds of definitions through
the example of the implementation of the <a href="#CLASS%20MGL-PAX:LOCATIVE" title="CLASS MGL-PAX:LOCATIVE"><code>class</code></a> locative. Note that
this is a verbatim <a href="pax-manual.html#MGL-PAX:INCLUDE%20MGL-PAX:LOCATIVE" title="MGL-PAX:INCLUDE MGL-PAX:LOCATIVE"><code>pax:include</code></a> of the sources. Please ignore any
internal machinery. The first step is to define the locative type:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-locative-type</span></i> class <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"Naturally, CLASS is the locative type for [CLASS][class]es.
  [CONDITIONs][type] may be referred to as CLASSes:

  ```cl-transcript
  (dref 'locate-error 'class)
  ==&gt; #&lt;DREF LOCATE-ERROR CONDITION&gt;
  ```"</span></span>)</span>
</span></code></pre>
<p>Next, we define a subclass of <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> associated with the
<a href="#CLASS%20MGL-PAX:LOCATIVE" title="CLASS MGL-PAX:LOCATIVE"><code>class</code></a> locative type and specialize <a href="#DREF-EXT:LOCATE*%20GENERIC-FUNCTION" title="DREF-EXT:LOCATE* GENERIC-FUNCTION"><code>locate*</code></a>:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-definition-class</span></i> class class-dref</span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> locate* <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">class class</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">make-instance 'class-dref <span class="keyword">:name</span> <span class="paren3">(<span class="code">class-name class</span>)</span> <span class="keyword">:locative</span> 'class</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> dref* <span class="paren2">(<span class="code">symbol <span class="paren3">(<span class="code">locative-type <span class="paren4">(<span class="code">eql 'class</span>)</span></span>)</span> locative-args</span>)</span>
  <span class="paren2">(<span class="code">check-locative-args class locative-args</span>)</span>
  <span class="paren2">(<span class="code">unless <span class="paren3">(<span class="code">and <span class="paren4">(<span class="code">symbolp symbol</span>)</span>
               <span class="paren4">(<span class="code">find-class symbol nil</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">locate-error <span class="string">"~S does not name a class."</span> symbol</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">make-instance 'class-dref <span class="keyword">:name</span> symbol <span class="keyword">:locative</span> 'class</span>)</span></span>)</span>
</span></code></pre>
<p>The first method makes <code>(locate (find-class 'dref))</code> work, while
the second is for <code>(dref 'dref 'class)</code>. Naturally, for locative
types that do not define first-class objects, the first method
cannot be defined.</p>
<p>Then, with <a href="#DREF-EXT:ADD-DREF-ACTUALIZER%20FUNCTION" title="DREF-EXT:ADD-DREF-ACTUALIZER FUNCTION"><code>add-dref-actualizer</code></a>, we install a function that that runs
whenever a new <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> is about to be returned from <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a> and
turn the locative <a href="#TYPE%20MGL-PAX:LOCATIVE" title="TYPE MGL-PAX:LOCATIVE"><code>type</code></a> into the locative <a href="#CLASS%20MGL-PAX:LOCATIVE" title="CLASS MGL-PAX:LOCATIVE"><code>class</code></a> if the denoted
definition is of a class:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> actualize-type-to-class <span class="paren2">(<span class="code">dref</span>)</span>
  <span class="paren2">(<span class="code">when <span class="paren3">(<span class="code">eq <span class="paren4">(<span class="code">dref-locative-type dref</span>)</span> 'type</span>)</span>
    <span class="paren3">(<span class="code">dref <span class="paren4">(<span class="code">dref-name dref</span>)</span> 'class nil</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">add-dref-actualizer 'actualize-type-to-class</span>)</span>
</span></code></pre>
<p>Finally, we define a <a href="#DREF-EXT:RESOLVE*%20GENERIC-FUNCTION" title="DREF-EXT:RESOLVE* GENERIC-FUNCTION"><code>resolve*</code></a> method to recover the
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS (MGL-PAX:CLHS CLASS)"><code>class</code></a> object from a <a href="#DREF-EXT:CLASS-DREF%20CLASS" title="DREF-EXT:CLASS-DREF CLASS"><code>class-dref</code></a>. We also specialize
<a href="#DREF-EXT:DOCSTRING*%20GENERIC-FUNCTION" title="DREF-EXT:DOCSTRING* GENERIC-FUNCTION"><code>docstring*</code></a> and <a href="#DREF-EXT:SOURCE-LOCATION*%20GENERIC-FUNCTION" title="DREF-EXT:SOURCE-LOCATION* GENERIC-FUNCTION"><code>source-location*</code></a>:</p>
<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> resolve* <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">dref class-dref</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">find-class <span class="paren3">(<span class="code">dref-name dref</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> docstring* <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">class class</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">documentation* class t</span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> source-location* <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">dref class-dref</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">swank-source-location* <span class="paren3">(<span class="code">resolve dref</span>)</span> <span class="paren3">(<span class="code">dref-name dref</span>)</span> 'class</span>)</span></span>)</span>
</span></code></pre>
<p>We took advantage of having just made the class locative type being
<a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>able, by specializing <a href="#DREF-EXT:DOCSTRING*%20GENERIC-FUNCTION" title="DREF-EXT:DOCSTRING* GENERIC-FUNCTION"><code>docstring*</code></a> on the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_class.htm" title="CLASS (MGL-PAX:CLHS CLASS)"><code>class</code></a> class.
<a href="#DREF-EXT:SOURCE-LOCATION*%20GENERIC-FUNCTION" title="DREF-EXT:SOURCE-LOCATION* GENERIC-FUNCTION"><code>source-location*</code></a> was specialized on <a href="#DREF-EXT:CLASS-DREF%20CLASS" title="DREF-EXT:CLASS-DREF CLASS"><code>class-dref</code></a> to demonstrate how
this can be done for non-<code>resolve</code>able locative types.</p>
<p>Classes have no arglist, so no <a href="#DREF-EXT:ARGLIST*%20GENERIC-FUNCTION" title="DREF-EXT:ARGLIST* GENERIC-FUNCTION"><code>arglist*</code></a> method is needed. In the
following, we describe the pieces in detail.</p>
<p><a id="x-28DREF-EXT-3ADEFINE-LOCATIVE-TYPE-20MGL-PAX-3AMACRO-29"></a>
<a id="DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L67">[macro]</a></span> <span class="reference-object"><a href="#DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" >define-locative-type</a></span></span> <span class="locative-args">locative-type lambda-list &amp;body docstring</span></span></p>

<p>Declare <code>locative-type</code> as a <a href="#MGL-PAX:LOCATIVE%20MGL-PAX:LOCATIVE" title="MGL-PAX:LOCATIVE MGL-PAX:LOCATIVE"><code>locative</code></a>, which is the
first step in <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">Extending DRef</a>.</p>

<p><code>lambda-list</code> is a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#destructuring_lambda_list" title="&quot;destructuring lambda list&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">destructuring lambda list</a>. The
<a href="#DREF-EXT:LOCATIVE-ARGS%20FUNCTION" title="DREF-EXT:LOCATIVE-ARGS FUNCTION"><code>locative-args</code></a> of <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s with <a href="#DREF:@LOCATIVE-TYPE%20MGL-PAX:GLOSSARY-TERM" title="locative type">locative type</a>
<code>locative-type</code> (the argument given to this macro) always conform to
this lambda list. See <a href="#DREF-EXT:CHECK-LOCATIVE-ARGS%20MGL-PAX:MACRO" title="DREF-EXT:CHECK-LOCATIVE-ARGS MGL-PAX:MACRO"><code>check-locative-args</code></a>.</p>

<p>For example, if  have:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-locative-type</span></i> dummy <span class="paren2">(<span class="code">x &amp;key y</span>)</span>
  <span class="string">"Dummy docstring."</span></span>)</span></span></code></pre>

<p>then <code>(locate 'dummy 'locative)</code> refers to this definition. That is,
<a href="#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a>, <a href="#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a> and <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> all work on it.</p>

<p>Locative types defined with <code>define-locative-type</code> can be listed with
<a href="#DREF:LISP-LOCATIVE-TYPES%20FUNCTION" title="DREF:LISP-LOCATIVE-TYPES FUNCTION"><code>lisp-locative-types</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ADEFINE-PSEUDO-LOCATIVE-TYPE-20MGL-PAX-3AMACRO-29"></a>
<a id="DREF-EXT:DEFINE-PSEUDO-LOCATIVE-TYPE%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L97">[macro]</a></span> <span class="reference-object"><a href="#DREF-EXT:DEFINE-PSEUDO-LOCATIVE-TYPE%20MGL-PAX:MACRO" >define-pseudo-locative-type</a></span></span> <span class="locative-args">locative-type lambda-list &amp;body docstring</span></span></p>

<p>Like <a href="#DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-locative-type</code></a>, but declare that <code>locative-type</code> does
not correspond to definitions in the Lisp system. Definitions with
pseduo locatives are not listed by default by <a href="#DREF:DEFINITIONS%20FUNCTION" title="DREF:DEFINITIONS FUNCTION"><code>definitions</code></a>.</p>

<p>Locative types defined with <code>define-pseudo-locative-type</code> can be
listed with <a href="#DREF:PSEUDO-LOCATIVE-TYPES%20FUNCTION" title="DREF:PSEUDO-LOCATIVE-TYPES FUNCTION"><code>pseudo-locative-types</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ADEFINE-LOCATIVE-ALIAS-20MGL-PAX-3AMACRO-29"></a>
<a id="DREF-EXT:DEFINE-LOCATIVE-ALIAS%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L131">[macro]</a></span> <span class="reference-object"><a href="#DREF-EXT:DEFINE-LOCATIVE-ALIAS%20MGL-PAX:MACRO" >define-locative-alias</a></span></span> <span class="locative-args">alias locative-type &amp;body docstring</span></span></p>

<p>Define <code>alias</code> as a locative equivalent to <code>locative-type</code> (both
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_symbol.htm" title="SYMBOL (MGL-PAX:CLHS CLASS)"><code>symbol</code></a>s). <code>locative-type</code> must exist (i.e. be among <a href="#DREF:LOCATIVE-TYPES%20FUNCTION" title="DREF:LOCATIVE-TYPES FUNCTION"><code>locative-types</code></a>).
For example, let's define <code>object</code> as an alias of the <a href="#CLASS%20MGL-PAX:LOCATIVE" title="CLASS MGL-PAX:LOCATIVE"><code>class</code></a> locative:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-locative-alias</span></i> object class</span>)</span></span></code></pre>

<p>Then, <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>ing with <code>object</code> will find the <code>class</code>:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref 'xref 'object</span>)</span>
==&gt; #&lt;DREF XREF CLASS&gt;</span></code></pre>

<p>The <a href="#DREF-EXT:LOCATIVE-ARGS%20FUNCTION" title="DREF-EXT:LOCATIVE-ARGS FUNCTION"><code>locative-args</code></a> of <code>object</code> (none in the above) are passed on to
<code>class</code>.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">arglist <span class="paren2">(<span class="code">dref 'object 'locative</span>)</span></span>)</span>
=&gt; <span class="paren1">(<span class="code">&amp;REST ARGS</span>)</span>
=&gt; :DESTRUCTURING</span></code></pre>

<p>Also, see <a href="pax-manual.html#MGL-PAX:@LOCATIVE-ALIASES%20MGL-PAX:SECTION" title="Locative Aliases">Locative Aliases</a> in <code>pax</code>.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ADEFINE-DEFINITION-CLASS-20MGL-PAX-3AMACRO-29"></a>
<a id="DREF-EXT:DEFINE-DEFINITION-CLASS%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L170">[macro]</a></span> <span class="reference-object"><a href="#DREF-EXT:DEFINE-DEFINITION-CLASS%20MGL-PAX:MACRO" >define-definition-class</a></span></span> <span class="locative-args">locative-type class-name &amp;optional (superclasses '(dref)) &amp;body body</span></span></p>

<p>Define a subclass of <code>dref</code>(<a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>0</code></a> <a href="#DREF:DREF%20FUNCTION" title="DREF:DREF FUNCTION"><code>1</code></a>). All definitions with <code>locative-type</code>
must be of this type. If non-<code>nil</code>, <code>body</code> is <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defcla.htm" title="DEFCLASS (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>defclass</code></a>' slot definitions
and other options.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ALOCATE-2A-20GENERIC-FUNCTION-29"></a>
<a id="DREF-EXT:LOCATE*%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L227">[generic-function]</a></span> <span class="reference-object"><a href="#DREF-EXT:LOCATE*%20GENERIC-FUNCTION" >locate*</a></span></span> <span class="locative-args">object</span></span></p>

<p>Return a definition of <code>object</code> as a <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>,
without <a href="#DREF-EXT:ADD-DREF-ACTUALIZER%20FUNCTION" title="DREF-EXT:ADD-DREF-ACTUALIZER FUNCTION">actualizing it</a>. If <code>object</code> is a <code>dref</code>
already, then this function simply returns it. If no definition is
found for <code>object</code>, then <code>locate-error</code>(<a href="#DREF-EXT:LOCATE-ERROR%20CONDITION" title="DREF-EXT:LOCATE-ERROR CONDITION"><code>0</code></a> <a href="#DREF-EXT:LOCATE-ERROR%20FUNCTION" title="DREF-EXT:LOCATE-ERROR FUNCTION"><code>1</code></a>) is signalled.</p>

<p>This function is for extending <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>. Do not call it directly.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ADREF-2A-20GENERIC-FUNCTION-29"></a>
<a id="DREF-EXT:DREF*%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L252">[generic-function]</a></span> <span class="reference-object"><a href="#DREF-EXT:DREF*%20GENERIC-FUNCTION" >dref*</a></span></span> <span class="locative-args">name locative-type locative-args</span></span></p>

<p><a href="#DREF-EXT:LOCATE*%20GENERIC-FUNCTION" title="DREF-EXT:LOCATE* GENERIC-FUNCTION"><code>locate*</code></a> calls this for <a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>s which are not
<a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s.</p>

<p>An <code>eql</code>(<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_eql.htm" title="EQL (MGL-PAX:CLHS FUNCTION)"><code>0</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_eql.htm" title="EQL (MGL-PAX:CLHS TYPE)"><code>1</code></a>)-specialized method must be defined for all new locative
types. This function is for extending <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>. Do not call it
directly.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ACHECK-LOCATIVE-ARGS-20MGL-PAX-3AMACRO-29"></a>
<a id="DREF-EXT:CHECK-LOCATIVE-ARGS%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L120">[macro]</a></span> <span class="reference-object"><a href="#DREF-EXT:CHECK-LOCATIVE-ARGS%20MGL-PAX:MACRO" >check-locative-args</a></span></span> <span class="locative-args">locative-type locative-args</span></span></p>

<p>Signal a <a href="#DREF-EXT:LOCATE-ERROR%20CONDITION" title="DREF-EXT:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition if <code>locative-args</code> do not match the
<code>lambda-list</code> argument of <code>locative-type</code> (not evaluated).</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ALOCATE-ERROR-20FUNCTION-29"></a>
<a id="DREF-EXT:LOCATE-ERROR%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L186">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:LOCATE-ERROR%20FUNCTION" >locate-error</a></span></span> <span class="locative-args">&amp;rest format-and-args</span></span></p>

<p>Call this function to signal a <a href="#DREF-EXT:LOCATE-ERROR%20CONDITION" title="DREF-EXT:LOCATE-ERROR CONDITION"><code>locate-error</code></a> condition from the
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#dynamic_extent" title="&quot;dynamic extent&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">dynamic extent</a> of a <a href="#DREF-EXT:LOCATE*%20GENERIC-FUNCTION" title="DREF-EXT:LOCATE* GENERIC-FUNCTION"><code>locate*</code></a> method (which includes
<a href="#DREF-EXT:DREF*%20GENERIC-FUNCTION" title="DREF-EXT:DREF* GENERIC-FUNCTION"><code>dref*</code></a>). It is an error to call <code>locate-error</code> elsewhere.</p>

<p><code>format-and-args</code>, if non-<code>nil</code>, is a format string and arguments
suitable for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_format.htm" title="FORMAT (MGL-PAX:CLHS FUNCTION)"><code>format</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3AADD-DREF-ACTUALIZER-20FUNCTION-29"></a>
<a id="DREF-EXT:ADD-DREF-ACTUALIZER%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L199">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:ADD-DREF-ACTUALIZER%20FUNCTION" >add-dref-actualizer</a></span></span> <span class="locative-args">name</span></span></p>

<p>Add the global function denoted by the symbol <code>name</code> to the list
of actualizers. Actualizers are functions of a single <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>
argument. They are called within <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a> when <a href="#DREF-EXT:LOCATE*%20GENERIC-FUNCTION" title="DREF-EXT:LOCATE* GENERIC-FUNCTION"><code>locate*</code></a> returns a <code>dref</code>.
Their job is to make the <code>dref</code> more specific.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3AREMOVE-DREF-ACTUALIZER-20FUNCTION-29"></a>
<a id="DREF-EXT:REMOVE-DREF-ACTUALIZER%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L207">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:REMOVE-DREF-ACTUALIZER%20FUNCTION" >remove-dref-actualizer</a></span></span> <span class="locative-args">name</span></span></p>

<p>Remove the global function denoted by the symbol <code>name</code> from the
list of actualizers.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ARESOLVE-2A-20GENERIC-FUNCTION-29"></a>
<a id="DREF-EXT:RESOLVE*%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L284">[generic-function]</a></span> <span class="reference-object"><a href="#DREF-EXT:RESOLVE*%20GENERIC-FUNCTION" >resolve*</a></span></span> <span class="locative-args">dref</span></span></p>

<p>Return the object defined by the definition <code>dref</code>
refers to. Signal a <a href="#DREF:RESOLVE-ERROR%20CONDITION" title="DREF:RESOLVE-ERROR CONDITION"><code>resolve-error</code></a> condition by calling the
<a href="#DREF:RESOLVE-ERROR%20FUNCTION" title="DREF:RESOLVE-ERROR FUNCTION"><code>resolve-error</code></a> function if the lookup fails.</p>

<p>To keep <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a> a partial inverse of <a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>, a specialized <a href="#DREF-EXT:LOCATE*%20GENERIC-FUNCTION" title="DREF-EXT:LOCATE* GENERIC-FUNCTION"><code>locate*</code></a>
method or an <a href="#DREF-EXT:ADD-DREF-ACTUALIZER%20FUNCTION" title="DREF-EXT:ADD-DREF-ACTUALIZER FUNCTION">actualizer</a> must be defined for
<code>resolve</code>able definitions. This function is for extending <code>resolve</code>. Do
not call it directly.</p>

<p>It is an error for methods of this generic function to return an
<a href="#DREF:XREF%20CLASS" title="DREF:XREF CLASS"><code>xref</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3ARESOLVE-ERROR-20FUNCTION-29"></a>
<a id="DREF:RESOLVE-ERROR%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L271">[function]</a></span> <span class="reference-object"><a href="#DREF:RESOLVE-ERROR%20FUNCTION" >resolve-error</a></span></span> <span class="locative-args">&amp;rest format-and-args</span></span></p>

<p>Call this function to signal a <a href="#DREF:RESOLVE-ERROR%20CONDITION" title="DREF:RESOLVE-ERROR CONDITION"><code>resolve-error</code></a> condition from the
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#dynamic_extent" title="&quot;dynamic extent&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">dynamic extent</a> of a <a href="#DREF-EXT:RESOLVE*%20GENERIC-FUNCTION" title="DREF-EXT:RESOLVE* GENERIC-FUNCTION"><code>resolve*</code></a> method. It is an error to call
<code>resolve-error</code> elsewhere.</p>

<p><code>format-and-args</code>, if non-<code>nil</code>, is a format string and arguments
suitable for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_format.htm" title="FORMAT (MGL-PAX:CLHS FUNCTION)"><code>format</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-3AMAP-DEFINITIONS-20GENERIC-FUNCTION-29"></a>
<a id="DREF:MAP-DEFINITIONS%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L304">[generic-function]</a></span> <span class="reference-object"><a href="#DREF:MAP-DEFINITIONS%20GENERIC-FUNCTION" >map-definitions</a></span></span> <span class="locative-args">fn name locative-type</span></span></p>

<p>Call <code>fn</code> with <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a>s which have the given
<code>name</code> and <code>locative-type</code>. For most locative types, there is at most
one definition, but for <a href="http://www.lispworks.com/documentation/HyperSpec/Body/t_method.htm" title="METHOD (MGL-PAX:CLHS CLASS)"><code>method</code></a>, for example, there may be many. The
default method simply does <code>(dref name locative-type nil)</code> and calls
<code>fn</code> with result if <a href="#DREF:DREF%20FUNCTION" title="DREF:DREF FUNCTION"><code>dref</code></a> succeeds.</p>

<p>This function is for extending <a href="#DREF:DEFINITIONS%20FUNCTION" title="DREF:DEFINITIONS FUNCTION"><code>definitions</code></a>. Do not call it directly.</p></li>
</ul>
<p><a id="x-28DREF-3AMAP-NAMES-20GENERIC-FUNCTION-29"></a>
<a id="DREF:MAP-NAMES%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L320">[generic-function]</a></span> <span class="reference-object"><a href="#DREF:MAP-NAMES%20GENERIC-FUNCTION" >map-names</a></span></span> <span class="locative-args">fn locative-type</span></span></p>

<p>Call <code>fn</code> with <a href="#DREF:@NAME%20MGL-PAX:GLOSSARY-TERM" title="name">name</a>s that form a <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> with
some locative with <code>locative-type</code>. The default method tries to form
<code>dref</code>s by combining each interned symbol with <code>locative-type</code> and no
<a href="#DREF-EXT:LOCATIVE-ARGS%20FUNCTION" title="DREF-EXT:LOCATIVE-ARGS FUNCTION"><code>locative-args</code></a>.</p>

<p>This function is for extending <a href="#DREF:DREF-APROPOS%20FUNCTION" title="DREF:DREF-APROPOS FUNCTION"><code>dref-apropos</code></a>. Do not call it
directly.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3AARGLIST-2A-20GENERIC-FUNCTION-29"></a>
<a id="DREF-EXT:ARGLIST*%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L333">[generic-function]</a></span> <span class="reference-object"><a href="#DREF-EXT:ARGLIST*%20GENERIC-FUNCTION" >arglist*</a></span></span> <span class="locative-args">object</span></span></p>

<p>To extend <a href="#DREF:ARGLIST%20FUNCTION" title="DREF:ARGLIST FUNCTION"><code>arglist</code></a>, specialize this on a subclass of
<a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> if that subclass is not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>able, else on the type
of object it resolves to. This function is for extension only. Do
not call it directly.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ADOCSTRING-2A-20GENERIC-FUNCTION-29"></a>
<a id="DREF-EXT:DOCSTRING*%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L347">[generic-function]</a></span> <span class="reference-object"><a href="#DREF-EXT:DOCSTRING*%20GENERIC-FUNCTION" >docstring*</a></span></span> <span class="locative-args">dref</span></span></p>

<p>To extend <a href="#MGL-PAX:DOCSTRING%20FUNCTION" title="MGL-PAX:DOCSTRING FUNCTION"><code>docstring</code></a>, specialize this on a subclass
of <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> if that subclass is not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>able, else on the
type of object it resolves to. This function is for extension only.
Do not call it directly.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ASOURCE-LOCATION-2A-20GENERIC-FUNCTION-29"></a>
<a id="DREF-EXT:SOURCE-LOCATION*%20GENERIC-FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L359">[generic-function]</a></span> <span class="reference-object"><a href="#DREF-EXT:SOURCE-LOCATION*%20GENERIC-FUNCTION" >source-location*</a></span></span> <span class="locative-args">dref</span></span></p>

<p>To extend <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a>, specialize this on a
subclass of <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> if that subclass is not <a href="#DREF:RESOLVE%20FUNCTION" title="DREF:RESOLVE FUNCTION"><code>resolve</code></a>able, else
on the type of object it resolves to. This function is for extension
only. Do not call it directly.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3A-40SYMBOL-LOCATIVES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF-EXT:@SYMBOL-LOCATIVES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF-EXT:@ADDING-NEW-LOCATIVES%20MGL-PAX:SECTION" title="Adding New Locatives">&#8592;</a> <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">&#8593;</a> <a href="#DREF-EXT:@DREF-SUBCLASSES%20MGL-PAX:SECTION" title="`dref` Subclasses">&#8594;</a> <a href="#DREF-EXT:@SYMBOL-LOCATIVES%20MGL-PAX:SECTION" title="Symbol Locatives">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L100">&#955;</a></span></span></p>
<h3><a href="#DREF-EXT:@SYMBOL-LOCATIVES%20MGL-PAX:SECTION">7.3 Symbol Locatives</a></h3>
<p>Let's see how the opaque <a href="#DREF-EXT:DEFINE-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-SYMBOL-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-symbol-locative-type</code></a> and the
obscure <a href="#DREF-EXT:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-definer-for-symbol-locative-type</code></a> macros work together
to simplify the common task of associating definition with a symbol
in a certain context.</p>
<p><a id="x-28DREF-EXT-3ADEFINE-SYMBOL-LOCATIVE-TYPE-20MGL-PAX-3AMACRO-29"></a>
<a id="DREF-EXT:DEFINE-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L389">[macro]</a></span> <span class="reference-object"><a href="#DREF-EXT:DEFINE-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" >define-symbol-locative-type</a></span></span> <span class="locative-args">locative-type lambda-list &amp;body docstring</span></span></p>

<p>Similar to <a href="#DREF-EXT:DEFINE-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-locative-type</code></a>, but it assumes that all things
<a href="#DREF:LOCATE%20FUNCTION" title="DREF:LOCATE FUNCTION"><code>locate</code></a>able with <code>locative-type</code> are going to be symbols defined with a
definer defined with <a href="#DREF-EXT:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-definer-for-symbol-locative-type</code></a>. Symbol
locatives are for attaching a definition (along with arglist,
documentation and source location) to a symbol in a particular
context. An example will make everything clear:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">define-symbol-locative-type</span></i> direction <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"A direction is a symbol."</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">define-definer-for-symbol-locative-type</span></i> <i><span class="symbol">define-direction</span></i> direction
  <span class="string">"With DEFINE-DIRECTION, one can document what a symbol means when
  interpreted as a DIRECTION."</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">define-direction</span></i> up <span class="paren2">(<span class="code"></span>)</span>
  <span class="string">"UP is equivalent to a coordinate delta of (0, -1)."</span></span>)</span></span></code></pre>

<p>After all this, <code>(dref 'up 'direction)</code> refers to the
<code>define-direction</code> form above.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ADEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE-20MGL-PAX-3AMACRO-29"></a>
<a id="DREF-EXT:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L444">[macro]</a></span> <span class="reference-object"><a href="#DREF-EXT:DEFINE-DEFINER-FOR-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" >define-definer-for-symbol-locative-type</a></span></span> <span class="locative-args">name locative-type &amp;body docstring</span></span></p>

<p>Define a macro with <code>name</code> that can be used to attach a lambda list,
documentation, and source location to a symbol in the context of
<code>locative-type</code>. The defined macro's arglist is <code>(symbol lambda-list
&amp;optional docstring)</code>. <code>locative-type</code> is assumed to have been defined
with <a href="#DREF-EXT:DEFINE-SYMBOL-LOCATIVE-TYPE%20MGL-PAX:MACRO" title="DREF-EXT:DEFINE-SYMBOL-LOCATIVE-TYPE MGL-PAX:MACRO"><code>define-symbol-locative-type</code></a>.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3A-40DREF-SUBCLASSES-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF-EXT:@DREF-SUBCLASSES%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF-EXT:@SYMBOL-LOCATIVES%20MGL-PAX:SECTION" title="Symbol Locatives">&#8592;</a> <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">&#8593;</a> <a href="#DREF-EXT:@SOURCE-LOCATIONS%20MGL-PAX:SECTION" title="Source Locations">&#8594;</a> <a href="#DREF-EXT:@DREF-SUBCLASSES%20MGL-PAX:SECTION" title="`dref` Subclasses">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L110">&#955;</a></span></span></p>
<h3><a href="#DREF-EXT:@DREF-SUBCLASSES%20MGL-PAX:SECTION">7.4 <code>dref</code> Subclasses</a></h3>
<p>These are the <a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS"><code>dref</code></a> subclasses corresponding to
<a href="#DREF:@LOCATIVE-TYPES%20MGL-PAX:SECTION" title="Locative Types">Locative Types</a>. They are exported to make it possible to go
beyond the standard <a href="#DREF:@OPERATIONS%20MGL-PAX:SECTION" title="Operations">Operations</a> (e.g. <a href="pax-manual.html#MGL-PAX:DOCUMENT-OBJECT*%20GENERIC-FUNCTION" title="MGL-PAX:DOCUMENT-OBJECT* GENERIC-FUNCTION"><code>pax:document-object*</code></a>) and for
subclassing.</p>
<p><strong>for Variables</strong></p>
<p><a id="x-28DREF-EXT-3AVARIABLE-DREF-20CLASS-29"></a>
<a id="DREF-EXT:VARIABLE-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L19">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:VARIABLE-DREF%20CLASS" >variable-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ACONSTANT-DREF-20CLASS-29"></a>
<a id="DREF-EXT:CONSTANT-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L53">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:CONSTANT-DREF%20CLASS" >constant-dref</a></span></span> <span class="locative-args"><a href="#DREF-EXT:VARIABLE-DREF%20CLASS" title="DREF-EXT:VARIABLE-DREF CLASS">variable-dref</a></span></span></li>
</ul>
<p><strong>for Macros</strong></p>
<p><a id="x-28DREF-EXT-3AMACRO-DREF-20CLASS-29"></a>
<a id="DREF-EXT:MACRO-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L90">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:MACRO-DREF%20CLASS" >macro-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ASYMBOL-MACRO-DREF-20CLASS-29"></a>
<a id="DREF-EXT:SYMBOL-MACRO-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L133">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:SYMBOL-MACRO-DREF%20CLASS" >symbol-macro-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ACOMPILER-MACRO-DREF-20CLASS-29"></a>
<a id="DREF-EXT:COMPILER-MACRO-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L173">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:COMPILER-MACRO-DREF%20CLASS" >compiler-macro-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ASETF-DREF-20CLASS-29"></a>
<a id="DREF-EXT:SETF-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L210">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:SETF-DREF%20CLASS" >setf-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><strong>for Functions</strong></p>
<p><a id="x-28DREF-EXT-3AFUNCTION-DREF-20CLASS-29"></a>
<a id="DREF-EXT:FUNCTION-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L291">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:FUNCTION-DREF%20CLASS" >function-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3AGENERIC-FUNCTION-DREF-20CLASS-29"></a>
<a id="DREF-EXT:GENERIC-FUNCTION-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L346">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:GENERIC-FUNCTION-DREF%20CLASS" >generic-function-dref</a></span></span> <span class="locative-args"><a href="#DREF-EXT:FUNCTION-DREF%20CLASS" title="DREF-EXT:FUNCTION-DREF CLASS">function-dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3AMETHOD-DREF-20CLASS-29"></a>
<a id="DREF-EXT:METHOD-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L403">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:METHOD-DREF%20CLASS" >method-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3AMETHOD-COMBINATION-DREF-20CLASS-29"></a>
<a id="DREF-EXT:METHOD-COMBINATION-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L509">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:METHOD-COMBINATION-DREF%20CLASS" >method-combination-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3AACCESSOR-DREF-20CLASS-29"></a>
<a id="DREF-EXT:ACCESSOR-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L554">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:ACCESSOR-DREF%20CLASS" >accessor-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3AREADER-DREF-20CLASS-29"></a>
<a id="DREF-EXT:READER-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L555">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:READER-DREF%20CLASS" >reader-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3AWRITER-DREF-20CLASS-29"></a>
<a id="DREF-EXT:WRITER-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L556">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:WRITER-DREF%20CLASS" >writer-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ASTRUCTURE-ACCESSOR-DREF-20CLASS-29"></a>
<a id="DREF-EXT:STRUCTURE-ACCESSOR-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L702">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:STRUCTURE-ACCESSOR-DREF%20CLASS" >structure-accessor-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><strong>for Types and Declarations</strong></p>
<p><a id="x-28DREF-EXT-3ATYPE-DREF-20CLASS-29"></a>
<a id="DREF-EXT:TYPE-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L778">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:TYPE-DREF%20CLASS" >type-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ACLASS-DREF-20CLASS-29"></a>
<a id="DREF-EXT:CLASS-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L828">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:CLASS-DREF%20CLASS" >class-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ADECLARATION-DREF-20CLASS-29"></a>
<a id="DREF-EXT:DECLARATION-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L902">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:DECLARATION-DREF%20CLASS" >declaration-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><strong>for the Condition System</strong></p>
<p><a id="x-28DREF-EXT-3ACONDITION-DREF-20CLASS-29"></a>
<a id="DREF-EXT:CONDITION-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L863">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:CONDITION-DREF%20CLASS" >condition-dref</a></span></span> <span class="locative-args"><a href="#DREF-EXT:CLASS-DREF%20CLASS" title="DREF-EXT:CLASS-DREF CLASS">class-dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ARESTART-DREF-20CLASS-29"></a>
<a id="DREF-EXT:RESTART-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/early.lisp#L5">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:RESTART-DREF%20CLASS" >restart-dref</a></span></span> <span class="locative-args"><a href="#DREF-EXT:SYMBOL-LOCATIVE-DREF%20CLASS" title="DREF-EXT:SYMBOL-LOCATIVE-DREF CLASS">symbol-locative-dref</a></span></span></li>
</ul>
<p><strong>for Packages and Readtables</strong></p>
<p><a id="x-28DREF-EXT-3AASDF-SYSTEM-DREF-20CLASS-29"></a>
<a id="DREF-EXT:ASDF-SYSTEM-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L976">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:ASDF-SYSTEM-DREF%20CLASS" >asdf-system-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3APACKAGE-DREF-20CLASS-29"></a>
<a id="DREF-EXT:PACKAGE-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1019">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:PACKAGE-DREF%20CLASS" >package-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3AREADTABLE-DREF-20CLASS-29"></a>
<a id="DREF-EXT:READTABLE-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1067">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:READTABLE-DREF%20CLASS" >readtable-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><strong>for DRef Locatives</strong></p>
<p><a id="x-28DREF-EXT-3ALOCATIVE-DREF-20CLASS-29"></a>
<a id="DREF-EXT:LOCATIVE-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1108">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:LOCATIVE-DREF%20CLASS" >locative-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ASYMBOL-LOCATIVE-DREF-20CLASS-29"></a>
<a id="DREF-EXT:SYMBOL-LOCATIVE-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/extension-api.lisp#L387">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:SYMBOL-LOCATIVE-DREF%20CLASS" >symbol-locative-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3AUNKNOWN-DREF-20CLASS-29"></a>
<a id="DREF-EXT:UNKNOWN-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1183">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:UNKNOWN-DREF%20CLASS" >unknown-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3ALAMBDA-DREF-20CLASS-29"></a>
<a id="DREF-EXT:LAMBDA-DREF%20CLASS"></a></p>
<ul>
<li><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/locatives.lisp#L1234">[class]</a></span> <span class="reference-object"><a href="#DREF-EXT:LAMBDA-DREF%20CLASS" >lambda-dref</a></span></span> <span class="locative-args"><a href="#DREF:DREF%20CLASS" title="DREF:DREF CLASS">dref</a></span></span></li>
</ul>
<p><a id="x-28DREF-EXT-3A-40SOURCE-LOCATIONS-20MGL-PAX-3ASECTION-29"></a>
<a id="DREF-EXT:@SOURCE-LOCATIONS%20MGL-PAX:SECTION"></a></p>
<p><span class="outer-navigation"><span class="navigation"> <a href="#DREF-EXT:@DREF-SUBCLASSES%20MGL-PAX:SECTION" title="`dref` Subclasses">&#8592;</a> <a href="#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" title="Extending DRef">&#8593;</a> <a href="#DREF-EXT:@SOURCE-LOCATIONS%20MGL-PAX:SECTION" title="Source Locations">&#8634;</a> <a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/base/package.lisp#L151">&#955;</a></span></span></p>
<h3><a href="#DREF-EXT:@SOURCE-LOCATIONS%20MGL-PAX:SECTION">7.5 Source Locations</a></h3>
<p>These represent the file or buffer position of a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#defining_form" title="&quot;defining form&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">defining
form</a> and are returned by the <a href="#DREF:SOURCE-LOCATION%20FUNCTION" title="DREF:SOURCE-LOCATION FUNCTION"><code>source-location</code></a> function. For
the details, see the Elisp function <code>slime-goto-source-location</code>.</p>
<p><a id="x-28DREF-EXT-3AMAKE-SOURCE-LOCATION-20FUNCTION-29"></a>
<a id="DREF-EXT:MAKE-SOURCE-LOCATION%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/source-location.lisp#L5">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:MAKE-SOURCE-LOCATION%20FUNCTION" >make-source-location</a></span></span> <span class="locative-args">&amp;key file file-position buffer buffer-position snippet</span></span></p>

<p>Make a Swank source location. The ultimate reference is <code>slime.el</code>.
When <code>snippet</code> is provided, the match nearest to <code>file-position</code> is
determined (see the Elisp <code>slime-isearch</code> and
<a href="#DREF-EXT:SOURCE-LOCATION-ADJUSTED-FILE-POSITION%20FUNCTION" title="DREF-EXT:SOURCE-LOCATION-ADJUSTED-FILE-POSITION FUNCTION"><code>source-location-adjusted-file-position</code></a>).</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ASOURCE-LOCATION-P-20FUNCTION-29"></a>
<a id="DREF-EXT:SOURCE-LOCATION-P%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/source-location.lisp#L23">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:SOURCE-LOCATION-P%20FUNCTION" >source-location-p</a></span></span> <span class="locative-args">object</span></span></p>

<p>See if <code>object</code> is a source location object.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ASOURCE-LOCATION-FILE-20FUNCTION-29"></a>
<a id="DREF-EXT:SOURCE-LOCATION-FILE%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/source-location.lisp#L28">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:SOURCE-LOCATION-FILE%20FUNCTION" >source-location-file</a></span></span> <span class="locative-args">location</span></span></p>

<p>Return the name of the file of the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#defining_form" title="&quot;defining form&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">defining form</a>.
This may be <code>nil</code>, for example, if <code>location</code> is of a <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#defining_form" title="&quot;defining form&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">defining
form</a> that was entered at the REPL, or compiled in the
<code>*slime-scratch*</code> buffer.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ASOURCE-LOCATION-FILE-POSITION-20FUNCTION-29"></a>
<a id="DREF-EXT:SOURCE-LOCATION-FILE-POSITION%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/source-location.lisp#L39">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:SOURCE-LOCATION-FILE-POSITION%20FUNCTION" >source-location-file-position</a></span></span> <span class="locative-args">location</span></span></p>

<p>Return the file position of the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#defining_form" title="&quot;defining form&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">defining form</a> or <code>nil</code>
if it's not available. The first position is 0.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ASOURCE-LOCATION-BUFFER-20FUNCTION-29"></a>
<a id="DREF-EXT:SOURCE-LOCATION-BUFFER%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/source-location.lisp#L47">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:SOURCE-LOCATION-BUFFER%20FUNCTION" >source-location-buffer</a></span></span> <span class="locative-args">location</span></span></p>

<p>Return the name of the Emacs buffer of the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#defining_form" title="&quot;defining form&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">defining form</a> or
<code>nil</code> if there is no such Emacs buffer.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ASOURCE-LOCATION-BUFFER-POSITION-20FUNCTION-29"></a>
<a id="DREF-EXT:SOURCE-LOCATION-BUFFER-POSITION%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/source-location.lisp#L56">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:SOURCE-LOCATION-BUFFER-POSITION%20FUNCTION" >source-location-buffer-position</a></span></span> <span class="locative-args">location</span></span></p>

<p>Return the position of the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#defining_form" title="&quot;defining form&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">defining form</a> in
<a href="#DREF-EXT:SOURCE-LOCATION-BUFFER%20FUNCTION" title="DREF-EXT:SOURCE-LOCATION-BUFFER FUNCTION"><code>source-location-buffer</code></a> or <code>nil</code> if it's not available. The first
position is 1.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ASOURCE-LOCATION-SNIPPET-20FUNCTION-29"></a>
<a id="DREF-EXT:SOURCE-LOCATION-SNIPPET%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/source-location.lisp#L67">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:SOURCE-LOCATION-SNIPPET%20FUNCTION" >source-location-snippet</a></span></span> <span class="locative-args">location</span></span></p>

<p>Return the <a href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_d.htm#defining_form" title="&quot;defining form&quot; (MGL-PAX:CLHS MGL-PAX:GLOSSARY-TERM)">defining form</a> or a prefix of it as a string or <code>nil</code>
if it's not available.</p></li>
</ul>
<p><a id="x-28DREF-EXT-3ASOURCE-LOCATION-ADJUSTED-FILE-POSITION-20FUNCTION-29"></a>
<a id="DREF-EXT:SOURCE-LOCATION-ADJUSTED-FILE-POSITION%20FUNCTION"></a></p>
<ul>
<li><p><span class=reference-bullet><span class=reference><span class="locative-type"><a href="https://github.com/melisgl/mgl-pax/blob/ca8d82757f3dd66a543e3ae5895e92015e15438f/dref/src/full/source-location.lisp#L73">[function]</a></span> <span class="reference-object"><a href="#DREF-EXT:SOURCE-LOCATION-ADJUSTED-FILE-POSITION%20FUNCTION" >source-location-adjusted-file-position</a></span></span> <span class="locative-args">location</span></span></p>

<p>Return the actual file position <code>location</code> points to allowing for 
some deviation from the raw <a href="#DREF-EXT:SOURCE-LOCATION-FILE-POSITION%20FUNCTION" title="DREF-EXT:SOURCE-LOCATION-FILE-POSITION FUNCTION"><code>source-location-file-position</code></a>, which is
adjusted by searching for the nearest occurrence of
<a href="#DREF-EXT:SOURCE-LOCATION-SNIPPET%20FUNCTION" title="DREF-EXT:SOURCE-LOCATION-SNIPPET FUNCTION"><code>source-location-snippet</code></a> in the file. Needless to say, this can be a
very expensive operation.</p>

<p>If <a href="#DREF-EXT:SOURCE-LOCATION-FILE%20FUNCTION" title="DREF-EXT:SOURCE-LOCATION-FILE FUNCTION"><code>source-location-file</code></a> is <code>nil</code>, <code>nil</code> is returned. If there is no
snippet, or it doesn't match, then <code>source-location-file-position</code> (or
0 if that's <code>nil</code>) is returned.</p>

<p>This is a non-interactive companion to the Elisp function
<code>slime-location-offset</code>, supporting only file positions and
non-partial matching of snippets.</p></li>
</ul>
  </div>
</div>
<script>$('#page-toc').toc({'selectors': 'h1,h2,h3,h4'});</script>
</body>
</html>
